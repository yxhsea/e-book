<html class="cye-disabled cye-lm"><head><meta charset="utf-8"><link rel="apple-touch-icon" sizes="180x180" href="http://static001.geekbang.org/static/icon/time/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="http://static001.geekbang.org/static/icon/time/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="http://static001.geekbang.org/static/icon/time/favicon-16x16.png"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="format-detection" content="telephone=no"><title>11 | 从0到1：搭建一个完整的Kubernetes集群</title><link href="https://static001.geekbang.org/static/time/css/app.b230db929e53af87acd535637f5011b8.css" rel="stylesheet"><style id="nightModeStyle">    html.cye-enabled.cye-nm:not(*:-webkit-full-screen) body,html.cye-enabled.cye-nm:not(*:-webkit-full-screen) #cye-workaround-body {-webkit-filter:contrast(91%) brightness(84%) invert(1);}</style><style id="cyebody">html.cye-enabled.cye-lm body{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyediv">html.cye-enabled.cye-lm div{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyetable">html.cye-enabled.cye-lm th{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}html.cye-enabled.cye-lm td{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyetextInput">html.cye-enabled.cye-lm input[type=text]{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}html.cye-enabled.cye-lm textarea{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeselect">html.cye-enabled.cye-lm select{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeul">html.cye-enabled.cye-lm ul{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style id="cyeChangeByClick">html.cye-enabled.cye-lm .cye-lm-tag,html.cye-enabled.cye-lm.cye-lm-tag{background-color:#cce8cf !important;border-color:rgb(51, 58, 51) !important;background-image:none !important;color:#000000  !important}</style><style type="text/css">    .hljs-ln {      border-collapse: collapse    }    .hljs-ln td {      padding: 0    }    .hljs-ln-n:before {      content: attr(data-line-number)    }</style><style type="text/css">    #iv-container {      position: fixed;      background: #0d0d0d;      width: 100%;      height: 100%;      top: 0;      left: 0;      display: none;      z-index: 1000    }    .iv-container {      overflow: hidden    }    .iv-close {      width: 26px;      height: 26px;      position: absolute;      right: 20px;      top: 20px;      cursor: pointer;      text-align: center;      overflow: hidden;      text-shadow: 0 0 3px #6d6d6d;      -webkit-transition: all .2s ease;      -moz-transition: all ease .2s;      -o-transition: all ease .2s;      transition: all .2s ease    }    .iv-close:after,    .iv-close:before {      content: "";      height: 2px;      width: 26px;      background: #fff;      position: absolute;      left: 0;      top: 50%;      margin-top: -2px;      border-radius: 2px    }    .iv-close:before {      -webkit-transform: rotate(45deg);      -moz-transform: rotate(45deg);      -ms-transform: rotate(45deg);      -o-transform: rotate(45deg);      transform: rotate(45deg)    }    .iv-close:after {      -webkit-transform: rotate(-45deg);      -moz-transform: rotate(-45deg);      -ms-transform: rotate(-45deg);      -o-transform: rotate(-45deg);      transform: rotate(-45deg)    }    .iv-close:hover {      -webkit-transform: rotate(90deg);      -moz-transform: rotate(90deg);      -ms-transform: rotate(90deg);      -o-transform: rotate(90deg);      transform: rotate(90deg)    }    .iv-image-view {      position: absolute;      height: 100%;      width: 100%    }    .iv-image-wrap {      display: inline-block    }    .iv-image-wrap:active {      cursor: move    }    .iv-large-image {      cursor: move;      max-width: 100%;      max-height: 100%;      background-color: #ececec;      -moz-transform: translateZ(0);      -o-transform: translateZ(0)    }    .iv-large-image,    .iv-loader {      position: absolute;      -webkit-transform: translateZ(0);      -ms-transform: translateZ(0);      transform: translateZ(0)    }    .iv-loader {      top: 50%;      left: 50%;      border-radius: 50%;      width: 32px;      height: 32px;      z-index: 100;      margin-top: -16px;      margin-left: -16px;      font-size: 5px;      text-indent: -9999em;      border-top: 1em solid hsla(0, 0%, 100%, .2);      border-right: 1em solid hsla(0, 0%, 100%, .2);      border-bottom: 1em solid hsla(0, 0%, 100%, .2);      border-left: 1em solid #fff;      -webkit-animation: load8 1.1s infinite linear;      animation: load8 1.1s infinite linear    }    .iv-loader:after {      width: 10em;      height: 10em;      border-radius: 50%    }    @-webkit-keyframes load8 {      0% {        -webkit-transform: rotate(0deg);        transform: rotate(0deg)      }      to {        -webkit-transform: rotate(1turn);        transform: rotate(1turn)      }    }    @keyframes load8 {      0% {        -webkit-transform: rotate(0deg);        transform: rotate(0deg)      }      to {        -webkit-transform: rotate(1turn);        transform: rotate(1turn)      }    }</style><style type="text/css">    .vue-pull-to-wrapper[data-v-12abd9fb] {      display: -webkit-box;      display: -webkit-flex;      display: flex;      -webkit-box-orient: vertical;      -webkit-box-direction: normal;      -webkit-flex-direction: column;      flex-direction: column;      height: 100%    }    .scroll-container[data-v-12abd9fb] {      -webkit-box-flex: 1;      -webkit-flex: 1;      flex: 1;      overflow-y: auto;      -webkit-overflow-scrolling: touch    }    .vue-pull-to-wrapper .action-block[data-v-12abd9fb] {      position: relative;      width: 100%    }    .default-text[data-v-12abd9fb] {      height: 100%;      line-height: 50px;      text-align: center    }</style><style type="text/css">    .button-cancel[data-v-87ffcada] {      color: #888;      border: 1px solid #888;      border-radius: 3px;      margin-right: 12px    }    .button-cancel[data-v-87ffcada],    .button-primary[data-v-87ffcada] {      -webkit-box-flex: 1;      -ms-flex-positive: 1;      flex-grow: 1;      height: 35px;      display: inline-block;      font-size: 15px;      text-align: center;      line-height: 36px    }    .button-primary[data-v-87ffcada] {      color: #fff;      background-color: #ff5a05;      border-radius: 3px    }    .article[data-v-87ffcada] {      max-width: 46.25rem;      margin: 0 auto    }    .article .article-unavailable[data-v-87ffcada] {      color: #fff;      text-align: center;      font-size: .875rem;      font-weight: 400;      width: 100%;      -webkit-box-sizing: border-box;      box-sizing: border-box;      padding: 0 15%;      height: 4.9rem;      background-image: url(data:image/jpeg;base64,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);      background-position: 0 0;      background-repeat: no-repeat;      background-size: cover;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: vertical;      -webkit-box-direction: normal;      -ms-flex-direction: column;      flex-direction: column;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      -webkit-box-pack: center;      -ms-flex-pack: center;      justify-content: center    }    .article .main[data-v-87ffcada] {      padding: 1.25rem 1.375rem;      margin-top: 52px;      margin-bottom: 52px    }    .article-title[data-v-87ffcada] {      color: #353535;      font-weight: 400;      line-height: 1.65rem;      font-size: 1.34375rem    }    .article-info[data-v-87ffcada] {      color: #888;      font-size: .9375rem;      margin-top: 1.0625rem    }    .article-content[data-v-87ffcada] {      margin-top: 1.0625rem    }    .article-content.android video[data-v-87ffcada]::-webkit-media-controls-fullscreen-button {      display: none    }    .audio-player[data-v-87ffcada] {      width: 100%;      margin: 20px 0    }    .to-comment[data-v-87ffcada] {      overflow: hidden;      margin-bottom: -30px    }    .to-comment a.button-primary[data-v-87ffcada] {      float: right;      height: 20px;      font-size: 12px;      line-height: 20px;      padding: 4px 8px;      cursor: pointer    }    .article-comments[data-v-87ffcada] {      margin-top: 2rem    }    .article-comments h2[data-v-87ffcada] {      text-align: center;      color: #888;      position: relative;      z-index: 1;      margin-bottom: 1rem    }    .article-comments h2[data-v-87ffcada]:before {      border-top: 1px dotted #888;      content: "";      position: absolute;      top: 56%;      left: 0;      width: 100%;      z-index: -1    }    .article-comments h2 span[data-v-87ffcada] {      font-size: 15.25px;      font-weight: 400;      padding: 0 1rem;      background: #fff;      display: inline-block    }    .article-sub-bottom[data-v-87ffcada] {      z-index: 10;      cursor: pointer    }    @media (max-width:769px) {      .article .breadcrumb[data-v-87ffcada] {        padding: 10px 0      }    }</style><style type="text/css">    .share-poster-wrapper {      position: fixed;      background-color: #fff;      left: 0;      bottom: 0;      z-index: 100;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      overflow: hidden;      width: 100%;      -webkit-box-orient: vertical;      -webkit-box-direction: normal;      -ms-flex-direction: column;      flex-direction: column;      -moz-user-select: -moz-none;      -webkit-user-select: none;      -ms-user-select: none;      user-select: none    }    .share-poster-wrapper .poster-bottom,    .share-poster-wrapper .poster-middle,    .share-poster-wrapper .poster-top {      -ms-flex-negative: 0;      flex-shrink: 0    }    .share-poster-wrapper .poster-middle {      padding: 16px 32px;      -webkit-box-sizing: border-box;      box-sizing: border-box    }    .share-poster-wrapper .poster-middle .poster-userinfo {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      padding-bottom: 18px    }    .share-poster-wrapper .poster-middle .poster-userinfo .poster-avatar {      min-width: 45px;      min-height: 45px;      width: 7vw;      height: 7vw;      border-radius: 50%;      -ms-flex-negative: 0;      flex-shrink: 0    }    .share-poster-wrapper .poster-middle .nickname {      font-size: 5vw;      font-weight: 400;      margin-left: 18px    }    .share-poster-wrapper .poster-middle .time {      font-size: 3.2vw    }    .share-poster-wrapper .poster-middle .poster-middle-content {      font-size: 4vw;      font-weight: 400;      white-space: normal;      word-wrap: break-word;      word-break: break-word;      letter-spacing: 1px    }    .share-poster-wrapper .poster-middle .poster-middle-content p {      margin-bottom: 22px    }    .share-poster-wrapper .poster-middle .quote-content {      font-size: 3.7vw;      padding: 32px 0    }    .share-poster-wrapper .poster-middle .quote-content p {      margin-bottom: 22px    }    .share-poster-wrapper .poster-middle .quote-info {      border-left: 1px solid #000;      padding-left: 10px;      margin-top: 38px    }    .share-poster-wrapper .poster-middle .quote-info p {      font-size: 3.2vw;      line-height: 1.5    }    .share-poster-wrapper.theme0 .poster-top {      width: 100%;      height: 25px;      margin-top: 27px;      background: url("https://static001.geekbang.org/static/time/page/img/sharePoster/theme1/top.png") no-repeat 15px 1px    }    .share-poster-wrapper.theme0 .poster-middle {      width: 100%;      padding-left: 56px;      padding-right: 56px;      background-image: url("https://static001.geekbang.org/static/time/page/img/sharePoster/theme1/middle.png");      background-repeat: repeat-y;      background-position: 15px 0    }    .share-poster-wrapper.theme0 .poster-middle .time {      margin-bottom: 45px    }    .share-poster-wrapper.theme0 .poster-middle .quote-content {      border-top: 1px solid #e3e1dc;      margin-top: 30px    }    .share-poster-wrapper.theme0 .poster-bottom {      width: 100%;      height: 25px;      margin-bottom: 27px;      background: url("https://static001.geekbang.org/static/time/page/img/sharePoster/theme1/bottom.png") no-repeat 15px -10px    }    .share-poster-wrapper.theme1 .poster-top {      width: 100%;      height: 25px;      margin-top: 27px;      background: url("https://static001.geekbang.org/static/time/page/img/sharePoster/theme0/top.png") no-repeat 38px 1px    }    .share-poster-wrapper.theme1 .poster-middle {      width: 100%;      padding: 0 42px 10px;      background: url("https://static001.geekbang.org/static/time/page/img/sharePoster/theme0/middle.png") repeat-y 38px 0    }    .share-poster-wrapper.theme1 .poster-middle .poster-userinfo {      border-bottom: 1px solid #b5a899    }    .share-poster-wrapper.theme1 .poster-middle .poster-userinfo .poster-avatar {      margin-left: 38px    }    .share-poster-wrapper.theme1 .poster-middle .poster-middle-wrapper {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      min-height: 260px;      border-bottom: 1px solid #b5a899    }    .share-poster-wrapper.theme1 .poster-middle .time {      max-width: 65px;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: vertical;      -webkit-box-direction: normal;      -ms-flex-direction: column;      flex-direction: column;      -webkit-box-pack: center;      -ms-flex-pack: center;      justify-content: center;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      text-align: center;      vertical-align: middle;      border-right: 1px solid #b5a899    }    .share-poster-wrapper.theme1 .poster-middle .time span {      white-space: nowrap;      -webkit-transform: rotate(90deg);      transform: rotate(90deg)    }    .share-poster-wrapper.theme1 .poster-middle .poster-middle-content {      padding: 30px    }    .share-poster-wrapper.theme1 .poster-middle .quote-content {      font-size: 3.7vw;      margin-left: 36px;      margin-right: 36px    }    .share-poster-wrapper.theme1 .poster-middle .quote-info {      margin-left: 36px;      margin-right: 36px    }    .share-poster-wrapper.theme1 .poster-middle .footer {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      margin-right: 30px    }    .share-poster-wrapper.theme1 .poster-bottom {      width: 100%;      height: 25px;      margin-bottom: 27px;      background: url("https://static001.geekbang.org/static/time/page/img/sharePoster/theme0/bottom.png") no-repeat 38px -10px    }    .share-poster-wrapper .share-poster {      background: #fefdf8;      -webkit-box-sizing: border-box;      box-sizing: border-box;      color: #9b8d73;      -webkit-box-flex: 1;      -ms-flex-positive: 1;      flex-grow: 1;      overflow: auto;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: vertical;      -webkit-box-direction: normal;      -ms-flex-direction: column;      flex-direction: column;      -webkit-overflow-scrolling: touch;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center    }    .share-poster-wrapper .share-poster.color0 {      background-color: #fefdf8    }    .share-poster-wrapper .share-poster.color1 {      background-color: #4d4d4d    }    .share-poster-wrapper .share-poster .footer {      margin-top: 2rem;      position: relative;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-pack: end;      -ms-flex-pack: end;      justify-content: flex-end;      -webkit-box-align: end;      -ms-flex-align: end;      align-items: flex-end    }    .share-poster-wrapper .share-poster .footer p {      margin: 0;      line-height: 1.4;      margin-left: 20px;      text-align: right;      padding-right: 20px    }    .share-poster-wrapper .controls {      background: #fff;      border-top: 1px solid #f5f5f5;      width: 100%;      padding-top: 5px;      -webkit-box-shadow: 0 -4px 10px 0 rgba(0, 0, 0, .1);      box-shadow: 0 -4px 10px 0 rgba(0, 0, 0, .1);      z-index: 1;      -ms-flex-negative: 0;      flex-shrink: 0    }    .share-poster-wrapper .controls>div {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-pack: center;      -ms-flex-pack: center;      justify-content: center;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      padding: 10px 0    }    .share-poster-wrapper .controls>div span {      font-size: .85rem    }    .share-poster-wrapper .controls>div button {      width: 100px;      height: 24px;      background: #eee;      margin: 0 10px;      border-radius: 5px;      border: 2px solid #b2b2b2;      outline: none    }    .share-poster-wrapper .controls>div button.on {      border: 2px solid #ff5a05    }    .share-poster-wrapper .controls .controls-themes button {      color: #b2b2b2;      font-size: 12px;      background: #fff;      text-align: center    }    .share-poster-wrapper .controls .controls-themes button.on {      color: #ff5a05    }    .share-poster-wrapper .buttons {      background: #fff;      border-top: 1px solid #f5f5f5;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -ms-flex-negative: 0;      flex-shrink: 0    }    .share-poster-wrapper .buttons a {      -webkit-box-flex: 1;      -ms-flex-positive: 1;      flex-grow: 1;      text-align: center;      color: #000;      font-weight: 400;      height: 3rem;      line-height: 3rem    }    .share-poster-wrapper .buttons a:last-child {      border-left: 1px solid #f5f5f5    }    .share-poster-wrapper img {      max-width: 100%    }    .share-poster-wrapper.android .poster-middle .nickname {      font-size: 10vw    }    .share-poster-wrapper.android .poster-middle .time {      font-size: 6.4vw    }    .share-poster-wrapper.android .poster-middle .poster-middle-content {      font-size: 8vw    }    .share-poster-wrapper.android .poster-middle .quote-content {      font-size: 7.4vw    }    .share-poster-wrapper.android .poster-middle .quote-info p {      font-size: 6.4vw    }</style><style type="text/css">    .mobile-tips {      width: 100%;      height: 51px;      background: rgba(0, 0, 0, .8);      position: fixed;      top: 0;      left: 0;      z-index: 20;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      -webkit-box-pack: justify;      -ms-flex-pack: justify;      justify-content: space-between;      -webkit-box-sizing: border-box;      box-sizing: border-box;      padding: 0 12px;      -webkit-transition: opacity .35s;      transition: opacity .35s;      opacity: 0;      pointer-events: none    }    .mobile-tips.istop {      opacity: 1;      pointer-events: auto    }    .mobile-tips .mobile-tips-info {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      -webkit-box-pack: start;      -ms-flex-pack: start;      justify-content: flex-start    }    .mobile-tips .mobile-tips-info i {      width: 36px;      height: 36px;      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAL30lEQVR4Ae2bBXTbStOG/VGZmVJM6lCZmZnplJmZmZkZ/o+Z4TIzM2O5aW+bimWZY8H7jxTnNvax2xQcnnOerHhm351R1rJsO3/+fG2i7uXLlxsGAoE9ABQUETMM42NFUfqZ/Q/qUMtmrqSnpyfquv4Giqb5yRaTDvVMUWxXrlxpRGK8i6JtAa/XO94Uxaaq6mEUm2nczZs3k2wAXLCs2Cg5jttQbNlvsrfDBCk2W96MhA7d54Qm34R662uoNz6z0Jjz0J0sDL/LPKhwC6J7HMi48g7crx6B8qcJkA6kQNzTGNJuk4ZBGkHa0wTSwVQ4/zkH3nd/aQlmBHyFRxCVRt3z1GY49iVB3l0f8kE7lJPtoPyyF5Rf9QnSN5Nf9oXTanvDcaoD5EOJdE4DKEdaw/vWOcoepuAKogppcP1pOqTtcZD3xUM51x3K//WhtncmZ7PoFXk5iMM6pycc+5vSterC/dwu6F5HwRHE0FR4XjgCeUt9KHsT4DxDnTxt0jNID4vgcoRtwfXw4+g6Fvsoa7Y3RMbXz+Z/QTSXSCXRBdK6KlBOdIVyqhe13e9Cj/vfR9d0nuwGeWN1uP+1DIau5k9BAuwViGvqQt6RAMfJ3pCPdoPjoegedbt17RO9IO9KhONQNxgZ3vwlSEb6hUwxdtop4B6QD3cN0iWM0G2OO9vD6BKhDT2OzrV8SXtSIe9tTaJ48ocgqsxAWlELjm2UGUdoVA91zhkHTaJuJ3J4jcPkc1cKHPs7AYaet4LoaoAyIx7i5oaQKXXlA50gRaUjpP0drWPkg7S+pwXE9XEQV9WAsKoWhJXVIa2sCXFdHKTdzcxj6NjOEa9pbdufbdvBrpC22eH808K8FcTxx2UQVlTNDGhfR6JDWEtkrR/oTG178OvqUoc7wP3kHmR8/yY0Pg2ag4Em34aafh7+z56G8pfl4JfVhLCmNsS9bc1zw65tLYdCMYira8L/9Ut5I4jv4kfgZ5eAtJeC23N35P1dIK1vBOXIYAQuvgtDC9w7+9wOeN/+CwneANLaOLpG53v72dcJwtKqMHyu3BVENwxIWztQyjc0R5toH529HSEsqw7f6799wCm/AuXsVKujJP49/NG+zXZ4/rs1dwXxfPIcZUdpKwBxR9sotLNGTVhUDeq1z/Gw5n76JPhZpchnO/PaUf2aMfELK5GQjtwRxDAMiDt7QFhNqbytLdEmBDGr3UlizC0P9frXeFTmevwIhFmlrWuTj6iI6xLge/lc7gjiT78Mfk6FTOdbiK0mrX9sRbPdTiO4tBb8Hz2BR23yyekQF1YlH+2zfGYjGA8NlLw+BdC12Aviev4cxFllIJtibG4dmY2pUE5OQCxM8/vAzakFeZ09un+KTZxfBeqNr2MriK5p4Dd0hLiiEaQNrSKzqQ2ldSVo4i3Eypyv/gXC1NLU+TYRYmhpteLaRLifPBBbQQIiA35mNQjrm0NY1yIya5KgnJiEWJrq94NbYoewKiF6HOtbwHFoeGwF8V36BPyUshDWNo9AC6vl5lSF75NnEEszCPk3KyHMqBA1DrMVlzeFkeGLnSDuj54GN6kUZQE5XN0MPBFsg8vNwU4sCZW/gVib+70nwE8oBX5Nlu9wmlM2V4UmM7ETxPnS78BOLQNuVTNwq7NIvdMS/KLG1qjE2ryXvwQ7uRL5TDb9R4ShDNK467ETRHnqBAlSjgRJjczKJIjr2ltT81ibn7kBblpN8pkYNR5mWnmo6RdjKMiTx8FPLgd+JWXCiuykZLbLswRRkVPTiYDbef+CsDfBTq1JPu2RYyHYqeURSPsqhiXz7C/BTSgNblky+BBSgiSBn98I+n08wZJe+Qe4YVXu+1mGJ+08mIlVyKedSI4IO6kcZcil2AnievNfYMf9AsLS5BB4q02y4Eb9HKqQszmIVxbAjCoJaUZjGOr9lZnrk1fAjSlp+eRD4shaJqZUgSalx04Q75dvgh31U3BLqOOLg4Qts2N+Ad8Xr+NephoGuPX9wJHA0qZu91VmBiH+fT/YkT8L+o8MP7chDL8ndoJkpF8FO7okuEV2IjEyM2rAcXYx7mXyU78F08dG5ZcIaU2n+xIkYADshn5gp1SKHsfiRBK6R2wnZprfC3ZqbXIYTw5DnN9ZX5IIdvjPoDklRDM3z+D2WOrMnLp0nv2+BVG++5RKrTSd2zToP5Iodrj+tDH2H+6kc8vATawAbmFiZBZR2UyoAMeZJVFKBWCWdgZL9c8tSaFzmkK8D0ECBLO6D7ixpiDJUeNgp9ZA4Nt3Yi+I96u3wQy2gTWdLrBHxhwhOsZ34bPw2ofw37NgBtisGmfn28HMj4e4umOOBDEI6aV/gxtE5y+kc7P8zQ/zT7HxMxvAUDNiL4ie4Qc3oTq4eY3BUSARWUCCzIqjwH+KgCwgy1xpF8EM/Bntq2cdYx07Lx7SqpwJolz+HuzQMuCn16LzSdDI/ml7U7j/vCX3HiEqf9sLfvjPIVBQ/Dw7+PlBaFkgeJOFyeAnVabyqmPde1QA7JKO4EaVgLAwhY7JOj4B0sq7C2IQzqsk5mgaiPHlwS9K+dGnkN0/YcbEjSljTtlzTxDV5QAz9GeZWUId4uZHgWqcHV8O3JL24I4uADuhCnXGHnrMvCYkSIeoghiE8u3HYIbQdaz7TnJ0fyYL4qEcnZ77X0Mo/zkGhmqZNVN3bkIm84LMzQZlCju1FtjRpcxUpv32kP3M3CYQV0QXRNMNpE9PBWv6WpRM54T6CPE9PxHMqFLQJSb3BdFVFey4GuCm1qaAqJNzEh4IZnYTCMvv/vlH/Ou+TPHnJYKdHX6+BS1TDNPi4HnseN59c5dx6wqYHjYKMp6g0Z+VQC1BbdTl8G0zG99TkIDPC2Z0FbBT69J54deMJ0xBmkLaMDTvv+x2v/I3MP1JlLmJFFjTsA5HIUQQypBl7e75X0Z+7LQ1s2XnJZnnhkLb+GkNzGl6/ngdwvmPg2D72qwaZufEmx0NtlnL2QUJbs88jmgMMQeCqH4/zW6rm/ej4PXiM9v5SeAmx0Hjf8hfL8y4/ncCXG8bmLnxYOYkEE0yoXsEa7V3YIkf981uRCXTLmfzkFf/DaYn+Zhvz/Rh/oeb0hi6mJ4/X6nymOVDorBT48yaDtY3MdNsw5iZ1VKGLM2ZIFogQFlSmzKiJtjpDei8ztAVIX+/dJdx/TzEGSnghpUAT6LwVOMcddxiZpBZ2ZjRGFIOBTHN+enrYFNKwP3LtQCMgvFapqHrcD/9S3CDK4IbUwHc7AQiKEw4M0mQZff32FGT2IL54q7mkuH+7zGIUxuBHfoLcFPrkTDZxcgURJxtv/8PYgVJkAyfF3r2jFED8H/9NpznlkGcmwJ+WGlwQ0uAG18N3JSakGZRyehazq8f/Fq14AgiceCOrYSbvR2xyjWZQ8b5D+F9/Z/w0H8njb2eYyHEWzehPPUHU+SCVTJe+kCW3t4G/tgCKN9+Ap/bjfsdUyP4uNAtyxA+fRPpR+ZBWj7QFKNg3kMC7A2wCTZw5txhcjzYXZMgvPh3OM5/DiebDo/XB59mwK9q8Psz4KV1t0OGkv4DpG8+Bvf8X3F76zgwU+xgaZbq3LaoEPwawiFAGFsHwogS4EaWBdfPBnZoWTAT4sDObgZmcWcwK/uANVnSFczsFmAmNQAzrLw1++WGlwI7siQ8v9lUeH4vo/k8cGwdDn7YL8CZD3RmNQY3tS74idXBjasEbkx5C95cnlAd/NQ64Gc2Aj8vERw9jPa/+IfC+Ysq13+OgutlAz8tDtwce+R5iclsO9gZDSHOaw017dvC/ROzjFuXoWweDI4+IXOTa5kTthDYyZQdk+rC+6+DgK4Xjd/cWcJc+wauP22BNC8VwuiKEKc1gGPbMPhe+gN0l1xoJmb3b7oOzcFD97nz4Uy12LRiQUKSVX/bRn8+QbFZ5nQ6J9ocDscwAP4iXyua9vj58+fjbeYfr9e7ytxWhEvls7S0tOakRWOb+YeId7vdcw3DEItgZjxx7dq1ZqRBE6KRKUiD4Er89evXWwUCgTMkDFvYdTBvoHTPmEz9TsgSg6j///oXgzKZqkEyAAAAAElFTkSuQmCC);      background-position: 0 0;      background-repeat: no-repeat;      background-size: contain;      border-radius: 7px    }    .mobile-tips .mobile-tips-info h2 {      font-size: 15px;      color: #fff;      font-weight: 400;      margin-left: 6px    }    .mobile-tips .mobile-tips-info h2 span {      font-size: 11px    }    .mobile-tips a {      width: 72px;      height: 31px;      text-align: center;      border: 1px solid #ff5a05;      border-radius: 3px;      font-size: 13px;      color: #ff5a05;      line-height: 31px    }</style><style type="text/css">    .mini-audio-player {      width: 100%;      height: 5.25rem;      border: 1px solid #d9d9d9;      background: #fafafa;      -webkit-box-sizing: border-box;      box-sizing: border-box;      padding: 1rem;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      -webkit-box-pack: justify;      -ms-flex-pack: justify;      justify-content: space-between;      margin: 1rem 0    }    .mini-audio-player>a {      border: none;      -ms-flex-negative: 0;      flex-shrink: 0    }    .mini-audio-player .btn-play {      background-image: url(data:image/png;base64,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)    }    .mini-audio-player .btn-pause,    .mini-audio-player .btn-play {      width: 2.6875rem;      height: 2.6875rem;      background-repeat: no-repeat;      background-position: 0 0;      background-size: contain;      text-decoration: none    }    .mini-audio-player .btn-pause {      background-image: url(data:image/png;base64,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)    }    .mini-audio-player .audio-info {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-flex: 1;      -ms-flex-positive: 1;      flex-grow: 1;      -webkit-box-orient: vertical;      -webkit-box-direction: normal;      -ms-flex-direction: column;      flex-direction: column;      margin-left: .6875rem;      min-width: 0    }    .mini-audio-player .audio-info h3 {      color: #353535;      font-size: 15.25px;      margin: 0;      white-space: nowrap;      overflow: hidden;      text-overflow: ellipsis    }    .mini-audio-player .audio-info p {      margin: 0;      margin-top: .125rem;      font-size: 11px;      line-height: 1rem    }    .mini-audio-player .audio-info p span {      color: #888    }    .mini-audio-player .btn-download {      width: 1.25rem;      height: 1.25rem;      position: relative;      background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAA+CAYAAACbQR1vAAABS2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPgogPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIi8+CiA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgo8P3hwYWNrZXQgZW5kPSJyIj8+IEmuOgAAA4hJREFUaIHtm8lOFFEUhr9qCWGHGxcaY1joK2h0YRzAtYmsWbAGGidEXOACbAYRxfgAPoEPoInGxJgg86gsJTHMw86EhS7O7TDk3uqq6qo6HahvQ7pOce7//1U0feve9vr6+lAiD3QC/4AC8FZDRJXGoMB14PWB1yPANPA1bSG5tAc0XLEcu5y6CvQCOGU5pnI3agVQMWQBaAvQJgtAW4A2WQDaArTJAtAWoE0WgLYAbbIAtAVokwWgLUCbLABtAdpkAfjU6oC7wKV0pCTCRcRDnesEVwDNwC/gg/nZHbeyFOgGltj30Gw7yRZALfAOqDavPeA50BO7xOToQTR75nU14qn26Im2AM4DNZbjz4DeePQlSi+i9Sg1iLdD2AJYApYdzbuo7BBeIBptLCPeDmELYA9oBHYdjbqQpaxKowA8ddR2gXuIt0O43gRHgTu4Q+ikskIoIJps7AINwA9b0e/fYJAQ1FZWD9CP2/wOUI/DPJT+IDRqGrhCeGIEaNEPdDhqO8iVH/NrEOST4BgSwo6j3gEMBOgTNwP4m6+nhHkI/lG4VAiPgcGAveJg0IxpYxvROh6kUZi5wLhpvO2oPyKdEF6asWyEMg/hJ0PjyN+VXwhDIXuGYQh46KhtIeYnwjSMMhss3glbjvoDkglhyPS2Eck8RJ8OTyB3gl8IryL2tjGM2/wmYn4ySuNyngdMmIE3HfX7iHDPUQ+CZ3q0O+qbyIWIZB7KfyAyaQS4QmhH7oQoIZQyv0EZV75IHE+EJvG/E9oJfyd4yC6yvKO+gQQ/FaKnlbgeiU0hIWw46nnEUJAQiubbHPV1M1bZ5iHeZ4KlQmgD3uAfgofsGfQz34DsKYyFuLemTSMhfATOWOqtiMk/llrRfIuj9zpwG5gtX+Y+SezNK4bwCXsILdgDaAXOOnomYh6Seyw+gwhed9TPWY75mb9FAuYh2XWBWUS4K4QgrAE3gblYFFlIemFkDjEQJYQ1JMD5WBUdIY2VoXkkhLUQv7NqfidR85De0liYEFaRK7+QqCJDmmuDC0gIqz7nrJhzUjEP6S+O+oWwglz5xTQFaawOLwI3gO8Hjo2ZY6maB72vzPwErgEXkO8MuVaiEkcrgCK/lcfPNkhkAWgL0KYKmZiMIG9Ktn0Bx5G/wDcgXwW8R6avJ41G4HQOufInlas5ZO5+UpnJAU3AFyy7J44xe8BnoOk/JruwYo92bigAAAAASUVORK5CYII=);      background-repeat: no-repeat;      background-position: 0 0;      background-size: contain;      text-decoration: none;      padding-right: .25rem    }    .mini-audio-player .btn-download .icon-download-done {      width: .45rem;      height: .45rem;      position: absolute;      bottom: 0;      right: 0;      display: inline-block;      background-image: url(data:image/png;base64,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);      background-repeat: no-repeat;      background-position: 0 0;      background-size: contain    }</style><style type="text/css">    .MathJax_Display {      overflow: auto    }    .poster {      position: fixed;      left: -10000px;      top: -10000px;      overflow: hidden;      padding: 1rem;      background: #ececec    }    .richcontent-pre-copy {      font-size: 13px;      color: #888;      position: absolute;      right: 1em;      top: .2em;      cursor: pointer;      -webkit-user-select: none;      -moz-user-select: none;      -ms-user-select: none;      user-select: none    }    .richcontent-pre-copy .iconfont {      font-size: 12px;      margin-right: .2em    }</style><style type="text/css">    .comment-item {      list-style-position: inside;      width: 100%;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      margin-bottom: 1rem    }    .comment-item a {      border-bottom: none    }    .comment-item .avatar {      width: 2.625rem;      height: 2.625rem;      -ms-flex-negative: 0;      flex-shrink: 0;      border-radius: 50%    }    .comment-item .info {      margin-left: .5rem;      -webkit-box-flex: 1;      -ms-flex-positive: 1;      flex-grow: 1    }    .comment-item .info .hd {      width: 100%;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-pack: justify;      -ms-flex-pack: justify;      justify-content: space-between;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center    }    .comment-item .info .hd .username {      color: #888;      font-size: 15.25px;      font-weight: 400;      line-height: 1.2    }    .comment-item .info .hd .control {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center    }    .comment-item .info .hd .control .btn-share {      color: #888;      font-size: .75rem;      margin-right: 1rem    }    .comment-item .info .hd .control .btn-praise {      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      font-size: 15.25px;      text-decoration: none    }    .comment-item .info .hd .control .btn-praise i {      color: #888;      display: inline-block;      font-size: .75rem;      margin-right: .3rem;      margin-top: -.01rem    }    .comment-item .info .hd .control .btn-praise i.on,    .comment-item .info .hd .control .btn-praise span {      color: #ff5a05    }    .comment-item .info .bd {      color: #353535;      font-size: 15.25px;      font-weight: 400;      white-space: normal;      word-break: break-all;      line-height: 1.6    }    .comment-item .info .time {      color: #888;      font-size: 9px;      line-height: 1    }    .comment-item .info .reply .reply-hd {      font-size: 15.25px    }    .comment-item .info .reply .reply-hd span {      margin-left: -12px;      color: #888;      font-weight: 400    }    .comment-item .info .reply .reply-hd i {      color: #ff5a05;      font-size: 15.25px    }    .comment-item .info .reply .reply-content {      color: #353535;      font-size: 15.25px;      font-weight: 400;      white-space: normal;      word-break: break-all    }    .comment-item .info .reply .reply-time {      color: #888;      font-size: 9px    }</style><style type="text/css">    .breadcrumb {      padding: 30px 0;      display: -webkit-box;      display: -ms-flexbox;      display: flex;      -webkit-box-orient: horizontal;      -webkit-box-direction: normal;      -ms-flex-direction: row;      flex-direction: row;      -webkit-box-align: center;      -ms-flex-align: center;      align-items: center;      -ms-flex-wrap: wrap;      flex-wrap: wrap;      background: #fff    }    .breadcrumb a.title {      color: #e57c39;      font-size: 15px;      font-weight: 400    }    .breadcrumb span.title {      color: #888;      font-size: 15px;      font-weight: 400    }    .breadcrumb .split {      color: #ccc;      font-size: 10px;      margin-right: 5px    }</style></head><body style=""><div id="app"><div data-v-87ffcada="" class="article"><div data-v-87ffcada="" class="main main-app" style="margin-top: 0px;"><h1 data-v-87ffcada="" class="article-title">          11 | 从0到1：搭建一个完整的Kubernetes集群</h1><div data-v-87ffcada="" class="article-info"><span data-v-87ffcada="">2018-09-17</span><span data-v-87ffcada="">张磊</span></div><div data-v-87ffcada="" class="article-content typo common-content"><img data-v-87ffcada="" src="https://static001.geekbang.org/resource/image/d0/ec/d05de7616d91d99c3afe11ebd66497ec.jpg"><div data-v-87ffcada="" class="mini-audio-player"><a href="javascript:;" class="btn-play"></a><div class="audio-info"><h3>11 | 从0到1：搭建一个完整的Kubernetes集群</h3><p><span>朗读人：秭明&nbsp;&nbsp;&nbsp;</span><span>00:17:20 | 8137</span></p></div><audio title="11 | 从0到1：搭建一个完整的Kubernetes集群" src="https://static001.geekbang.org/resource/audio/57/38/57e2429314b4380c9163db3ab0c86d38.mp3" controls="controls"></audio></div><div data-v-87ffcada="" id="article-content" class=""><div class="text">              <p>你好，我是张磊。今天我和你分享的主题是：从0到1搭建一个完整的Kubernetes集群。</p><p>在上一篇文章中，我介绍了kubeadm这个Kubernetes半官方管理工具的工作原理。既然kubeadm的初衷是让Kubernetes集群的部署不再让人头疼，那么这篇文章，我们就来使用它部署一个完整的Kubernetes集群吧。</p><blockquote>
<p>备注：这里所说的“完整”，指的是这个集群具备Kubernetes项目在GitHub上已经发布的所有功能，并能够模拟生产环境的所有使用需求。但并不代表这个集群是生产级别可用的：类似于高可用、授权、多租户、灾难备份等生产级别集群的功能暂时不在本篇文章的讨论范围。<br>
目前，kubeadm的高可用部署<a href="https://kubernetes.io/docs/setup/independent/high-availability/">已经有了第一个发布</a>。但是，这个特性还没有GA（生产可用），所以包括了大量的手动工作，跟我们所预期的一键部署还有一定距离。GA的日期预计是2018年底到2019年初。届时，如果有机会我会再和你分享这部分内容。</p>
</blockquote><p>这次部署，我不会依赖于任何公有云或私有云的能力，而是完全在Bare-metal环境中完成。这样的部署经验会更有普适性。而在后续的讲解中，如非特殊强调，我也都会以本次搭建的这个集群为基础。</p><!-- [[[read_end]]] --><h2>准备工作</h2><p>首先，准备机器。最直接的办法，自然是到公有云上申请几个虚拟机。当然，如果条件允许的话，拿几台本地的物理服务器来组集群是最好不过了。这些机器只要满足如下几个条件即可：</p><ol>
<li>
<p>满足安装Docker项目所需的要求，比如64位的Linux操作系统、3.10及以上的内核版本；</p>
</li>
<li>
<p>x86或者ARM架构均可；</p>
</li>
<li>
<p>机器之间网络互通，这是将来容器之间网络互通的前提；</p>
</li>
<li>
<p>有外网访问权限，因为需要拉取镜像；</p>
</li>
<li>
<p>能够访问到<code>gcr.io、quay.io</code>这两个docker registry，因为有小部分镜像需要在这里拉取；</p>
</li>
<li>
<p>单机可用资源建议2核CPU、8 GB内存或以上，再小的话问题也不大，但是能调度的Pod数量就比较有限了；</p>
</li>
<li>
<p>30 GB或以上的可用磁盘空间，这主要是留给Docker镜像和日志文件用的。</p>
</li>
</ol><p>在本次部署中，我准备的机器配置如下：</p><ol>
<li>
<p>2核CPU、 7.5 GB内存；</p>
</li>
<li>
<p>30 GB磁盘；</p>
</li>
<li>
<p>Ubuntu 16.04；</p>
</li>
<li>
<p>内网互通；</p>
</li>
<li>
<p>外网访问权限不受限制。</p>
</li>
</ol><blockquote>
<p>备注：在开始部署前，我推荐你先花几分钟时间，回忆一下Kubernetes的架构。</p>
</blockquote><p>然后，我再和你介绍一下今天实践的目标：</p><ol>
<li>
<p>在所有节点上安装Docker和kubeadm；</p>
</li>
<li>
<p>部署Kubernetes Master；</p>
</li>
<li>
<p>部署容器网络插件；</p>
</li>
<li>
<p>部署Kubernetes Worker；</p>
</li>
<li>
<p>部署Dashboard可视化插件；</p>
</li>
<li>
<p>部署容器存储插件。</p>
</li>
</ol><p>好了，现在，就来开始这次集群部署之旅吧！</p><h2>安装kubeadm和Docker</h2><p>我在上一篇文章《 Kubernetes一键部署利器：kubeadm》中，已经介绍过kubeadm的基础用法，它的一键安装非常方便，我们只需要添加kubeadm的源，然后直接使用apt-get安装即可，具体流程如下所示：</p><blockquote>
<p>备注：为了方便讲解，我后续都直接会在root用户下进行操作</p>
</blockquote><pre><code>$ curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
$ cat &lt;&lt;EOF &gt; /etc/apt/sources.list.d/kubernetes.list
deb http://apt.kubernetes.io/ kubernetes-xenial main
EOF
$ apt-get update
$ apt-get install -y docker.io kubeadm
</code></pre><p>在上述安装kubeadm的过程中，kubeadm和kubelet、kubectl、kubernetes-cni这几个二进制文件都会被自动安装好。</p><p>另外，这里我直接使用Ubuntu的docker.io的安装源，原因是Docker公司每次发布的最新的Docker CE（社区版）产品往往还没有经过Kubernetes项目的验证，可能会有兼容性方面的问题。</p><h2>部署Kubernetes的Master节点</h2><p>在上一篇文章中，我已经介绍过kubeadm可以一键部署Master节点。不过，在本篇文章中既然要部署一个“完整”的Kubernetes集群，那我们不妨稍微提高一下难度：通过配置文件来开启一些实验性功能。</p><p>所以，这里我编写了一个给kubeadm用的YAML文件（名叫：kubeadm.yaml）：</p><pre><code>apiVersion: kubeadm.k8s.io/v1alpha1
kind: MasterConfiguration
controllerManagerExtraArgs:
  horizontal-pod-autoscaler-use-rest-clients: &quot;true&quot;
  horizontal-pod-autoscaler-sync-period: &quot;10s&quot;
  node-monitor-grace-period: &quot;10s&quot;
apiServerExtraArgs:
  runtime-config: &quot;api/all=true&quot;
kubernetesVersion: &quot;stable-1.11&quot;
</code></pre><p>这个配置中，我给kube-controller-manager设置了：</p><pre><code>horizontal-pod-autoscaler-use-rest-clients: &quot;true&quot;
</code></pre><p>这意味着，将来部署的kube-controller-manager能够使用自定义资源（Custom Metrics）进行自动水平扩展。这是我后面文章中会重点介绍的一个内容。</p><p>其中，“stable-1.11”就是kubeadm帮我们部署的Kubernetes版本号，即：Kubernetes release 1.11最新的稳定版，在我的环境下，它是v1.11.1。你也可以直接指定这个版本，比如：kubernetesVersion: “v1.11.1”。</p><p>然后，我们只需要执行一句指令：</p><pre><code>$ kubeadm init --config kubeadm.yaml
</code></pre><p>就可以完成Kubernetes Master的部署了，这个过程只需要几分钟。部署完成后，kubeadm会生成一行指令：</p><pre><code>kubeadm join 10.168.0.2:6443 --token 00bwbx.uvnaa2ewjflwu1ry --discovery-token-ca-cert-hash sha256:00eb62a2a6020f94132e3fe1ab721349bbcd3e9b94da9654cfe15f2985ebd711
</code></pre><p>这个kubeadm join命令，就是用来给这个Master节点添加更多工作节点（Worker）的命令。我们在后面部署Worker节点的时候马上会用到它，所以找一个地方把这条命令记录下来。</p><p>此外，kubeadm还会提示我们第一次使用Kubernetes集群所需要的配置命令：</p><pre><code>mkdir -p $HOME/.kube
sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
sudo chown $(id -u):$(id -g) $HOME/.kube/config
</code></pre><p>而需要这些配置命令的原因是：Kubernetes集群默认需要加密方式访问。所以，这几条命令，就是将刚刚部署生成的Kubernetes集群的安全配置文件，保存到当前用户的.kube目录下，kubectl默认会使用这个目录下的授权信息访问Kubernetes集群。</p><p>如果不这么做的话，我们每次都需要通过export KUBECONFIG环境变量告诉kubectl这个安全配置文件的位置。</p><p>现在，我们就可以使用kubectl get命令来查看当前唯一一个节点的状态了：</p><pre><code>$ kubectl get nodes

NAME      STATUS     ROLES     AGE       VERSION
master    NotReady   master    1d        v1.11.1
</code></pre><p>可以看到，这个get指令输出的结果里，Master节点的状态是NotReady，这是为什么呢？</p><p>在调试Kubernetes集群时，最重要的手段就是用kubectl describe来查看这个节点（Node）对象的详细信息、状态和事件（Event），我们来试一下：</p><pre><code>$ kubectl describe node master

...
Conditions:
...

Ready   False ... KubeletNotReady  runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized
</code></pre><p>通过kubectl describe指令的输出，我们可以看到NodeNotReady的原因在于，我们尚未部署任何网络插件。</p><p>另外，我们还可以通过kubectl检查这个节点上各个系统Pod的状态，其中，kube-system是Kubernetes项目预留的系统Pod的工作空间（Namepsace，注意它并不是Linux Namespace，它只是Kubernetes划分不同工作空间的单位）：</p><pre><code>$ kubectl get pods -n kube-system

NAME               READY   STATUS   RESTARTS  AGE
coredns-78fcdf6894-j9s52     0/1    Pending  0     1h
coredns-78fcdf6894-jm4wf     0/1    Pending  0     1h
etcd-master           1/1    Running  0     2s
kube-apiserver-master      1/1    Running  0     1s
kube-controller-manager-master  0/1    Pending  0     1s
kube-proxy-xbd47         1/1    NodeLost  0     1h
kube-scheduler-master      1/1    Running  0     1s
</code></pre><p>可以看到，CoreDNS、kube-controller-manager等依赖于网络的Pod都处于Pending状态，即调度失败。这当然是符合预期的：因为这个Master节点的网络尚未就绪。</p><h2>部署网络插件</h2><p>在Kubernetes项目“一切皆容器”的设计理念指导下，部署网络插件非常简单，只需要执行一句kubectl apply指令，以Weave为例：</p><pre><code>$ kubectl apply -f https://git.io/weave-kube-1.6
</code></pre><p>部署完成后，我们可以通过kubectl get重新检查Pod的状态：</p><pre><code>$ kubectl get pods -n kube-system

NAME                             READY     STATUS    RESTARTS   AGE
coredns-78fcdf6894-j9s52         1/1       Running   0          1d
coredns-78fcdf6894-jm4wf         1/1       Running   0          1d
etcd-master                      1/1       Running   0          9s
kube-apiserver-master            1/1       Running   0          9s
kube-controller-manager-master   1/1       Running   0          9s
kube-proxy-xbd47                 1/1       Running   0          1d
kube-scheduler-master            1/1       Running   0          9s
weave-net-cmk27                  2/2       Running   0          19s
</code></pre><p>可以看到，所有的系统Pod都成功启动了，而刚刚部署的Weave网络插件则在kube-system下面新建了一个名叫weave-net-cmk27的Pod，一般来说，这些Pod就是容器网络插件在每个节点上的控制组件。</p><p>Kubernetes支持容器网络插件，使用的是一个名叫CNI的通用接口，它也是当前容器网络的事实标准，市面上的所有容器网络开源项目都可以通过CNI接入Kubernetes，比如Flannel、Calico、Canal、Romana等等，它们的部署方式也都是类似的“一键部署”。关于这些开源项目的实现细节和差异，我会在后续的网络部分详细介绍。</p><p>至此，Kubernetes的Master节点就部署完成了。如果你只需要一个单节点的Kubernetes，现在你就可以使用了。不过，在默认情况下，Kubernetes的Master节点是不能运行用户Pod的，所以还需要额外做一个小操作。在本篇的最后部分，我会介绍到它。</p><h2>部署Kubernetes的Worker节点</h2><p>Kubernetes的Worker节点跟Master节点几乎是相同的，它们运行着的都是一个kubelet组件。唯一的区别在于，在kubeadm init的过程中，kubelet启动后，Master节点上还会自动运行kube-apiserver、kube-scheduler、kube-controller-manger这三个系统Pod。</p><p>所以，相比之下，部署Worker节点反而是最简单的，只需要两步即可完成。</p><p>第一步，在所有Worker节点上执行“安装kubeadm和Docker”一节的所有步骤。</p><p>第二步，执行部署Master节点时生成的kubeadm join指令：</p><pre><code>$ kubeadm join 10.168.0.2:6443 --token 00bwbx.uvnaa2ewjflwu1ry --discovery-token-ca-cert-hash sha256:00eb62a2a6020f94132e3fe1ab721349bbcd3e9b94da9654cfe15f2985ebd711
</code></pre><h2>通过Taint/Toleration调整Master执行Pod的策略</h2><p>我在前面提到过，默认情况下Master节点是不允许运行用户Pod的。而Kubernetes做到这一点，依靠的是Kubernetes的Taint/Toleration机制。</p><p>它的原理非常简单：一旦某个节点被加上了一个Taint，即被“打上了污点”，那么所有Pod就都不能在这个节点上运行，因为Kubernetes的Pod都有“洁癖”。</p><p>除非，有个别的Pod声明自己能“容忍”这个“污点”，即声明了Toleration，它才可以在这个节点上运行。</p><p>其中，为节点打上“污点”（Taint）的命令是：</p><pre><code>$ kubectl taint nodes node1 foo=bar:NoSchedule
</code></pre><p>这时，该node1节点上就会增加一个键值对格式的Taint，即：foo=bar:NoSchedule。其中值里面的NoSchedule，意味着这个Taint只会在调度新Pod时产生作用，而不会影响已经在node1上运行的Pod，哪怕它们没有Toleration。</p><p>那么Pod又如何声明Toleration呢？</p><p>我们只要在Pod的.yaml文件中的spec部分，加入tolerations字段即可：</p><pre><code>apiVersion: v1
kind: Pod
...
spec:
  tolerations:
  - key: &quot;foo&quot;
    operator: &quot;Equal&quot;
    value: &quot;bar&quot;
    effect: &quot;NoSchedule&quot;
</code></pre><p>这个Toleration的含义是，这个Pod能“容忍”所有键值对为foo=bar的Taint（ operator: “Equal”，“等于”操作）。</p><p>现在回到我们已经搭建的集群上来。这时，如果你通过kubectl describe检查一下Master节点的Taint字段，就会有所发现了：</p><pre><code>$ kubectl describe node master

Name:               master
Roles:              master
Taints:             node-role.kubernetes.io/master:NoSchedule
</code></pre><p>可以看到，Master节点默认被加上了<code>node-role.kubernetes.io/master:NoSchedule</code>这样一个“污点”，其中“键”是<code>node-role.kubernetes.io/master</code>，而没有提供“值”。</p><p>此时，你就需要像下面这样用“Exists”操作符（operator: “Exists”，“存在”即可）来说明，该Pod能够容忍所有以foo为键的Taint，才能让这个Pod运行在该Master节点上：</p><pre><code>apiVersion: v1
kind: Pod
...
spec:
  tolerations:
  - key: &quot;foo&quot;
    operator: &quot;Exists&quot;
    effect: &quot;NoSchedule&quot;
</code></pre><p>当然，如果你就是想要一个单节点的Kubernetes，删除这个Taint才是正确的选择：</p><pre><code>$ kubectl taint nodes --all node-role.kubernetes.io/master-
</code></pre><p>如上所示，我们在“<code>node-role.kubernetes.io/master</code>”这个键后面加上了一个短横线“-”，这个格式就意味着移除所有以“<code>node-role.kubernetes.io/master</code>”为键的Taint。</p><p>到了这一步，一个基本完整的Kubernetes集群就部署完毕了。是不是很简单呢？</p><p>有了kubeadm这样的原生管理工具，Kubernetes的部署已经被大大简化。更重要的是，像证书、授权、各个组件的配置等部署中最麻烦的操作，kubeadm都已经帮你完成了。</p><p>接下来，我们再在这个Kubernetes集群上安装一些其他的辅助插件，比如Dashboard和存储插件。</p><h2>部署Dashboard可视化插件</h2><p>在Kubernetes社区中，有一个很受欢迎的Dashboard项目，它可以给用户提供一个可视化的Web界面来查看当前集群的各种信息。毫不意外，它的部署也相当简单：</p><pre><code>$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/master/src/deploy/recommended/kubernetes-dashboard.yaml
</code></pre><p>部署完成之后，我们就可以查看Dashboard对应的Pod的状态了：</p><pre><code>$ kubectl get pods -n kube-system

kubernetes-dashboard-6948bdb78-f67xk   1/1       Running   0          1m
</code></pre><p>需要注意的是，由于Dashboard是一个Web Server，很多人经常会在自己的公有云上无意地暴露Dashboard的端口，从而造成安全隐患。所以，1.7版本之后的Dashboard项目部署完成后，默认只能通过Proxy的方式在本地访问。具体的操作，你可以查看Dashboard项目的<a href="https://github.com/kubernetes/dashboard">官方文档</a>。</p><p>而如果你想从集群外访问这个Dashboard的话，就需要用到Ingress，我会在后面的文章中专门介绍这部分内容。</p><h2>部署容器存储插件</h2><p>接下来，让我们完成这个Kubernetes集群的最后一块拼图：容器持久化存储。</p><p>我在前面介绍容器原理时已经提到过，很多时候我们需要用数据卷（Volume）把外面宿主机上的目录或者文件挂载进容器的Mount Namespace中，从而达到容器和宿主机共享这些目录或者文件的目的。容器里的应用，也就可以在这些数据卷中新建和写入文件。</p><p>可是，如果你在某一台机器上启动的一个容器，显然无法看到其他机器上的容器在它们的数据卷里写入的文件。<strong>这是容器最典型的特征之一：无状态。</strong></p><p>而容器的持久化存储，就是用来保存容器存储状态的重要手段：存储插件会在容器里挂载一个基于网络或者其他机制的远程数据卷，使得在容器里创建的文件，实际上是保存在远程存储服务器上，或者以分布式的方式保存在多个节点上，而与当前宿主机没有任何绑定关系。这样，无论你在其他哪个宿主机上启动新的容器，都可以请求挂载指定的持久化存储卷，从而访问到数据卷里保存的内容。<strong>这就是“持久化”的含义。</strong></p><p>由于Kubernetes本身的松耦合设计，绝大多数存储项目，比如Ceph、GlusterFS、NFS等，都可以为Kubernetes提供持久化存储能力。在这次的部署实战中，我会选择部署一个很重要的Kubernetes存储插件项目：Rook。</p><p>Rook项目是一个基于Ceph的Kubernetes存储插件（它后期也在加入对更多存储实现的支持）。不过，不同于对Ceph的简单封装，Rook在自己的实现中加入了水平扩展、迁移、灾难备份、监控等大量的企业级功能，使得这个项目变成了一个完整的、生产级别可用的容器存储插件。</p><p>得益于容器化技术，用两条指令，Rook就可以把复杂的Ceph存储后端部署起来：</p><pre><code>$ kubectl apply -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/operator.yaml

$ kubectl apply -f https://raw.githubusercontent.com/rook/rook/master/cluster/examples/kubernetes/ceph/cluster.yaml
</code></pre><p>在部署完成后，你就可以看到Rook项目会将自己的Pod放置在由它自己管理的两个Namespace当中：</p><pre><code>$ kubectl get pods -n rook-ceph-system
NAME                                  READY     STATUS    RESTARTS   AGE
rook-ceph-agent-7cv62                 1/1       Running   0          15s
rook-ceph-operator-78d498c68c-7fj72   1/1       Running   0          44s
rook-discover-2ctcv                   1/1       Running   0          15s

$ kubectl get pods -n rook-ceph
NAME                   READY     STATUS    RESTARTS   AGE
rook-ceph-mon0-kxnzh   1/1       Running   0          13s
rook-ceph-mon1-7dn2t   1/1       Running   0          2s
</code></pre><p>这样，一个基于Rook持久化存储集群就以容器的方式运行起来了，而接下来在Kubernetes项目上创建的所有Pod就能够通过Persistent Volume（PV）和Persistent Volume Claim（PVC）的方式，在容器里挂载由Ceph提供的数据卷了。</p><p>而Rook项目，则会负责这些数据卷的生命周期管理、灾难备份等运维工作。关于这些容器持久化存储的知识，我会在后续章节中专门讲解。</p><p>这时候，你可能会有个疑问：为什么我要选择Rook项目呢？</p><p>其实，是因为这个项目很有前途。</p><p>如果你去研究一下Rook项目的实现，就会发现它巧妙地依赖了Kubernetes提供的编排能力，合理的使用了很多诸如Operator、CRD等重要的扩展特性（这些特性我都会在后面的文章中逐一讲解到）。这使得Rook项目，成为了目前社区中基于Kubernetes API构建的最完善也最成熟的容器存储插件。我相信，这样的发展路线，很快就会得到整个社区的推崇。</p><blockquote>
<p>备注：其实，在很多时候，大家说的所谓“云原生”，就是“Kubernetes原生”的意思。而像Rook、Istio这样的项目，正是贯彻这个思路的典范。在我们后面讲解了声明式API之后，相信你对这些项目的设计思想会有更深刻的体会。</p>
</blockquote><h2>总结</h2><p>在本篇文章中，我们完全从0开始，在Bare-metal环境下使用kubeadm工具部署了一个完整的Kubernetes集群：这个集群有一个Master节点和多个Worker节点；使用Weave作为容器网络插件；使用Rook作为容器持久化存储插件；使用Dashboard插件提供了可视化的Web界面。</p><p>这个集群，也将会是我进行后续讲解所依赖的集群环境，并且在后面的讲解中，我还会给它安装更多的插件，添加更多的新能力。</p><p>另外，这个集群的部署过程并不像传说中那么繁琐，这主要得益于：</p><ol>
<li>
<p>kubeadm项目大大简化了部署Kubernetes的准备工作，尤其是配置文件、证书、二进制文件的准备和制作，以及集群版本管理等操作，都被kubeadm接管了。</p>
</li>
<li>
<p>Kubernetes本身“一切皆容器”的设计思想，加上良好的可扩展机制，使得插件的部署非常简便。</p>
</li>
</ol><p>上述思想，也是开发和使用Kubernetes的重要指导思想，即：基于Kubernetes开展工作时，你一定要优先考虑这两个问题：</p><ol>
<li>
<p>我的工作是不是可以容器化？</p>
</li>
<li>
<p>我的工作是不是可以借助Kubernetes API和可扩展机制来完成？</p>
</li>
</ol><p>而一旦这项工作能够基于Kubernetes实现容器化，就很有可能像上面的部署过程一样，大幅简化原本复杂的运维工作。对于时间宝贵的技术人员来说，这个变化的重要性是不言而喻的。</p><h2>思考题</h2><ol>
<li>
<p>你是否使用其他工具部署过Kubernetes项目？经历如何？</p>
</li>
<li>
<p>你是否知道Kubernetes项目当前（v1.11）能够有效管理的集群规模是多少个节点？你在生产环境中希望部署或者正在部署的集群规模又是多少个节点呢？</p>
</li>
</ol><p>感谢你的收听，欢迎你给我留言，也欢迎分享给更多的朋友一起阅读。</p><p><img src="https://static001.geekbang.org/resource/image/47/55/47a6f3bf6b92d58512d5a2ed0a556f55.jpg" alt=""></p></div></div></div><div data-v-87ffcada="" class="article-comments"><h2 data-v-87ffcada=""><span data-v-87ffcada="">精选留言</span></h2><ul data-v-87ffcada="">            <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/39/bc/2764927e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">L</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>46</span></a></div>
	</div>
	<div class="bd">centos7 单机k8s终于在墙内搭好了，写了篇教程欢迎后来者直接享用<br>https:&#47;&#47;www.datayang.com&#47;article&#47;45</div> <span class="time">2018-10-05</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/7e/5c/62110137.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">bing</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>41</span></a></div>
	</div>
	<div class="bd">真的是写的最好的专栏</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c4/92/338b5609.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Roy Liang</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>25</span></a></div>
	</div>
	<div class="bd">kubeadm最新版本已经为1.12，看到上面很多人遇到提示版本不对，重新安装低版本就好了<br>apt remove kubelet kubectl kubeadm<br>apt install kubelet=1.11.3-00<br>apt install kubectl=1.11.3-00<br>apt install kubeadm=1.11.3-00</div> <span class="time">2018-09-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">对对对</p> <p class="reply-time">2018-09-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/98/bc/e22fcc1b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">龙哥</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>16</span></a></div>
	</div>
	<div class="bd">对于GFW，不能直接给kubeadm上代理，而是要让docker daemon翻，正确姿势参见：<br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;26550360&#47;docker-ubuntu-behind-proxy</div> <span class="time">2018-10-18</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/82/c5/52dfedb4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">柳旭</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>14</span></a></div>
	</div>
	<div class="bd">ubuntu 换成这个源<br>deb http:&#47;&#47;mirrors.ustc.edu.cn&#47;kubernetes&#47;apt kubernetes-xenial main</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/53/3d/370f0b05.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">W.T</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>10</span></a></div>
	</div>
	<div class="bd">老师您好！专网，不能访问互联网的情况下，离线部署kubernetes集群？有没有好的方法和建议？</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/9b/2f/b7a3625e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">LenX</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>8</span></a></div>
	</div>
	<div class="bd">老师，怎么让 Master 高可用，能给几个方案的关键词吗？我想根据关键词课后自己先研究一下。</div> <span class="time">2018-09-19</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/0e/17/0aa98ae7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">同心结</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>7</span></a></div>
	</div>
	<div class="bd">你好，照着你的教程，我在执行kubeadm init --config kubeadm.yaml， 提示：your configuration file uses an old API spec: &quot;kubeadm.k8s.io&#47;v1alpha1&quot;. Please use kubeadm v1.11 instead and run &#39;kubeadm config migrate --old-config old.yaml --new-config new.yaml&#39;, which will write the new, similar spec using a newer API version.<br>默认安装的kubeadm和kubelet版本是1.12<br></div> <span class="time">2018-09-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/9a/38/19e5547c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Jeremy</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>6</span></a></div>
	</div>
	<div class="bd">如果有人遇到：<br>[ERROR KubeletVersion]: the kubelet version is higher than the control plane version. This is not a supported version skew and may lead to a malfunctional cluster. Kubelet version: &quot;1.12.0-rc.1&quot; Control plane version: &quot;1.11.3&quot;<br>这个错误，使用：<br>apt-get install kubelet=1.11.3-00<br>就可以了，发出来希望对人有用。</div> <span class="time">2018-09-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/f3/6a/6d82e7a3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暮雨</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>6</span></a></div>
	</div>
	<div class="bd">没有外网的环境，安装这个有没什么好的方法，在阿里云上开了两台香港节点的主机</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/98/d9/e634ec30.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">我还是猴子</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>5</span></a></div>
	</div>
	<div class="bd">kubernetes 1.12.2&#47;docker-ce 18.09  <br><br><br>老师的文档是老版本的，看了留言很多 apiversion错误的需要调整老师给的kubeadm init 的kubeadm.yaml文件<br>老版本：<br>apiVersion: kubeadm.k8s.io&#47;v1alpha1<br>kind: MasterConfiguration<br>controllerManagerExtraArgs:<br>  horizontal-pod-autoscaler-use-rest-clients: &quot;true&quot;<br>  horizontal-pod-autoscaler-sync-period: &quot;10s&quot;<br>  node-monitor-grace-period: &quot;10s&quot;<br>apiServerExtraArgs:<br>  runtime-config: &quot;api&#47;all=true&quot;<br>kubernetesVersion: &quot;stable-1.11&quot;<br><br>新版本：<br>apiVersion: kubeadm.k8s.io&#47;v1alpha2<br>kind: MasterConfiguration<br>controllerManagerExtraArgs:<br>  horizontal-pod-autoscaler-use-rest-clients: &quot;true&quot;<br>  horizontal-pod-autoscaler-sync-period: &quot;10s&quot;<br>  node-monitor-grace-period: &quot;10s&quot;<br>apiServerExtraArgs:<br>  runtime-config: &quot;api&#47;all=true&quot;<br>kubernetesVersion: &quot;stable-1.12&quot;<br>需要注意<br>v1alpha2 will be removed in Kubernetes 1.13.  1.13启用v1alpha3  后续有同学也要注意</div> <span class="time">2018-11-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">包治结巴</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>5</span></a></div>
	</div>
	<div class="bd">张老师，请教一个问题，master部署完成后生成指令，比如“ kubeadm join 172.19.0.7:6443 --token xw4d6t.1dmpctojkcg9yqlf --discovery-token-ca-cert-hash sha256:45168e55ad19ac6126728e86c0a4c46e98c7df5d0312aec3fdd8d437dc24a3b9”，假如当时没有记下来，有什么命令可以再次让master生成这个指令吗？</div> <span class="time">2018-09-18</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以用kubeadm查看token</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9c/ec/15494ea3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Terry Hu</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">我也为大家提供一些comments:<br>Kubeadm的token 23小时后过期，所以如果你worker端和master 端不是在同一天做的，有可能会出现如下错误:<br>[kubelet] Downloading configuration for the kubelet from the &quot;kubelet-config-1.11&quot; ConfigMap in the kube-system namespace<br>Unauthorized<br><br>Stackoverflow上有这个解:<br>https:&#47;&#47;stackoverflow.com&#47;questions&#47;52823871&#47;unable-to-join-the-worker-node-to-k8-master-node<br><br>简单来说，在master 上重新kubeadm token create一下，替换原来的token 就好了<br><br>另外，如果出现<br>[preflight] Some fatal errors occurred:<br>        [ERROR FileAvailable--etc-kubernetes-pki-ca.crt]: &#47;etc&#47;kubernetes&#47;pki&#47;ca.crt already exists<br>        [ERROR FileAvailable--etc-kubernetes-bootstrap-kubelet.conf]: &#47;etc&#47;kubernetes&#47;bootstrap-kubelet.conf already exists<br>[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`<br><br>把那2个文件mv挪走就好了</div> <span class="time">2018-11-01</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/98/b1/7eeeb576.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Casper</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">在执行kubeadm init config kubeadm.yaml时报如下错误：<br>your configuration file uses an old API spec: &quot;kubeadm.k8s.io&#47;v1alpha1&quot;. Please use kubeadm v1.11 instead and run &#39;kubeadm config migrate --old-config old.yaml --new-config new.yaml&#39;, which will write the new, similar spec using a newer API version.<br><br>kubedadm的版本信息是:<br>kubeadm version: &amp;version.Info{Major:&quot;1&quot;, Minor:&quot;12&quot;, GitVersion:&quot;v1.12.0&quot;, GitCommit:&quot;0ed33881dc4355495f623c6f22e7dd0b7632b7c0&quot;, GitTreeState:&quot;clean&quot;, BuildDate:&quot;2018-09-27T17:02:38Z&quot;, GoVersion:&quot;go1.10.4&quot;, Compiler:&quot;gc&quot;, Platform:&quot;linux&#47;amd64&quot;}<br>系统环境是：ubuntu server 16.04<br><br>在google也搜索了，没有找到解决方法。麻烦老师解答一下解决方法。<br>今后在遇到类似的问题时，应该如何解决呢，希望张老师能提供一个解决问题的思路。或者是如何才能查看不同版本的kubernetes的参数的差异变化。<br>谢谢张老师~</div> <span class="time">2018-09-28</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">呃，提示都说了让你装kubeadm 1.11然后执行格式转换呢……为啥不操作呢</p> <p class="reply-time">2018-09-28</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">陈华</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">我去，今天才部署完成，对于小白来说还是挺困难的。<br>这一节应该卡住了很多人吧。<br>加油！！！，</div> <span class="time">2018-09-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/66/c4/038f9325.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Jeff.W</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">这一节的开始配图很好，预示着需要跨越障碍，除了公司代理还有Great Wall，阻碍了我前进的步伐。。。</div> <span class="time">2018-09-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/72/3e/534db55d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">huan</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">分享一下这篇实践的小插曲，我是使用DigitalOcean的机器做的，没有墙的问题。<br>在使用weave-net的时候，怎么都通不过，报错是 weave-net的状态是 CrashLoopBackOff，看了container的log，也不懂啥意思，找了下k8s的troubleshoot页面的说明 （https:&#47;&#47;kubernetes.io&#47;docs&#47;setup&#47;independent&#47;troubleshooting-kubeadm&#47;#pods-in-runcontainererror-crashloopbackoff-or-error-state），说是版本问题，不知道怎么解决。<br>然后随便找了另一个实现 Romana，替换weavenet<br>`kubectl apply -f https:&#47;&#47;raw.githubusercontent.com&#47;romana&#47;romana&#47;master&#47;containerize&#47;specs&#47;romana-kubeadm.yml` 终于成功了，然后体验到了以前想都不敢想的Ceph，超赞</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">rook.io真的是个好东西</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Xiye</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">1. 使用过Minikube在自己本机装过K8S，步骤很简单。这个应该比较适合开发使用，不用花太多时间在部署上，但是因为是SingleNode，肯定是不能用于生产。<br>2. 网上查了官方，支持最多5000节点规模的集群。目前我们项目用得3个Master，3个Work Node。</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/ff/e7/7eda8d7e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">选择</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">你好，照着你的教程，我在执行kubeadm init --config kubeadm.yaml， 提示：your configuration file uses an old API spec: &quot;kubeadm.k8s.io&#47;v1alpha1&quot;. Please use kubeadm v1.11 instead and run &#39;kubeadm config migrate --old-config old.yaml --new-config new.yaml&#39;, which will write the new, similar spec using a newer API version.用全新的虚拟机安装的 该怎么解决呢？ 谢谢了</div> <span class="time">2018-09-26</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">解决方法你自己都贴出来了……</p> <p class="reply-time">2018-09-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/09/42/b7a406c9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Hurt</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">老师 我一直想问 这个集群 是在一台服务器上吗 还是多台啊</div> <span class="time">2018-09-21</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你执行了多少个kubeadm join，就有多少个工作节点</p> <p class="reply-time">2018-09-21</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/a9/2e/01b2839e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">巩夫建</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">二进制部署，目前是1.11.3版本。测试环境大约50台。遇到问题是calico与ipvs知识点不足。<br>部署趟了不少坑都过来了，感觉kubernetes不管理网络开放cni这种，提升不少门槛。此外由于文件系统的问题，之前说work节点不能用pod部署，不知道现在解决了吗？</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">还不行，而且也没人太愿意试</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/4e/60/be4992fd.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">gogo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">还有个问题，现在rook ceph版本还是beta，不能用于生产环境吧？</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">对，这个也没有GA，但是也很快了。</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/96/7c/b1e6ea51.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">心情不错</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">以后是不是开发负责部署单个docker， 运维负责宏观kubernetes?</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">开发负责docker和一部分yaml文件，下一篇会讲一个流程</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJjzTQ6HPGw2LWLiaiciaibfdMMlmxEwBkBjxOPxeYynZlBKCf6U1b0ezM9IZYibB6yKR7HpRuAOdtj29Q/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">bat2man</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">版本变化太快了,按照老师一样环境的话,可以这样(cenots 7.4):<br><br>yum install -y https:&#47;&#47;mirrors.aliyun.com&#47;docker-ce&#47;linux&#47;centos&#47;7&#47;x86_64&#47;stable&#47;Packages&#47;docker-ce-selinux-17.03.0.ce-1.el7.centos.noarch.rpm<br>yum -y install docker-ce-17.03.0.ce <br>yum -y install kubelet-1.11.1 kubeadm-1.11.1  kubectl-1.11.1 kubernetes-cni</div> <span class="time">2018-12-24</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/f1/15/70af5d9e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">William</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">遇到kubeadm不支持docker ce 18.09, 只好版本回退。https:&#47;&#47;github.com&#47;kubernetes&#47;minikube&#47;issues&#47;3323<br><br>```<br>&#47;&#47;卸载新版本docker<br>$ sudo apt-get purge docker-ce<br>$ sudo rm -rf &#47;var&#47;lib&#47;docker<br>&#47;&#47;安装旧版本docker<br>$ sudo apt-get install -y docker.io<br>```</div> <span class="time">2018-12-22</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/24/7c/b76ad65d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">每一段路都是一种领悟</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">老师。对于centos的overlay2存储引擎，怎么查看rootfs啊</div> <span class="time">2018-11-13</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9c/ec/15494ea3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Terry Hu</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">其实关于<br>root@kube-worker1:~# kubectl get pods<br>The connection to the server localhost:8080 was refused - did you specify the right host or port?<br>还有一个问题，我这是在worker节点上无法get pods，当然我知道是由于.kube&#47;config文件在worker 节点上不存在，查看journalctl -l -u kubelet也能得到相同的信息，于是我把kube-master上的文件scp到worker上，就成功了，但我的问题是:这样做合适么？为什么kubeadm join的时候不在worker节点上生成安全配置文件？我这样做实际上和在master上权限相同，有潜在安全隐患，如何配置专属每个node自身的安全配置文件？比如我在worker1上只能get到它自己的pod，看不到其他的pod</div> <span class="time">2018-11-05</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/98/b1/7eeeb576.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Casper</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">root@kubernetes01:~# kubectl get pods -n rook-ceph-system<br>NAME                                  READY     STATUS    RESTARTS   AGE<br>rook-ceph-operator-78d498c68c-t2b7w   0&#47;1       Pending   0          21m<br><br>如何查看这个容器为什么一直是pending状态</div> <span class="time">2018-09-26</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">调度失败，看events</p> <p class="reply-time">2018-09-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/db/7d/1fbad49b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">John</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">非常强的挫败感。第一，打败墙，花了几天。然后，应用了网络插件，但是仍然是 not ready，提示还是 network plugin  is not ready cni config uninitiated。请问怎么看日志呢？</div> <span class="time">2018-09-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">journalctl -l -u kubelet </p> <p class="reply-time">2018-09-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/93/61/3e4607c7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Gao</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">为什么不解释一些常见的问题呢？第一次部哪有那么顺啊</div> <span class="time">2018-09-22</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">kubeadm存在的意义就是要让你第一次部署就这么顺，要不然这个项目就太失败了。至于GFW的问题，肯定要自己想办法解决。</p> <p class="reply-time">2018-09-22</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/66/c4/038f9325.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Jeff.W</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">网络受限的话觉得可以参考一下这个，使用Ansible脚本安装K8S集群，介绍组件交互原理，方便直接，不受国内网络环境影响 https:&#47;&#47;github.com&#47;gjmzj&#47;kubeasz。机器资源有限就弄个AllInOne？或者单主多从？老师怎么看？</div> <span class="time">2018-09-20</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">Ansible等工具适合部署大规模集群，做实验环境得不偿失，不建议分散精力。</p> <p class="reply-time">2018-09-20</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/96/63/64f62020.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">or0or1</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">为什么不搭建ingress？这个作为应用入口，也很重要吧？</div> <span class="time">2018-09-18</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">因为ingress后面会专门讲</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/db/7d/1fbad49b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">John</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">不翻墙 有办法装 kubeadm 吗？</div> <span class="time">2018-09-18</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以离线下好</p> <p class="reply-time">2018-09-19</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/93/c7/1640226d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">刘欣洲</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">Rook 能够直接支持Google 的 GCP的persistent disk 吗？该如何实现呢？</div> <span class="time">2018-09-18</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">都有gcp了还搞rook干啥，这些cloud都已经给kubernetes做了存储支持了</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/13/34/abb7bfe3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">小鱼儿</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">老师，请问你的“-”是怎么读的？</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">dash</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/96/89/9312b3a2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Vincen</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">为什么前一篇文章说kubeadm不能用于生产环境？ 如果将etcd集群单独部署呢？</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">跟etcd没关系，master也高可用啊</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83ercmNryEicqDS73icpUu7W0BnZ7ZIia6jR7kdVMIzH0q1d7L8EKAYWeTJcribibGcHnJzpsjRFxAe26egQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">pytimer</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">使用过ansible和纯二进制文件部署集群，证书之类的比较麻烦，而且添加节点我不方便。<br>现在Kubernetes集群官方最大节点是5000吧，我自己的环境的话就6个节点。<br><br>老师，想要问下，我现在使用kubeadm来部署生产环境的高可用可以吗？有什么风险吗？<br>另外，在使用kubeadm join添加节点的时候，token过期怎么处理？我现在都是设置ttl=0，但是感觉这种不太好</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">小规模生产环境没问题。需要执行kubeadm upgrade</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/e6/ae/83bc09b1.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">孙仲谋</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">kubelet 更新到v1.13 即 v1&#47;1alpha3后需要修改kind 值为 InitConfiguration</div> <span class="time">2019-01-09</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/1c/70/788e6dac.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Q_小_D</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">想着半天弄完的，结果前前后后折腾了1天半，主要卡在的基本上都是网络的问题。<br>先说结论：最后我的virtualbox上的创建了两个桥接网卡的虚机，完成了k8s集群的搭建。<br>再说问题：<br>1、获取不到gcr.io上的镜像，我参考了留言和https:&#47;&#47;blog.csdn.net&#47;nklinsirui&#47;article&#47;details&#47;80581286解决了。<br>2、卡在多网卡的问题上。<br>2.1、我的环境是virtual box上虚拟的两个ubuntu，网络设置为nat+host only，集群搭建好之后，死活无法启动dashboard、ceph的容器（好多老外也是这么弄的啊），各种查各种试，也没解决问题。在kubernetes的官网上只说了“If you have more than one network adapter, and your Kubernetes components are not reachable on the default route, we recommend you add IP route(s) so Kubernetes cluster addresses go via the appropriate adapter.”。哪位大神按照这种方式弄好的清指点下，很是困惑啊啊啊啊，谁能解救我下………………<br>2.2、放弃了2.1的nat+host only，改为了桥接的网络方式，只保留一个network interface，成功。</div> <span class="time">2019-01-06</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/24/d2/40353046.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">zeroxus</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">使用配置文件，如果版本不一致，可以用`kubeadm config print init-defaults`查看本机上装的kubeadm的默认支持的配置，比如kubeadm v.1.13，它的apiVersion是kubeadm.k8s.io&#47;v1beta1，kubernetesVersion: v1.13.0</div> <span class="time">2018-12-07</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/ac/c8/4b1c0d40.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">勤劳的小胖子-libo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">终于成功搭建好了。花了半天工夫，动手实操一翻才会有所收获。<br>基于vagrant: ubuntu + flannel. <br>使用flannel参考https:&#47;&#47;kubernetes.io&#47;docs&#47;setup&#47;independent&#47;create-cluster-kubeadm&#47;#pod-network ， 要加上--pod-network-cidr=10.244.0.0&#47;16<br></div> <span class="time">2018-11-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/57/4e/fe8d3346.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">慕一</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">kubeadm init --config kubeadm.yaml ，报错，信息为，no kind MasterConfiguration is registered for version kubeadm.k8s.io&#47;v1.12.2 in scheme.......，求解答</div> <span class="time">2018-10-28</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/89/ba/e1d6ce24.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">jimmy</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">kubeadm 安装的master节点，是虚拟机节点，重启后，如何再次启动master的各个组件<br></div> <span class="time">2018-10-25</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/10/bb/d57136c3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">DemonLee</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">部署完master节点，再部署一个worker节点，可以在一个pc上吗，还是需要多个pc</div> <span class="time">2018-10-06</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">单节点只有master就够了</p> <p class="reply-time">2018-10-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">在路上</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">参考老师的讲解和网上的一些内容，自己整理的搭建k8s集群脚本，如需要，请自行下载使用，脚本仅供参考<br>https:&#47;&#47;download.csdn.net&#47;download&#47;hxd198&#47;10698951</div> <span class="time">2018-10-01</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/b0/1c/2e30eeb8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">旺旺</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">[ERROR Swap]: running with swap on is not supported. Please disable swap<br>出现这种错误的，需要你把swap给关掉，就可以了。</div> <span class="time">2018-09-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/b8/7c/dc6c1242.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">星尘_StarDust</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">docker.io? 这个是老版本的docker安装方式吧</div> <span class="time">2018-09-27</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不是已经说明了？故意不要最新的。</p> <p class="reply-time">2018-09-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/d2/2f/bce28fc8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">龙坤</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">root@master:~# kubectl get node<br>NAME      STATUS     ROLES     AGE       VERSION<br>master    Ready         master    1h        v1.11.3<br>worker1   Ready       &lt;none&gt;    37m       v1.11.3<br>worker2   Ready       &lt;none&gt;    31m       v1.11.3<br><br>所有pod都成功启动了。但是worker节点的ROLES为&lt;none&gt;，正常吗？</div> <span class="time">2018-09-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">正常</p> <p class="reply-time">2018-09-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/b1/cd/30b8a0f8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">王旭</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">你好 我问下这整个环境的安装是不是只能翻墙了 才行.谢谢</div> <span class="time">2018-09-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">注意敏感词</p> <p class="reply-time">2018-09-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/0e/17/0aa98ae7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">同心结</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">你好，我搭好了节点重启之后服务没起来，我怎么让服务跑起来呀</div> <span class="time">2018-09-24</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">学习一下systemd </p> <p class="reply-time">2018-09-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/39/bc/2764927e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">L</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，node1 这个节点在什么时候建的啊，我执行的时候直接<br>Error from server (NotFound): nodes &quot;node1&quot; not found</div> <span class="time">2018-09-23</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">用你自己的node名字啊</p> <p class="reply-time">2018-09-23</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">在路上</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，部署worker节点，和master是不在同一台机器吗？同一台不行吗？用自己的笔记本，集群master是部署在virtualbox的ubuntu上的，那这些worker要怎么弄呢？</div> <span class="time">2018-09-22</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">那只能单节点</p> <p class="reply-time">2018-09-23</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">陈华</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">Flannel、Calico、Canal、Romana请问老师这些和 Istio （http:&#47;&#47;www.infoq.com&#47;cn&#47;news&#47;2017&#47;05&#47;istio<br>）是一个类型的东西吗，</div> <span class="time">2018-09-21</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不是。</p> <p class="reply-time">2018-09-21</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/f7/b1/b05a2156.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">we</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师 生产环境的部署方法。能讲一讲吗？或者推荐一下相关文档啊。</div> <span class="time">2018-09-21</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">搜kubeadm high available ，就是第一版高可用部署的文档，不过还没有GA</p> <p class="reply-time">2018-09-21</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/f7/11/6d50e385.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Bain</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">你好，我现在遇到一个问题。部署集群的时候用的是内网IP，但是我想用公网IP访问搭好的集群里的built in services，比如heapster，但是kubectl cluster-info之后发现proxy都是的bind ip是内网IP，有没有办法改掉这个bind ip？</div> <span class="time">2018-09-20</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">ingress</p> <p class="reply-time">2018-09-20</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/72/4c/4d636a23.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">在路上</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">root@ubuntu-vitualbox:~# kubeadm init --config kubeadm.yaml --ignore-preflight-errors &#39;Swap&#39;<br>[init] using Kubernetes version: v1.11.3<br>[preflight] running pre-flight checks<br>	[WARNING Swap]: running with swap on is not supported. Please disable swap<br>I0919 22:29:26.503206   22490 kernel_validator.go:81] Validating kernel version<br>I0919 22:29:26.504039   22490 kernel_validator.go:96] Validating kernel config<br>[preflight&#47;images] Pulling images required for setting up a Kubernetes cluster<br>[preflight&#47;images] This might take a minute or two, depending on the speed of your internet connection<br>[preflight&#47;images] You can also perform this action in beforehand using &#39;kubeadm config images pull&#39;<br>[preflight] Some fatal errors occurred:<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;kube-apiserver-amd64:v1.11.3]: exit status 1<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;kube-controller-manager-amd64:v1.11.3]: exit status 1<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;kube-scheduler-amd64:v1.11.3]: exit status 1<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;kube-proxy-amd64:v1.11.3]: exit status 1<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;pause:3.1]: exit status 1<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;etcd-amd64:3.2.18]: exit status 1<br>	[ERROR ImagePull]: failed to pull image [k8s.gcr.io&#47;coredns:1.1.3]: exit status 1<br>[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`<br><br>老师，这里报的错误，要怎么解决？为什么拉取不了k8s的镜像？</div> <span class="time">2018-09-19</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/a9/86/8211935c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Vincent</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">不能科学上网好像就部署不了啊，老师~~</div> <span class="time">2018-09-19</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">那就科学一下……</p> <p class="reply-time">2018-09-19</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/03/10/26f9f762.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Switch</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">使用kubernetesVersion: &quot;stable-1.11&quot;报错&quot;unable to get URL &quot;https:&#47;&#47;dl.k8s.io&#47;release&#47;stable-1.11.1.txt&quot;: Get https:&#47;&#47;storage.googleapis.com&#47;kubernetes-release&#47;release&#47;stable-1.11.1.txt: dial tcp 172.217.161.144:443: i&#47;o timeout&quot;，使用版本&quot;v1.11.1&quot;没问题，建议更改版本号</div> <span class="time">2018-09-18</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">这是gfw吧</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">jssfy</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">1. rook 目前只提供cepg支持？<br>2. 如果我集群中每台机器都已经挂载nfs，那么nfs存储插件对我来说是否就没有必要了？<br>3. 目前的公有云是否有采用k8s方案？如果有，不同用户的pod如果调度到同一台物理机上，是否会有隔离问题，如之前一节有类似提到，还是有些隔离问题存在的？<br>4. 部署k8s到公有云或者私有云，会分别建议部署在虚拟机或者裸金属机上吗？<br>多谢多谢！</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">其他支持已经陆续添加了。有必要，因为要用PVC PV。隔离问题非常大。公有云上只能虚拟机。</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">余小坝</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">常用ansible部署kubernetes集群，感觉也挺快的。<br><br>老师，请问如果master节点的网段是：192.168.……，新的节点的网段是172.18.……，那这个节点能否加入到master的集群中啊？要如何做呢</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">多网卡能通就行，注意端口监听的是哪个网卡</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/4f/78/c3d8ecb0.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">undifined</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师 像阿里云 AWS GCP 这些平台的一键部署是用什么实现的呢</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">自己编写的运维脚本，相当复杂，必须专门团队维护</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/18/34/c082419c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">风轨</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">最近一次部署成功kubernetes是:<br>1. VPN确保网络畅通;<br>2. 安装最新版docker;<br>3. 在设置页面勾上kubernetes功能;<br>4. 等待足够长的时间;<br>win10环境。<br><br>之前试了minikube，CoreOS都没有成功，看了今天的文章似乎知道我CoreOS部署方式为啥失败了，找时间再试试~</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/f3/2d/4b7f12b6.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">死后的天空</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师最近遇到一个问题，由于我在集群中部署了不少数据库，当有大量的读写的时候宿主机的buff&#47;cache上升很快，会几倍于应用占用的内存，遇到这类情况，该怎么处理呢，Kubernetes有没有类似的缓存释放机制。</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">这个得手动运维了</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/02/29/a2ecb1b5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">13042162180</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">centos上安装与Ubuntu上安装差别是不是挺大的</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不会啊</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/4e/60/be4992fd.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">gogo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，pod挂载rook ceph存储之后，要怎么查看挂载的内容呢</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">exec进去</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/94/47/75875257.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">虎虎❤️</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">我们用bosh部署的CFCR，配置文件写好之后，也能做到一键部署。<br><br>我有几个问题<br>1. 用rook部署ceph cluster，数据的路径只能选择在node上的dataDirHostPath吗？如果我想有几台专用的storage server，组成cluster应该怎么做？我能想到的是把这几台server加入k8s cluster，然后用label&#47;node affinity 把ceph pod调度到这几个专用节点？<br>2. 我看到NFS cluster的 exports.persistentVolumeClaim 参数可以是any pvc allowed。但是我看了一下nfs的controller是创建了一个sts。如果使用的pvc是不支持readwritemany，比如host path 或者我正在用的vsphere storage。那么sts的replica设置成大于1的话，可能会创建不成功吧，除非pod都调度到同一个node上。<br></div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">1.对 2.存储的时候讲</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/4e/60/be4992fd.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">gogo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师您好， 请教一下，springboot项目避暑在k8s中 项目的日志要怎么处理呢 要使用pv吗</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">是的</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/97/2c/28f11cd9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">岁月～静好</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">一定要操作试试，要不翻篇就忘了，鱼的记忆😂</div> <span class="time">2018-09-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/f5/2a/74d1da42.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Jim</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">存储插件是在单独一台机器上安装吗？那两个命令是否也应该支持分布式？存储设备都隐藏了，如何指定呢？<br><br>网络插件应该只在Master上安装吧？</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">都是些yaml文件，命令行执行即可</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9a/ba/0267ad58.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">咕噜男爵</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">目前生产二十多个节点，k8s能有效管理的节点还没注意到这个知识点。开始接触容器用的比较多的是rancher ，使用rancher 自己的编排工具cattle ，用着还不错。确如老师所讲rancher 确实把很多细节都封装了。</div> <span class="time">2018-09-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">5000</p> <p class="reply-time">2018-09-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/55/44/1e8e9ec2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">樊金辉</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">https:&#47;&#47;raw.githubusercontent.com&#47;kubernetes&#47;dashboard&#47;master&#47;src&#47;deploy&#47;recommended&#47;kubernetes-dashboard.yaml 已不可用。<br>用https:&#47;&#47;raw.githubusercontent.com&#47;kubernetes&#47;dashboard&#47;master&#47;aio&#47;deploy&#47;recommended&#47;kubernetes-dashboard.yaml替代，一切正常</div> <span class="time">2019-02-06</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/HADZgeqSxRPnv7HMHu61QsyeEFUDPoVQx0ZEmAI3zwv8OT5NbfSB6ImcM2cXybPgIStqK96Yn7P6tdAmciaVKUg/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_c8eabe</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">mac os怎么装kubeadm？</div> <span class="time">2019-02-01</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/c1/f0/2b4fe55f.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Walt365</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">这个链接已经失效https:&#47;&#47;raw.githubusercontent.com&#47;kubernetes&#47;dashboard&#47;master&#47;src&#47;deploy&#47;recommended&#47;kubernetes-dashboard.yaml<br></div> <span class="time">2019-01-29</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/61/c5/5be5bb1a.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">行癫-BLCloud</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kubeadm部署kubernetes的集群是不是在生产环境中使用？  在生产环境中使用什么方式部署最好呢？张老师</div> <span class="time">2019-01-23</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">knull</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">rook-ceph安装cluster失败，用get pods -n rook-ceph显示如下：<br>NAME                               READY     STATUS                  RESTARTS   AGE<br>rook-ceph-mon-a-65f66475b4-9qcrm   0&#47;1       Pending                 0          20m<br>rook-ceph-mon-d-85bf66f6b5-52d2x   0&#47;1       Pending                 0          19m<br>rook-ceph-mon-f-8558898c44-m9rhz   0&#47;1       Init:CrashLoopBackOff   8          17m<br>但是，用kubectl logs rook-ceph-mon-f-8558898c44-m9rhz 会报错：pods not found。<br>请教：1、这种问题怎么定位、解决？2、get pods明明是存在的，为啥在logs中有显示pods not found？</div> <span class="time">2019-01-21</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/ec/1c/d323b066.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">knull</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">这里补充一个kubernetes-dashboard：<br>这个docker镜像是需要翻墙的。这里可以将镜像源稍微设置下，<br>docker pull anjia0532&#47;google-containers.kubernetes-dashboard-amd64:v1.10.0<br>docker tag  anjia0532&#47;google-containers.kubernetes-dashboard-amd64:v1.10.0   k8s.gcr.io&#47;kubernetes-dashboard-amd64:v1.10.0<br>docker rmi  anjia0532&#47;google-containers.kubernetes-dashboard-amd64:v1.10.0 <br><br>然后，用wget将https:&#47;&#47;raw.githubusercontent.com&#47;kubernetes&#47;dashboard&#47;v1.10.1&#47;src&#47;deploy&#47;recommended&#47;kubernetes-dashboard.yaml拉到本地。将dashboard的image的版本改为v1.10.0 。<br>最后用kubectl apply -f kubernetes-dashboard.yaml就可以启动成功了。<br>问题描述：<br>一般情况下，直接执行apply之后，status是ContainerCreating。在过一段时间之后，status变为ImagePullBackOff。<br>我猜测：是进行中状态，就是creating。镜像pull失败，就转为失败。所以这里需要重新设置下镜像源<br></div> <span class="time">2019-01-21</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/aa/40/abb7bfe3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">德古拉</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">为什么Kubernetes可以管理的节点有瓶颈呢？问题出在什么地方呢？求指点</div> <span class="time">2019-01-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">etcd到control panel上的问题居多</p> <p class="reply-time">2019-01-21</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/d9/47/86872313.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">holen</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师 代理是怎么弄的，我的 ubuntu 上已经有代理了， 测试可以翻了，但是执行 kubeadm init --config kubeadm.yaml 的时候，还是会报 unable to get URL &quot;https:&#47;&#47;dl.k8s.io&#47;release&#47;stable-1.11.txt&quot;: Get https:&#47;&#47;dl.k8s.io&#47;release&#47;stable-1.11.txt: proxyconnect tcp: net&#47;http: TLS handshake timeout 走不出去，docker 也设置了代理了， 服务器也有，就是不明白为什么还是过不去！</div> <span class="time">2019-01-16</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/98/df/c88a4306.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">陈先生。</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">内网同学，写了一篇二进制部署文档，大家可以参考一下。https:&#47;&#47;www.jianshu.com&#47;p&#47;dab89bddd748</div> <span class="time">2019-01-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9e/77/f9f1b47d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Jax</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">1.13版本的kubeadm.yaml应该这么写，大家可以尝试下，我也是卡在这里稍微折腾了一下~<br>apiVersion: kubeadm.k8s.io&#47;v1beta1<br>kind: InitConfiguration<br>controllerManager:<br>  horizontal-pod-autoscaler-use-rest-clients: &quot;true&quot;<br>  horizontal-pod-autoscaler-sync-period: &quot;10s&quot;<br>  node-monitor-grace-period: &quot;10s&quot;<br>apiServer:<br>  runtime-config: &quot;api&#47;all=true&quot;<br>kubernetesVersion: &quot;v1.13.0&quot;</div> <span class="time">2019-01-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">nie</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">[root@k8s-m1 ~]# kubectl get nodes<br>NAME     STATUS     ROLES    AGE     VERSION<br>k8s-m1   Ready      master   9m13s   v1.13.1<br>k8s-m2   NotReady   &lt;none&gt;   5m37s   v1.13.1<br>老师你好，k8s-m2工作节点上kubeadm join后，还是NotReady状态，runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized，请问还需要做什么操作才能使k8s-m2状态为Ready？</div> <span class="time">2019-01-08</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/32/0b/81ae214b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">凌</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">浏览器导入证书访问dashboard成功，但是进去后提示forbidden错误啥也看不到</div> <span class="time">2019-01-06</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">小猪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我如果想安装kubeadm最新版本1.13，那么如何设置kubeadm.yaml的apiVersion配置项呢？</div> <span class="time">2019-01-03</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/8a/51/91efec48.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">左弈</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">无需翻墙，使用kubeadm和vagrnat部署可用于研发、测试、学习等用途的非生产环境Kubernetes集群, 支持Windows和Linux系统. 支持版本v1.10.2，还没时间升级到最新版本。欢迎拍砖。<br>https:&#47;&#47;github.com&#47;xuwenbao&#47;kubeadm-vagrant</div> <span class="time">2019-01-02</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">小猪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">如果做整套微服务的运行，是否使用k8s就可以了呢？</div> <span class="time">2019-01-02</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/02/59/c4e5f048.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">张飞洪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请问你通常用什么软件翻墙？是免费的还是收费的？</div> <span class="time">2018-12-28</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/e02A8tGW0yw86v11TrfaydPegHRDMyq4OL1iauZia7MVV9ibSNANibibVZTjP1GviacnNWhEzHvJuXUX09bdTiaGraUOQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">pain</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我集群搭建起来了，状态都是正常的。但就是无法在主节点上面查看运行在非主节点上面的日志，也无法 exec 进入。。。如果按照老师提供的那个步骤，都会碰到吧</div> <span class="time">2018-12-28</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/e3/5f/49276cd3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">龙须面</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我是用二进制手工安装的 了，按照网上的教程，在安装完kubelet后，node节点 kubectl get nodes报错the connection to server localhost：8080 was refused did you specify the right host or port？日志里也有连不到apiserver的报错，没有配置认证。master get node只能看到自己，折腾了好久，也不知道从何排查，能否给一些思路</div> <span class="time">2018-12-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/b9/99/ef60d90f.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">浅行</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">关于镜像获取，可以将docker hub和github关联起来，自定义构建dockerfile，gfw也不能阻挡你获取镜像😲。</div> <span class="time">2018-12-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/55/db/9fd0a48d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">C.R7</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">在部署可视化插件时候遇到一个问题，<br>[root@localhost 11]# kubectl get pods -n kube-system<br>NAME                                            READY     STATUS             RESTARTS   AGE<br>coredns-78fcdf6894-fxrw9                        1&#47;1       Running            0          7h<br>coredns-78fcdf6894-wqlgx                        1&#47;1       Running            1          7h<br>etcd-localhost.localdomain                      1&#47;1       Running            0          7h<br>kube-apiserver-localhost.localdomain            1&#47;1       Running            1          7h<br>kube-controller-manager-localhost.localdomain   1&#47;1       Running            0          7h<br>kube-proxy-t2rcc                                1&#47;1       Running            0          7h<br>kube-scheduler-localhost.localdomain            1&#47;1       Running            0          7h<br>kubernetes-dashboard-6c89fd7ddb-w75qq           0&#47;1       CrashLoopBackOff   1          7s<br>weave-net-kkjsn                                 2&#47;2       Running            0          6h<br><br>执行完命令后，有一个pod的出于异常状态，就想把他删除，所以执行了<br>kubectl get pods -n kube-system |grep CrashLoopBackOff | awk &#39;{print $1}&#39;|xargs kubectl delete pod  -n kube-system<br>然后删除之后，再次查询发现自动生成了一个kubernetes-dashboard-....的pod，状态也是出于异常，<br>这种情况，能讲解一下吗</div> <span class="time">2018-12-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/55/db/9fd0a48d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">C.R7</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">https:&#47;&#47;raw.githubusercontent.com&#47;kubernetes&#47;dashboard&#47;master&#47;src&#47;deploy&#47;recommended&#47;kubernetes-dashboard.yaml<br>这个网址是不能用了吗？<br></div> <span class="time">2018-12-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/e02A8tGW0yw86v11TrfaydPegHRDMyq4OL1iauZia7MVV9ibSNANibibVZTjP1GviacnNWhEzHvJuXUX09bdTiaGraUOQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">pain</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">使用 kubeadm join 的时候，一直加不进去！6443 端口连不同，但是我已经把防火墙关了，master 上面页起来了。。。</div> <span class="time">2018-12-25</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJliccnbz1dbH9xEyNod6ue5nHpen4nJgib2DEXiclMX4laSXjQaOwed5aKP65VQFWXccUafljZNrkEA/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">JadeG</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">error logs in k8s_kube-apiserver: <br>open &#47;etc&#47;kubernetes&#47;pki&#47;apiserver.crt: permission denied<br><br>pls do &quot;setenforce 0&quot; </div> <span class="time">2018-12-18</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/0FI2bUjegtznv7XPC9DB9RJaqiaMiamWkibibPOibuUC3DCvI7XMvBANr6sDjRNbc1jwPic9pIaFxrdaib88VqUJKXSTQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Chenl07</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我的node节点是多IP的，一个网卡上绑定了多个IP，其中有个node在使用describe node命令中查看到的IP跟masterIP不在一个网段，所有很多地方会报错。<br>有办法强行指定node使用某个IP么？<br><br>Addresses:<br>  InternalIP:  192.168.3.13<br>  Hostname:    node2<br>Capacity:<br> cpu:                2<br> ephemeral-storage:  38770180Ki</div> <span class="time">2018-12-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">LiBin</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">这个部署可以用于企业生产环境吗？听说企业都是用二进制文件的方式部署k8s集群，还有一系列的证书。</div> <span class="time">2018-12-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/ce/8f/6daf02db.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">心灵捕手</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，第一行说，bash:yum-key: command not found啥原因</div> <span class="time">2018-12-13</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/52/73/5aed1da6.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">平方</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd"> 污点那有点不懂，文中写的是为了让master可以运行POD，在pod的。yaml文件里加入了foo的键就行，但是foo不是加在node1上的么，想要让master可以运行POD，在pod的。yaml文件不是应该加入node-role.kubernetes.io&#47;master的键么<br></div> <span class="time">2018-12-12</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/08/bd/a2a70bdc.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">锋</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">非常感谢张磊老师的分享，目前个人想用几台闲置的机器搭建一个实验性质的深度学习平台，张磊老师有这方面的资源分享吗</div> <span class="time">2018-12-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/7d/69/21b4b5cb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">王由华</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">仔细浏览了下评论，不明白其中的  pv，pvc 是什么单词、意思？</div> <span class="time">2018-12-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/bb/f6/af833125.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Vinsec</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">Node节点在 kubeadm join ... 之后<br>运行 kubectl get nodes 等kubectl命令之后会报错：<br>【The connection to the server localhost:8080 was refused - did you specify the right host or port?】<br><br>同Master节点类似，我也将&#47;etc&#47;kubernetes下的kubelet.conf 复制到 ~&#47;.kube&#47;config 下。<br><br>再次运行 kubectl get nodes则正常显示。<br><br>那么请问要能使得kubectl能够有权限访问集群，是否只需要在~&#47;.kube&#47;config 中手动写入[certificate-authority-data]就可以。即对于kubectl 访问权限真正有效的，是不是就是&#47;etc&#47;kubernetes&#47;*.config 任一config文件中的[certificate-authority-data]字段</div> <span class="time">2018-12-09</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/43/c4/3739e0a6.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">木白</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">你好老师，我得worker节点在join后总是notready得状态，请问是为什么</div> <span class="time">2018-12-06</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">盖盖</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">k8s集群怎么指定外部的etcd集群</div> <span class="time">2018-12-05</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/b7/81/ac11be3b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">海</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">刚接触k8s的新手的话还是用二进制安装集群的好，这样能很好理解和熟悉k8s的架构。</div> <span class="time">2018-12-04</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTI3jUBQJMfLRQiaKpghicMot32AE70icSn1EsP7vX9t1V2qkp5oM0uXtnp5qmWlZgnXKk2mac0XdgVUQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">王天神</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">很多人还不能访问外网，能分享下怎么有限网络 部署？</div> <span class="time">2018-12-04</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/0a/50/97aaa1cd.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Zzde丶</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">如果我需要更改其中一个的节点名字，该如何操作</div> <span class="time">2018-12-03</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">豆沙包</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，master节点上生成的kubelet.conf里certificate-authority-data对应的是ca.crt的内容，请问您client-certificate-data字段有对应的文件吗？之前以为是对应&#47;var&#47;lib&#47;kubelet&#47;pki里的kubelet-client-current.pem，但是发现不是。</div> <span class="time">2018-12-03</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/55/b7/a8148556.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">꧁༺宏杰༻꧂</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">执行了dashboard和存储 为什么都不是running呢。</div> <span class="time">2018-12-01</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/b6/79/22e582a5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">刘岚乔月</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">用docker for mac 安装k8s 与这个有什么区别嘛</div> <span class="time">2018-11-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/a4/39/6a5cd1d8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">sotey</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">生命不息，折腾不止！由于公司所有服务器都用的redhat或者CentOS，我在CentOS上折腾了一个月还是没把双节点、三节点折腾出来，今天换成Ubuntu一波就搞定了~！！正在思考怎么说服老板让同事们学学Ubuntu，我对Ubuntu也不熟- _ -！老师有没有CentOS上折腾k8s的教程啊？还是不甘心啊，还想折腾。</div> <span class="time">2018-11-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eq6tsM65SmllxicEqqbaHcnqOw6O541JJ8ib75qyZ0zAGLxFOpV9L5kwr1dLCvgeL1V52cOu3yZLN2g/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">石头剪刀布</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Incoming HTTP&#47;2.0 GET &#47;api&#47;v1&#47;csrftoken&#47;login request from 10.244.0.0:50800: { contents hidden }<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Outcoming response to 10.244.0.0:50800 with 200 status code<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Incoming HTTP&#47;2.0 POST &#47;api&#47;v1&#47;login request from 10.244.0.0:50800: { contents hidden }<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Outcoming response to 10.244.0.0:50800 with 200 status code<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Incoming HTTP&#47;2.0 GET &#47;api&#47;v1&#47;login&#47;status request from 10.244.0.0:50800: {}2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Incoming HTTP&#47;2.0 GET &#47;api&#47;v1&#47;csrftoken&#47;login request from 10.244.0.0:50800: { contents hidden }<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Outcoming response to 10.244.0.0:50800 with 200 status code<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Incoming HTTP&#47;2.0 POST &#47;api&#47;v1&#47;login request from 10.244.0.0:50800: { contents hidden }<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Outcoming response to 10.244.0.0:50800 with 200 status code<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Incoming HTTP&#47;2.0 GET &#47;api&#47;v1&#47;login&#47;status request from 10.244.0.0:50800: {}<br>2018&#47;11&#47;25 11:08:23 [2018-11-25T11:08:23Z] Outcoming response to 10.244.0.0:50800 with 200 status code<br>2018&#47;11&#47;25 11:08:46 Metric client health check failed: the server could not find the requested resource (get services heapster). Retrying in 30 seconds.<br><br><br>token 方式登录， 点击&quot;登录&quot;， 毫无反应。<br>执行 kubectl logs -f kubernetes-dashboard-69dcdb65fd-clxrq --namespace=kube-system<br>一直报上述错误。 <br>希望老师帮忙一下原因，谢谢。</div> <span class="time">2018-11-25</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/43/79/39dece9b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">一张狗</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">千万级别，但是到十万还是百万的时候网络已经损耗过大</div> <span class="time">2018-11-23</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">相濡</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师好 存储插件，网络插件，dashboard都是安装在master节点的吗？</div> <span class="time">2018-11-23</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/33/c2/e135113a.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">mutexlock</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">通过describe 我发现etcd也挂了 不知道什么原因导致<br>root@ubuntu:&#47;data&#47;k8s# kubectl describe pod etcd-ubuntu   -n kube-system<br>之后event也没有什么<br>QoS Class:         BestEffort<br>Node-Selectors:    &lt;none&gt;<br>Tolerations:       :NoExecute<br>Events:            &lt;none&gt;<br>把worker节点执行kubeadm reset后，master节点就好了</div> <span class="time">2018-11-22</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/33/c2/e135113a.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">mutexlock</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请教个问题，我创建好了master节点，之后我用另一个机器执行join操作，提示加入成功了。<br>这时候我们执行 <br>root@ubuntu:&#47;data&#47;k8s# kubectl get nodes<br>NAME      STATUS    ROLES     AGE       VERSION<br>ubuntu    Ready     master    18h       v1.11.3<br>发现还是只有master，我看了下pod的状态，发现kube-apiserver-ubuntu和kube-scheduler-ubunt变成了Pending, <br>root@ubuntu:&#47;data&#47;k8s# kubectl get pods -n kube-system<br>NAME                       READY     STATUS    RESTARTS   AGE<br>coredns-78fcdf6894-5lrr8   1&#47;1       Running   0          18h<br>coredns-78fcdf6894-stcsc   1&#47;1       Running   0          18h<br>kube-apiserver-ubuntu      0&#47;1       Pending   0          1s<br>kube-proxy-67z6t           1&#47;1       Running   0          18h<br>kube-scheduler-ubuntu      0&#47;1       Pending   0          0s<br>weave-net-t4mv8            2&#47;2       Running   0          18h<br>我把worker节点的执行 kubeadm reset后，上面的状态就好了，我是个初学者，不知道如何入手。我想知道这个如何定位问题出在什么地方？ </div> <span class="time">2018-11-22</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/2e/72/145c10db.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">每日都想上班</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我的rook执行了两行apply后怎么没出现rook-ceph-mgr-dashboard呢？</div> <span class="time">2018-11-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/3a/ea/ff744c48.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">司马忑</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">有人提到科学上网以及centos系列安装的问题，在这里分享一下一下解决方案：<br>第一是相关工具通过阿里云安装，地址 http:&#47;&#47;opsx.alibaba.com&#47;mirror ，这是阿里的开源镜像站，有各种镜像，找到k8s这一行，点行尾的帮助，写有apt&#47;yum两个版本的命令；<br>第二是gcr.io的镜像问题，有人在github同步了一份，请看 http:&#47;&#47;github.com&#47;anjia0532&#47;gcr.io_mirror</div> <span class="time">2018-11-17</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/9d/36/2f36e1a8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">arlose</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问老师，我这边有三台机器不在同一个局域网的话，需要怎么加入kubernetes集群？</div> <span class="time">2018-11-16</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo8rz97dFZTzBQK3xVY8NBfP6faZhvYCoDj8unSZIIhftpGWvJFYB6CEdf6bUu2rBNrabR3umc7jw/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">东东宝</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，利用kebeadm安装的master宕机了，有什么方法可以重启嘛？</div> <span class="time">2018-11-14</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">直接重启机器即可</p> <p class="reply-time">2018-11-14</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eo8rz97dFZTzBQK3xVY8NBfP6faZhvYCoDj8unSZIIhftpGWvJFYB6CEdf6bUu2rBNrabR3umc7jw/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">东东宝</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">张老师，利用kubeadm安装的k8s  master宕机了，有什么方法可以重启啊？</div> <span class="time">2018-11-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/5b/14/7b10dfcb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">涛</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">[ERROR KubeletVersion]: the kubelet version is higher than the control plane version. This is not a supported version skew and may lead to a malfunctional cluster. Kubelet version: &quot;1.12.2&quot; Control plane version: &quot;1.11.1&quot;<br>[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`<br>这个错误怎么弄啊，系统是centos，不知到为什么装的kubeadm 1.11.1自动把kubelet1.12.2就安装上啦而不是1.11.1，如果升级kubeadm1.12后面kubeadm init ...会报拉取镜像失败，有没有详细一点centos操作k8s文档，包括在那个文件下创建什么东西？<br><br>centos使用yum不是用apt-get,这个第一部分怎么改？<br>$ curl -s https:&#47;&#47;packages.cloud.google.com&#47;apt&#47;doc&#47;apt-key.gpg | apt-key add -<br>$ cat &lt;&lt;EOF &gt; &#47;etc&#47;apt&#47;sources.list.d&#47;kubernetes.list<br>deb http:&#47;&#47;apt.kubernetes.io&#47; kubernetes-xenial main<br>EOF<br>$ apt-get update<br>$ apt-get install -y docker.io kubeadm<br>谢谢！<br></div> <span class="time">2018-11-10</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/5b/14/7b10dfcb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">涛</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">有没有centos操作文档呀</div> <span class="time">2018-11-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">几乎没区别</p> <p class="reply-time">2018-11-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9c/ec/15494ea3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Terry Hu</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">今天早上重启了master 节点，然后一直连不上api server<br>root@kube-master:~# kubectl cluster-info<br>Kubernetes master is running at https:&#47;&#47;xxxx:6443<br><br>To further debug and diagnose cluster problems, use &#39;kubectl cluster-info dump&#39;.<br><br>重启docker 也没用，无法get pods,最终解决方案是:再次disable swap<br>swapoff -a<br>为了不让这个问题再次出现，在&#47;etc&#47;fstab注释掉swap重启解决<br>看日志发现的，要学会查日志<br>journalctl -l -u kubelet</div> <span class="time">2018-11-05</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/c2/44/d1b135d1.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">💦</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">用vm搭建的，node  join后提示成功但是master上一直查询不到，最后定位到是hostname必须不同，修改再加入就好了，参考https:&#47;&#47;github.com&#47;kubernetes&#47;kubernetes&#47;issues&#47;61224#issuecomment-387283739，</div> <span class="time">2018-10-31</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/2e/72/145c10db.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">每日都想上班</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">weave和flannel两个都部署在容器中是不是可以的，发现我们之前部署都两个都在里面运行着</div> <span class="time">2018-10-31</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/89/ba/e1d6ce24.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">jimmy</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">node 执行join后，显示成功，有如下日志：<br>This node has joined the cluster:<br>* Certificate signing request was sent to master and a response<br>  was received.<br>* The Kubelet was informed of the new secure connection details.<br><br>Run &#39;kubectl get nodes&#39; on the master to see this node join the cluster.<br>但是master上 执行 kubectl get nodes&#39; 就是看不到加进来的节点，<br>查询journalctl -xefu kubelet<br>12272 docker_sandbox.go:372] failed to read pod IP from plugin&#47;docker: NetworkPlugin cni failed on the status hook for pod &quot;coredns-99b9bb8bd-7vj5x_kube-system&quot;: CNI failed to retrieve network namespace path: cannot find network namespace for the terminated container &quot;0ca846c77523f26cc2ed9ea1224adb59c635c529d741f8480cdd826034c15c8f&quot;<br>看到如错误<br><br>是否是这个原因？怎么处理</div> <span class="time">2018-10-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你看到的错误不是真正的错误，往上面翻翻</p> <p class="reply-time">2018-10-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/99/62/18b04db7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">leo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请教个问题：<br>对于node结点的安装和注册,我执行了下指令，所有指令正常完成:<br>...<br>apt install -y kubelet=1.11.3-00<br>apt install -y kubectl=1.11.3-00<br>apt install -y kubeadm=1.11.3-00<br>kubeadm join ...<br>不过在master上执行kubectl get nodes后<br>加入的node显示 NotReady, 这是什么原因导制的呢？</div> <span class="time">2018-10-24</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你网络插件装了没？</p> <p class="reply-time">2018-10-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/3d/a9/0d2c7138.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">何文强在江湖</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">AWS服务器进行worker部署的时候报这个错，这个ip ping不通啊<br>[discovery] Failed to request cluster info, will try again: [Get https:&#47;&#47;172.31.1.235:6443&#47;api&#47;v1&#47;namespaces&#47;kube-public&#47;configmaps&#47;cluster-info: dial tcp 172.31.1.235:6443: i&#47;o timeout]</div> <span class="time">2018-10-23</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你这地址语言安全组吗？</p> <p class="reply-time">2018-10-24</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9c/5c/69ca7575.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Tylar</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">[root@localhost ~]# kubectl get pods --namespace rook-ceph-systemNAME                                  READY   STATUS    RESTARTS   AGErook-ceph-agent-mwrbm                 1&#47;1     Running   0          14hrook-ceph-operator-5bfbf654db-mwnqs   1&#47;1     Running   0          14hrook-discover-4xn2l                   1&#47;1     Running   0          14h<br><br>之前的是成功的</div> <span class="time">2018-10-23</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9c/5c/69ca7575.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Tylar</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">提示error: unable to recognize &quot;https:&#47;&#47;raw.githubusercontent.com&#47;rook&#47;rook&#47;master&#47;cluster&#47;examples&#47;kubernetes&#47;ceph&#47;cluster.yaml&quot;: no matches for kind &quot;Cluster&quot; in version &quot;ceph.rook.io&#47;v1beta1&quot;。  没有这个APIversion怎么弄</div> <span class="time">2018-10-22</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你前面rook没成功部署吧？</p> <p class="reply-time">2018-10-23</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/4c/fc/0e887697.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">kkgo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">no kind &quot;MasterConfiguration&quot; is registered for version &quot;kubeadm.k8s.io&#47;v1.11&quot; in scheme &quot;k8s.io&#47;kubernetes&#47;cmd&#47;kubeadm&#47;app&#47;apis&#47;kubeadm&#47;scheme&#47;scheme.go:31&quot;<br> <br> centos7  国内你们配置什么镜像地址下载</div> <span class="time">2018-10-22</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/6c/47/57b6c4e8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">帅</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师好，文中说kube-controller-manager依赖网络，可是为什么我实践到这一步的时候，没有部署weave，controller的pod也是running状态呢？此处的信息是不是有误？下面是我实践后输出的结果<br>我的环境是windows 下vritualbox+ubuntu16.04，刚执行完kubeadm init。希望得到老师专业的指导。谢谢！<br>root@qianshuai-VirtualBox:~# kubectl get pods -n kube-system<br>NAME                                           READY     STATUS    RESTARTS   AGE<br>coredns-78fcdf6894-75r7h                       0&#47;1       Pending   0          5m<br>coredns-78fcdf6894-tqvkc                       0&#47;1       Pending   0          5m<br>etcd-qianshuai-virtualbox                      1&#47;1       Running   1          7m<br>kube-apiserver-qianshuai-virtualbox            1&#47;1       Running   0          5m<br>kube-controller-manager-qianshuai-virtualbox   1&#47;1       Running   0          5m<br>kube-proxy-lgxw4                               1&#47;1       Running   0          5m<br>kube-scheduler-qianshuai-virtualbox            1&#47;1       Running   1          8m<br><br>安装完weave后的输出如下：<br>root@qianshuai-VirtualBox:~# kubectl get pods -n kube-system<br>NAME                                           READY     STATUS    RESTARTS   AGE<br>coredns-78fcdf6894-75r7h                       1&#47;1       Running   0          16m<br>coredns-78fcdf6894-tqvkc                       1&#47;1       Running   0          16m<br>etcd-qianshuai-virtualbox                      1&#47;1       Running   1          19m<br>kube-apiserver-qianshuai-virtualbox            1&#47;1       Running   0          17m<br>kube-controller-manager-qianshuai-virtualbox   1&#47;1       Running   0          17m<br>kube-proxy-lgxw4                               1&#47;1       Running   0          16m<br>kube-scheduler-qianshuai-virtualbox            1&#47;1       Running   1          20m<br>weave-net-jlbhw                                2&#47;2       Running   0          1m<br><br></div> <span class="time">2018-10-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/57/b7/a37f1bc5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Mr.Yang</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">张老师，您好，您在上一节介绍kubeadm的结尾说kubeadm还不适合用在生产环境，而在这一节说下面将以kubeadm部署的环境为基础展开，请问为啥不使用能在生产环境使用的部署方式展开，把kubeadm部署的方式作为了解呢？(个人只是好奇，请各位大佬勿喷，谢谢！)</div> <span class="time">2018-10-19</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">kubeadm GA只是时间问题，其它原因我在文章末尾也说明了。</p> <p class="reply-time">2018-10-19</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/4c/fc/0e887697.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">kkgo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">线上都是centos版本系统，老师能不能照顾下centos</div> <span class="time">2018-10-19</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">……没有区别</p> <p class="reply-time">2018-10-19</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9f/26/89eda2c8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">V V</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问ip地址改变后如何快速恢复cluster。我组了一个子网，使用kubeadm部署了cluster，之后运行了一些应用。之后路由器坏了，这些节点换到了更高一级的路由器下面，ip地址变了。kubectl get nodes的时候提示Unable to connect to the server: dial tcp 192.168.2.3:6443: i&#47;o timeout。请问如何快速恢复这个cluster?<br></div> <span class="time">2018-10-19</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">简单，这里有完整流程：https:&#47;&#47;github.com&#47;kubernetes&#47;kubeadm&#47;issues&#47;338 这就是为啥再三强调社区的重要性 :-)</p> <p class="reply-time">2018-10-19</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/3f/5b/6af46a5d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">贾大众</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">worker节点加入不成功！<br>在master上执行get nodes只看到一个master节点。<br>还有一个奇怪的问题，用describe  node看到的internalip 竟然是另外一台主机的IP。</div> <span class="time">2018-10-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你宿主机的网卡，网络 是不是不太常规？</p> <p class="reply-time">2018-10-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/5a/56/115c6433.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">jssfy</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问多个租户可以考虑用同一套k8s来管理不？生产环境上</div> <span class="time">2018-10-16</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">取决于你期望的隔离程度。kubernetes不支持强多租户。</p> <p class="reply-time">2018-10-16</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/2d/42/6e3be953.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Will</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">每节课后的思考题有参考 答 案吗？最好能在每期把上一期的参 考答 案发出来。谢谢</div> <span class="time">2018-10-15</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">会给出</p> <p class="reply-time">2018-10-16</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/ad/b1/2e96794c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">flyflypeng</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师你好，我看了一下大家的留言，发现大家在部署k8s过程中遇到的最大困难就是 “qiang”！<br>我也遇到了类似的问题，我想请教一下老师我该如何配置代理，可以使得 master 和 worker 节点上需要 pull 镜像时（例如 k8s.gcr.io上面的k8s基础组件的镜像），可以顺利地下载下来镜像。<br><br>我曾经尝试过如下的代理方式，但是还是失败：设置 http_proxy 和 https_proxy 这种策略会导致 k8s 发送自己的一些 https 请求时会走代理，从而找不到 apiserver 的地址。<br><br>我现在手动部署成功 k8s 的方法就是将 k8s 所需要的 docker images 从 docker hub 上下载下来，然后通过 docker tag 的方式重命令成 k8s 指定的镜像名称格式。但是这样真的好麻烦啊，好像有种顺畅地一键部署，而不是还要自己根据 yaml 文件中的 image 去事先现在好镜像。<br></div> <span class="time">2018-10-15</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">现在只能这么干……</p> <p class="reply-time">2018-10-15</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/99/bb/90d97247.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">shaobo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问，使用flannel做网络 calico做不同namespace间的隔离，这种方案稳定性如何</div> <span class="time">2018-10-12</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/ff/b0/dca98a0d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">G1</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">在执行kubectl apply的时候，如果serviceaccount&#47;weave-net unchanged，是因为Weave net 需要升级，执行kubectl rollout status ds&#47;weave-net -n kube-system即可</div> <span class="time">2018-10-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/8d/df/1d1dbd57.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">爱学习</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">您好老师：<br>1、harbor的使用和安装后续会讲到吗？<br>2、在二进制安装的时候遇到calico的安装问题，一直没有搞清楚实现的原理和方式，这个后续会详细讲解吗？</div> <span class="time">2018-10-11</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">没有harbor ，会有calico</p> <p class="reply-time">2018-10-11</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/a9/86/8211935c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Vincent</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kubectl taint node node1.hash.loc node-role.kubernetes.io&#47;master-<br>error: taint &quot;node-role.kubernetes.io&#47;master:&quot; not found<br><br>删除master节点上的污点时报错<br><br>[root@node1 ~]# kubectl describe node <br>Name:               node1.hash.loc<br>Roles:              master<br>Labels:             beta.kubernetes.io&#47;arch=amd64<br>                    beta.kubernetes.io&#47;os=linux<br>                    kubernetes.io&#47;hostname=node1.hash.loc<br>                    node-role.kubernetes.io&#47;master=<br>Annotations:        kubeadm.alpha.kubernetes.io&#47;cri-socket=&#47;var&#47;run&#47;dockershim.sock<br>                    node.alpha.kubernetes.io&#47;ttl=0<br></div> <span class="time">2018-10-09</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">说明本来没有这个taint，不要怕</p> <p class="reply-time">2018-10-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/38/f9/2b4755b5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">看不穿</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我看马哥教育的视频里面用的是flannel提供网络连接，用calico提供网络策略。<br>不过，本文说用weave插件提供网络策略，请问这两种方案孰优孰劣</div> <span class="time">2018-10-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">网络部分会细讲</p> <p class="reply-time">2018-10-13</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/54/20/7ad02632.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Jamie</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我按照步骤安装kubeadm出错了，即使我指定版本(1.11.0-00,1.11.1-00,etc.)安装还是有这个问题,怎么破？<br>root@ip-172-31-21-209:~# apt-get install -y kubelet kubeadm kubectl<br>Reading package lists... Done<br>Building dependency tree<br>Reading state information... Done<br>kubectl is already the newest version (1.12.1-02).<br>Some packages could not be installed. This may mean that you have<br>requested an impossible situation or if you are using the unstable<br>distribution that some required packages have not yet been created<br>or been moved out of Incoming.<br>The following information may help to resolve the situation:<br><br>The following packages have unmet dependencies:<br> kubeadm : Depends: kubernetes-cni (= 0.6.0) but 0.6.0-02 is to be installed<br> kubelet : Depends: kubernetes-cni (= 0.6.0) but 0.6.0-02 is to be installed<br>E: Unable to correct problems, you have held broken packages.<br></div> <span class="time">2018-10-06</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">reset重新来。按这个步骤部署1.12也没有问题。</p> <p class="reply-time">2018-10-07</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/38/f9/2b4755b5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">看不穿</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请问maste节点是单节点，万一master坏了，怎么办，怎么给master做高可用</div> <span class="time">2018-10-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">kubeadm可以部署多master，见官方文档</p> <p class="reply-time">2018-10-07</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/38/f9/2b4755b5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">看不穿</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请问maste节点是单节点，万一master坏了，怎么办，怎么给master做高可用</div> <span class="time">2018-10-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">kubeadm已经有有高可用master的部署文档了</p> <p class="reply-time">2018-10-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/e7/40/e592d386.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Genius</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">This error is likely caused by:<br>			- The kubelet is not running<br>			- The kubelet is unhealthy due to a misconfiguration of the node in some way (required cgroups disabled)<br>			- No internet connection is available so the kubelet cannot pull or find the following control plane images:<br>				- k8s.gcr.io&#47;kube-apiserver-amd64:v1.11.3<br>				- k8s.gcr.io&#47;kube-controller-manager-amd64:v1.11.3<br>				- k8s.gcr.io&#47;kube-scheduler-amd64:v1.11.3<br>				- k8s.gcr.io&#47;etcd-amd64:3.2.18<br>				- You can check or miligate this in beforehand with &quot;kubeadm config images pull&quot; to make sure the images<br>				  are downloaded locally and cached.<br><br>		If you are on a systemd-powered system, you can try to troubleshoot the error with the following commands:<br>			- &#39;systemctl status kubelet&#39;<br>			- &#39;journalctl -xeu kubelet&#39;<br><br>root@ubuntu:~# journalctl -f -u kubelet.service <br>-- Logs begin at Sun 2018-09-30 10:06:54 CST. --<br>Sep 30 14:03:49 ubuntu kubelet[22077]: W0930 14:03:49.066086   22077 cni.go:172] Unable to update cni config: No networks found in &#47;etc&#47;cni&#47;net.d<br>Sep 30 14:03:49 ubuntu kubelet[22077]: E0930 14:03:49.066332   22077 kubelet.go:2110] Container runtime network not ready: NetworkReady=false reason:NetworkPluginNotReady message:docker: network plugin is not ready: cni config uninitialized<br>Sep 30 14:03:54 ubuntu kubelet[22077]: W0930 14:03:54.067145   22077 cni.go:172] Unable to update cni config: No networks found in &#47;etc&#47;cni&#47;net.d<br><br><br><br>老师，这个kubelet有问题吗，为啥一直报这个cni初始化失败呢<br></div> <span class="time">2018-09-30</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">asdf100</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">root@ubuntu:~&#47;k8s# kubectl get pods -n rook-ceph-system<br>NAME                                  READY     STATUS                 RESTARTS   AGE<br>rook-ceph-operator-78d498c68c-rfph5   0&#47;1       CreateContainerError   0          5m<br><br>root@ubuntu:~&#47;k8s# kubectl describe pods rook-ceph-operator-78d498c68c-rfph5 -n rook-ceph-system<br>Node:               ubuntu&#47;10.0.2.15<br>Labels:             app=rook-ceph-operator<br>                    pod-template-hash=3480547247<br>Annotations:        &lt;none&gt;<br>Status:             Pending<br>IP:                 10.32.0.4<br>Controlled By:      ReplicaSet&#47;rook-ceph-operator-78d498c68c<br>Containers:<br>  rook-ceph-operator:<br>    Container ID:<br>  .....<br>    Args:<br>      ceph<br>      operator<br>    State:          Waiting<br>      Reason:       CreateContainerError<br>    Ready:          False<br>    Restart Count:  0<br>    Environment:<br>      ROOK_ALLOW_MULTIPLE_FILESYSTEMS:    false<br>      ROOK_LOG_LEVEL:                     INFO<br>      ROOK_MON_HEALTHCHECK_INTERVAL:      45s<br>      ROOK_MON_OUT_TIMEOUT:               300s<br>      ROOK_HOSTPATH_REQUIRES_PRIVILEGED:  false<br>      NODE_NAME:                           (v1:spec.nodeName)<br>      POD_NAME:                           rook-ceph-operator-78d498c68c-rfph5 (v1:metadata.name)<br>      POD_NAMESPACE:                      rook-ceph-system (v1:metadata.namespace)<br>    Mounts:<br>      &#47;etc&#47;ceph from default-config-dir (rw)<br>      &#47;var&#47;lib&#47;rook from rook-config (rw)<br>.......<br>  Type     Reason     Age                From               Message<br>  ----     ------     ----               ----               -------<br>  Normal   Scheduled  2m                 default-scheduler  Successfully assigned rook-ceph-system&#47;rook-ceph-operator-78d498c68c-rfph5 to ubuntu<br>  Warning  Failed     2m                 kubelet, ubuntu    Error: Error response from daemon: error creating aufs mount to &#47;var&#47;lib&#47;docker&#47;aufs&#47;mnt&#47;35cf1227e66382a4fc04012401bd73a12cd73499613f09be3b488b56692c11e5-init: invalid argument<br><br>Master和Worker在同一台机器上，从0重度了10多次了，什么原因？</div> <span class="time">2018-09-29</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9f/26/89eda2c8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">V V</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kubelet起不起来，按照这个方法增加了参数echo &#39;Environment=&quot;KUBELET_EXTRA_ARGS=--fail-swap-on=false&quot;&#39; &gt;&gt; &#47;etc&#47;systemd&#47;system&#47;kubelet.service.d&#47;10-kubeadm.conf，并且执行了swapoff -a &amp;&amp; sed -i &#39;&#47;swap&#47;d&#39; &#47;etc&#47;fstab。还是提示没有禁用swap。<br>failed to run Kubelet: Running with swap on is not supported, pljbe disable swap! or set --fail-swap-on flag to false. &#47;proc&#47;sw<br>9月 27 15:15:17 master systemd[1]: kubelet.service: Main process exited, code=exited, status=255&#47;n&#47;a</div> <span class="time">2018-09-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/d2/2f/bce28fc8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">龙坤</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">问题提示：<br>root@master:&#47;opt# kubectl get pods -n kube-system<br>NAME                                                    READY     STATUS              RESTARTS   AGE<br>coredns-78fcdf6894-rn569               1&#47;1       Running             0          46m<br>coredns-78fcdf6894-vcj4v                1&#47;1       Running             0          46m<br>etcd-master                                         1&#47;1       Running             0          45m<br>kube-apiserver-master                       1&#47;1       Running             0          45m<br>kube-controller-manager-master     1&#47;1       Running             0          45m<br>kube-proxy-bl92p                                1&#47;1       Running             0          46m<br>kube-proxy-wh278                                              0&#47;1       ContainerCreating   0          10m<br>kube-scheduler-master                                       1&#47;1       Running             0          45m<br>kubernetes-dashboard-767dc7d4d-gtqpr     1&#47;1       Running             0          24m<br>weave-net-4zlbw                                                  2&#47;2       Running             0          45m<br>weave-net-8n456                                                  0&#47;2       ContainerCreating   0          10m<br><br>我在worker上执行了kubeadm join之后，在master节点就出现了两个pod状态都是&quot;ContainerCreating&quot;，请问什么原因造成的？</div> <span class="time">2018-09-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">查看events看看吧</p> <p class="reply-time">2018-09-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/98/37/7f575aec.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">A-</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请教一个问题，我通过rancher部署的k8s，在各个节点看都有kubelet的容器，但是宿主机上也有kubelet的进程。真正干活的是kubelet的话，那么对应的容器又是做什么的呢？</div> <span class="time">2018-09-23</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不了解</p> <p class="reply-time">2018-09-23</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/05/d8/caf31dec.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">一叶</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">分享一个二进制安装脚本：<br>https:&#47;&#47;github.com&#47;SongCF&#47;kubesh</div> <span class="time">2018-09-23</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/a6/23/91e74c43.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">leo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问张磊老师，我只部署了单节点master，是不是不能部署rook？我运行了kubectl apply -f https:&#47;&#47;raw.githubusercontent.com&#47;rook&#47;rook&#47;master&#47;cluster&#47;examples&#47;kubernetes&#47;ceph&#47;operator.yaml<br>之后没报错，但是rook-ceph-operator-xxx的status一直是pending，看日志无任何信息。<br>部署就卡在这步了，求帮助，谢谢！<br></div> <span class="time">2018-09-22</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以的，参考单节点的文档，要对master进行设置</p> <p class="reply-time">2018-09-23</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/0e/17/0aa98ae7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">同心结</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">你好，我按照你的教程只用一个单节点是没有问题的。但是加入node节点之后，创建deployment，pod状态显示Successfully assigned default&#47;myweb1-6cb867d96-mntzs to node1，然后node1一直没反应，最后会超时报错</div> <span class="time">2018-09-22</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">节点沟通有问题？</p> <p class="reply-time">2018-09-22</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/8c/6b/d2672f70.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">ninvfeng</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">开了代理提示这个: <br>➜  kubeadm kubeadm init --config kubeadm.yaml<br>I0921 08:41:04.409154    1333 feature_gate.go:230] feature gates: &amp;{map[]}<br>[init] using Kubernetes version: v1.11.3<br>[preflight] running pre-flight checks<br>	[WARNING HTTPProxy]: Connection to &quot;https:&#47;&#47;10.0.2.15&quot; uses proxy &quot;http:&#47;&#47;192.168.33.11:1080&quot;. If that is not intended, adjust your proxy settings<br>	[WARNING HTTPProxyCIDR]: connection to &quot;10.96.0.0&#47;12&quot; uses proxy &quot;http:&#47;&#47;192.168.33.1:1080&quot;. This may lead to malfunctional cluster setup. Make sure that Pod and Services IP ranges specified correctly as exceptions in proxy configuration<br>I0921 08:41:04.435667    1333 kernel_validator.go:81] Validating kernel version<br>I0921 08:41:04.435709    1333 kernel_validator.go:96] Validating kernel config<br>	[WARNING SystemVerification]: docker version is greater than the most recently validated version. Docker version: 18.06.1-ce. Max validated version: 17.03<br>[preflight] Some fatal errors occurred:<br>	[ERROR Swap]: running with swap on is not supported. Please disable swap<br>[preflight] If you know what you are doing, you can make a check non-fatal with `--ignore-preflight-errors=...`<br><br>没开代理提示: <br>➜  kubeadm kubeadm init --config kubeadm.yaml<br>unable to get URL &quot;https:&#47;&#47;dl.k8s.io&#47;release&#47;stable-1.11.txt&quot;: Get https:&#47;&#47;storage.googleapis.com&#47;kubernetes-release&#47;release&#47;stable-1.11.txt: dial tcp 172.217.31.240:443: i&#47;o timeout<br></div> <span class="time">2018-09-21</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/c2/e0/7188aa0a.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">blackpiglet</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">1.  目前主要使用 Kubeadm 部署环境，试用时曾用过 Minikube，也曾经用过 Kubernetes 官方的 Ansible  playbook 部署过，想尝试 kubespray 和 TerraFrom。Minikube 我理解是用虚拟机作为单节点跑 k8s 集群，具体的流程不了解，总之没有梯子是搞不定的。Kubernetes Ansible playbook 是好长时间以前用的了，感觉效果还不错，至少比我自己写的 playbook 靠谱多了...<br>2. Kubernetes 集群的规模限制在官方文档里说的很清楚：<br>No more than 5000 nodes<br>No more than 150000 total pods<br>No more than 300000 total containers<br>No more than 100 pods per node<br>现在环境也就是五台物理机。</div> <span class="time">2018-09-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/a5/cd/3aff5d57.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Alery</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请教一个问题，容器里挂在由Ceph提供的数据卷，那这个数据卷实际的数据存储再什么地方呢？</div> <span class="time">2018-09-19</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">存储节点，也就是你部署了ceph的机器</p> <p class="reply-time">2018-09-19</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/fd/cc/b13b71f9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">他说风雨中</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师您好，想问一下您kubernetes1.10是怎么支持cpuset，cpushare的，是在deployment的yaml文件里面吗？并且问一下k8s是回自动进行cpu管理还是手动去管理？由于网上材料很少，只能在这里问您，希望您能指点一下</div> <span class="time">2018-09-18</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">后面专门有一篇讲资源管理的</p> <p class="reply-time">2018-09-18</p>
	</div>
</div>
</li></ul></div></div></div></div><div id="translate-man-app" class="content-3WfBL_0" style="background-color: rgb(255, 255, 255); display: none;"><div data-v-ea0bd11e="" class="outputBox-qe9A4_0"><div data-v-ea0bd11e="" class="outputBox-3oESn_0"><span data-v-ea0bd11e="" class="outputBox-13Ovx_0"></span></div><div data-v-ea0bd11e="" class="outputBox-1GLb__0"><div data-v-ea0bd11e="" class="outputBox-onVZH_0"><img src="chrome-extension://fapgabkkfcaejckbfmfcdgnfefbmlion/static/sound.svg"            class="icon-tprjJ_0"></div></div><div data-v-ea0bd11e="" class="outputBox-2sJgr_0"></div><div data-v-ea0bd11e="" class="outputBox-17RAm_0" style="display: none;"><div data-v-ea0bd11e=""></div></div></div></div><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({        showProcessingMessages: false,        messageStyle: "none",        tex2jax: {          inlineMath: [['$','$'], ['\\(','\\)']],          displayMath: [ ["$$","$$"] ],          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code', 'a']        }      });      MathJax.Hub.Register.MessageHook("End Process", function (message) {        var eve = new Event('mathjaxfini')        window.dispatchEvent(eve)      })</script></body></html>