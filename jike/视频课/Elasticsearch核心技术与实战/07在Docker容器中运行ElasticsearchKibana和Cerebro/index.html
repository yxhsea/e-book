<html class="cye-disabled cye-lm"><head><meta charset="utf-8"><meta name="referrer" content="no-referrer"><meta name="Keywords" content="极客时间,极客邦,极客邦科技,极客邦控股,极客时间App,专栏订阅,极客新闻,二叉树,极客Live,QCon,左耳听风,AI技术内参,大航海时代,陈皓,徐飞,洪亮劼,霍泰稳,池建强,Selina,Gary,InfoQ,极客搜索"><meta name="description" content="极客时间是极客邦科技出品的一款 IT 内容知识服务 App，内容包含专栏订阅、极客新闻、热点专题、直播、视频和音频等多形式的知识内容，并设有陈皓专栏、徐飞专栏、洪亮劼专栏等专栏供订阅。"><link rel="apple-touch-icon" sizes="180x180" href="http://static001.geekbang.org/static/icon/time/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="http://static001.geekbang.org/static/icon/time/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="http://static001.geekbang.org/static/icon/time/favicon-16x16.png"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="format-detection" content="telephone=no"><title>07 | 	在Docker容器中运行Elasticsearch Kibana和Cerebro</title><link href="https://static001.geekbang.org/static/time/css/app.b230db929e53af87acd535637f5011b8.css" rel="stylesheet"><style type="text/css">        @font-face {            font-family: player-font;            src: url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.eot");            src: url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.eot?#iefix") format("embedded-opentype"), url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.woff") format("woff"), url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.ttf") format("truetype"), url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.svg#player-font") format("svg")        }        .player-font {            font-family: player-font !important;            font-size: 16px;            font-style: normal;            -webkit-font-smoothing: antialiased;            -webkit-text-stroke-width: .2px;            -moz-osx-font-smoothing: grayscale        }        .vplayer {            position: relative;            overflow: hidden        }        .vplayer,        .vplayer video {            width: 100%        }        .vplayer .title {            position: absolute;            top: 1rem;            left: 1rem;            right: 1rem;            color: #fff;            font-weight: 400;            font-size: .875rem;            word-break: break-all;            display: -webkit-box;            overflow: hidden;            text-overflow: ellipsis;            -webkit-box-orient: vertical;            -webkit-line-clamp: 1        }        .vplayer .finish-control,        .vplayer .loading {            position: absolute;            top: 0;            left: 0;            background: rgba(0, 0, 0, .5);            color: #fff;            width: 100%;            height: 100%;            z-index: 2;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center        }        .vplayer .finish-control h3,        .vplayer .loading h3 {            position: absolute;            color: #fff;            top: 1rem;            left: 50%;            font-size: 1rem;            font-weight: 400;            -webkit-transform: translate(-50%);            transform: translate(-50%)        }        .vplayer .finish-control p,        .vplayer .loading p {            cursor: pointer;            max-height: 6rem;            text-align: center        }        .vplayer .finish-control .cancel-next,        .vplayer .loading .cancel-next {            margin-left: 4rem        }        .vplayer .finish-control .cancel-next .icon-cancel-next,        .vplayer .loading .cancel-next .icon-cancel-next {            height: 4rem;            line-height: 4rem;            cursor: pointer;            font-size: 3.5rem        }        .vplayer .finish-control .cancel-next .icon-cancel-next i,        .vplayer .loading .cancel-next .icon-cancel-next i {            position: absolute;            top: 0;            left: 0;            margin-left: 8px        }        .vplayer .finish-control .icon-replay,        .vplayer .loading .icon-replay {            height: 4rem;            cursor: pointer;            line-height: 4rem;            font-size: 3rem        }        .vplayer .finish-control {            background: #000        }        .vplayer .no-wifi {            width: 70%;            position: absolute;            left: 50%;            top: 50%;            padding: 1rem;            background: rgba(0, 0, 0, .8);            -webkit-transform: translate(-50%, -50%);            transform: translate(-50%, -50%);            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: vertical;            -webkit-box-direction: normal;            -ms-flex-direction: column;            flex-direction: column;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            z-index: 3        }        .vplayer .no-wifi p {            line-height: 1.5rem;            margin: 0 auto;            width: 60%;            color: #fff;            font-size: 1rem;            text-align: center        }        .vplayer .no-wifi p span {            font-size: .875rem        }        .vplayer .no-wifi div {            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1;            margin-top: 1rem        }        .vplayer .no-wifi div a {            color: #fff;            background: #ff5a05;            padding: .3rem .5rem        }        .vplayer .no-wifi div a:last-child {            margin-left: 1rem        }        .vplayer .buy {            position: absolute;            z-index: 4;            top: 0;            left: 0;            width: 100%;            height: 100%;            color: #fff;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: vertical;            -webkit-box-direction: normal;            -ms-flex-direction: column;            flex-direction: column;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            background: #000        }        .vplayer .buy p {            text-align: center        }        .vplayer .buy p span {            color: #ff5a05        }        .vplayer .buy .btn {            margin-top: 1rem;            color: #fff;            background: #ff5a05;            padding: .3rem 1.5rem        }        .android .dplayer .dplayer-controller .dplayer-icons .dplayer-full,        .dplayer-setting-item.dplayer-setting-loop {            display: none        }</style><style type="text/css">        .MathJax_Display {            overflow: auto        }        .poster {            position: fixed;            left: -10000px;            top: -10000px;            overflow: hidden;            padding: 1rem;            background: #ececec        }        .richcontent-pre-copy {            font-size: 13px;            color: #888;            position: absolute;            right: 1em;            top: .2em;            cursor: pointer;            -webkit-user-select: none;            -moz-user-select: none;            -ms-user-select: none;            user-select: none        }        .richcontent-pre-copy .iconfont {            font-size: 12px;            margin-right: .2em        }</style><style type="text/css">        .bottom {            width: 100%;            background-color: #f5f5f5;            position: fixed;            bottom: 0;            left: 0;            z-index: 10        }        .bottom,        .bottom .bottom-wrapper {            height: 67px;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row        }        .bottom .bottom-wrapper {            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1;            padding-left: 20px;            padding-right: 20px;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between        }        .bottom .bottom-wrapper a {            height: 48px;            line-height: 51px;            -webkit-box-sizing: border-box;            box-sizing: border-box        }</style><style type="text/css">        .breadcrumb {            padding: 30px 0;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -ms-flex-wrap: wrap;            flex-wrap: wrap;            background: #fff        }        .breadcrumb a.title {            color: #e57c39;            font-size: 15px;            font-weight: 400        }        .breadcrumb span.title {            color: #888;            font-size: 15px;            font-weight: 400        }        .breadcrumb .split {            color: #ccc;            font-size: 10px;            margin-right: 5px        }</style><style type="text/css">        .course-detail[data-v-4e11b9bf] {            max-width: 46.25rem;            margin: 0 auto;            background: #f5f5f5        }        .course-detail .course-main[data-v-4e11b9bf] {            background-color: #fff;            width: 100%;            z-index: 10;            top: 0;            left: 0        }        .course-detail .course-info[data-v-4e11b9bf] {            background: #fff;            cursor: pointer        }        .course-detail .course-info .course-info-top[data-v-4e11b9bf] {            padding: 1rem 0 .4rem .78125rem;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center        }        .course-detail .course-info .course-info-top h1[data-v-4e11b9bf] {            font-size: 1.03125rem;            font-weight: 400;            text-align: justify-content        }        .course-detail .course-info .course-info-top i[data-v-4e11b9bf] {            font-weight: 400;            width: 40px;            padding-right: .78125rem;            -ms-flex-negative: 0;            flex-shrink: 0;            text-align: right;            color: #dadada        }        .course-detail .course-info .course-info-bottom[data-v-4e11b9bf] {            padding: 0 54px .5rem .78125rem;            border-bottom: 1px solid #e8e8e8;            color: #888;            font-size: .78125rem        }        .course-detail .course-info .course-info-bottom .icon-course-play[data-v-4e11b9bf] {            color: #d9d9d9;            font-size: .75rem        }        .course-detail .video-list[data-v-4e11b9bf] {            background: #fff;            width: 100%;            overflow: hidden;            overflow: auto;            -webkit-overflow-scrolling: touch        }        .course-detail .video-list ul[data-v-4e11b9bf] {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            padding: .875rem 0        }        .course-detail .video-list ul li[data-v-4e11b9bf] {            margin-left: .71875rem;            position: relative;            border: 1px solid #e8e8e8;            border-radius: 3px;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            height: 4.0625rem;            overflow: hidden;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            font-size: .78125rem;            -ms-flex-negative: 0;            flex-shrink: 0;            line-height: 1rem;            -webkit-transition: border .5s ease;            transition: border .5s ease        }        .course-detail .video-list ul li img[data-v-4e11b9bf] {            width: 1.78125rem;            height: .84375rem;            position: absolute;            top: 0;            left: 0        }        .course-detail .video-list ul li a[data-v-4e11b9bf] {            -webkit-transition: color .5s ease;            transition: color .5s ease;            padding: 0 .5rem        }        .course-detail .video-list ul li a[data-v-4e11b9bf]:link,        .course-detail .video-list ul li a[data-v-4e11b9bf]:visited {            color: #353535        }        .course-detail .video-list ul li.on[data-v-4e11b9bf] {            border-color: #ff5a05        }        .course-detail .video-list ul li.on a[data-v-4e11b9bf]:link,        .course-detail .video-list ul li.on a[data-v-4e11b9bf]:visited {            color: #ff5a05        }        .article-title[data-v-4e11b9bf] {            color: #353535;            font-weight: 400;            line-height: 1.65rem;            font-size: 1.34375rem        }        .article-info[data-v-4e11b9bf] {            color: #888;            font-size: .9375rem;            margin-top: 1.0625rem        }        .article-content[data-v-4e11b9bf] {            margin-top: 1.0625rem        }        .audio-player[data-v-4e11b9bf] {            width: 100%;            margin: 20px 0        }        .content-box[data-v-4e11b9bf] {            padding: 1px 1.3125rem;            background-color: #fff;            margin-top: .46875rem        }        .to-comment[data-v-4e11b9bf] {            overflow: hidden;            padding-top: 20px;            margin: 0 1.3125rem -10px        }        .to-comment a.button-primary[data-v-4e11b9bf] {            float: right;            height: 20px;            font-size: 12px;            line-height: 20px;            padding: 4px 8px;            cursor: pointer        }        .extra[data-v-4e11b9bf] {            margin-top: .46875rem;            margin-bottom: 67px;            background: #fff;            position: relative        }        .extra .video-comment-box[data-v-4e11b9bf] {            position: absolute;            width: 100%;            top: 0;            left: 0;            z-index: 3;            -webkit-box-sizing: border-box;            box-sizing: border-box;            background: #fff;            padding-left: 1rem;            padding-right: 1rem;            padding-top: .5rem        }        .extra .video-comment-box h3[data-v-4e11b9bf] {            color: #353535;            font-size: .875rem;            line-height: 2rem;            font-weight: 400        }        .extra .comments[data-v-4e11b9bf] {            margin: 0 1.3125rem;            padding-bottom: 50px        }        .extra .comments h2[data-v-4e11b9bf] {            text-align: center;            color: #888;            position: relative;            z-index: 1;            margin-bottom: 14px        }        .extra .comments h2[data-v-4e11b9bf]:before {            border-top: 1px dotted #e8e8e8;            content: "";            position: absolute;            top: 50%;            left: 0;            width: 100%;            z-index: -1        }        .extra .comments h2 span[data-v-4e11b9bf] {            font-size: 15.25px;            font-weight: 400;            padding: 16px 1rem;            background: #fff;            display: inline-block        }        .extra .comments .no-comment[data-v-4e11b9bf] {            text-align: center        }        .extra .comments .no-comment i.icon-cat[data-v-4e11b9bf] {            color: #f5f5f5;            font-size: 100px;            line-height: 1.2;            margin-right: 12px        }        .extra .comments .no-comment .no-comment-text[data-v-4e11b9bf] {            color: #e8e8e8;            font-size: 12.5px;            line-height: 1.6        }        .bottom[data-v-4e11b9bf] {            position: fixed;            bottom: 0;            left: 0;            width: 100%;            height: 67px;            background: #fff;            background-color: #f5f5f5;            z-index: 10        }        .bottom .buy-join[data-v-4e11b9bf],        .bottom[data-v-4e11b9bf] {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center        }        .bottom .buy-join[data-v-4e11b9bf] {            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            height: 48px;            line-height: 48px        }        .bottom .buy-join span[data-v-4e11b9bf] {            line-height: 48px;            margin-left: 5px;            color: hsla(0, 0%, 100%, .5);            font-size: 11px;            text-decoration: line-through        }        .bottom .button-cancel[data-v-4e11b9bf] {            height: 51px;            line-height: 51px        }        .bottom-control[data-v-4e11b9bf],        .bottom-sub[data-v-4e11b9bf] {            width: 100%;            -webkit-box-orient: horizontal;            -ms-flex-direction: row;            flex-direction: row;            -ms-flex-pack: distribute;            justify-content: space-around;            -webkit-box-sizing: border-box;            box-sizing: border-box;            padding: 0 1.3125rem        }        .bottom-control .item[data-v-4e11b9bf],        .bottom-control[data-v-4e11b9bf],        .bottom-sub .item[data-v-4e11b9bf],        .bottom-sub[data-v-4e11b9bf] {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-direction: normal        }        .bottom-control .item[data-v-4e11b9bf],        .bottom-sub .item[data-v-4e11b9bf] {            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1;            -webkit-box-orient: vertical;            -ms-flex-direction: column;            flex-direction: column;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            cursor: pointer        }        .bottom-control .item i[data-v-4e11b9bf],        .bottom-sub .item i[data-v-4e11b9bf] {            color: #353535;            font-size: 1.125rem;            line-height: 1.5rem        }        .bottom-control .item span[data-v-4e11b9bf],        .bottom-sub .item span[data-v-4e11b9bf] {            color: #888;            font-size: 11px        }        .button-subscribe[data-v-4e11b9bf] {            -webkit-box-flex: 1;            -ms-flex: 1;            flex: 1;            height: 69px;            color: #fff;            font-size: 15.25px;            text-align: center;            background-color: #ff5a05;            line-height: 69px;            border-radius: 5px        }        .article-sub-bottom[data-v-4e11b9bf] {            z-index: 2        }        @media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) {            .bottom[data-v-4e11b9bf],            .comments[data-v-4e11b9bf] {                padding-bottom: 34px            }        }        @media (max-width:769px) {            .course-detail .breadcrumb[data-v-4e11b9bf] {                padding: 10px            }        }        @media screen and (min-width:768px) {            .extra .comments[data-v-4e11b9bf],            .to-comment[data-v-4e11b9bf] {                margin: 0 0 -10px            }        }</style><style type="text/css">        .mobile-tips {            width: 100%;            height: 51px;            background: rgba(0, 0, 0, .8);            position: fixed;            top: 0;            left: 0;            z-index: 20;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between;            -webkit-box-sizing: border-box;            box-sizing: border-box;            padding: 0 12px;            -webkit-transition: opacity .35s;            transition: opacity .35s;            opacity: 0;            pointer-events: none        }        .mobile-tips.istop {            opacity: 1;            pointer-events: auto        }        .mobile-tips .mobile-tips-info {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: start;            -ms-flex-pack: start;            justify-content: flex-start        }        .mobile-tips .mobile-tips-info i {            width: 36px;            height: 36px;            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAL30lEQVR4Ae2bBXTbStOG/VGZmVJM6lCZmZnplJmZmZkZ/o+Z4TIzM2O5aW+bimWZY8H7jxTnNvax2xQcnnOerHhm351R1rJsO3/+fG2i7uXLlxsGAoE9ABQUETMM42NFUfqZ/Q/qUMtmrqSnpyfquv4Giqb5yRaTDvVMUWxXrlxpRGK8i6JtAa/XO94Uxaaq6mEUm2nczZs3k2wAXLCs2Cg5jttQbNlvsrfDBCk2W96MhA7d54Qm34R662uoNz6z0Jjz0J0sDL/LPKhwC6J7HMi48g7crx6B8qcJkA6kQNzTGNJuk4ZBGkHa0wTSwVQ4/zkH3nd/aQlmBHyFRxCVRt3z1GY49iVB3l0f8kE7lJPtoPyyF5Rf9QnSN5Nf9oXTanvDcaoD5EOJdE4DKEdaw/vWOcoepuAKogppcP1pOqTtcZD3xUM51x3K//WhtncmZ7PoFXk5iMM6pycc+5vSterC/dwu6F5HwRHE0FR4XjgCeUt9KHsT4DxDnTxt0jNID4vgcoRtwfXw4+g6Fvsoa7Y3RMbXz+Z/QTSXSCXRBdK6KlBOdIVyqhe13e9Cj/vfR9d0nuwGeWN1uP+1DIau5k9BAuwViGvqQt6RAMfJ3pCPdoPjoegedbt17RO9IO9KhONQNxgZ3vwlSEb6hUwxdtop4B6QD3cN0iWM0G2OO9vD6BKhDT2OzrV8SXtSIe9tTaJ48ocgqsxAWlELjm2UGUdoVA91zhkHTaJuJ3J4jcPkc1cKHPs7AYaet4LoaoAyIx7i5oaQKXXlA50gRaUjpP0drWPkg7S+pwXE9XEQV9WAsKoWhJXVIa2sCXFdHKTdzcxj6NjOEa9pbdufbdvBrpC22eH808K8FcTxx2UQVlTNDGhfR6JDWEtkrR/oTG178OvqUoc7wP3kHmR8/yY0Pg2ag4Em34aafh7+z56G8pfl4JfVhLCmNsS9bc1zw65tLYdCMYira8L/9Ut5I4jv4kfgZ5eAtJeC23N35P1dIK1vBOXIYAQuvgtDC9w7+9wOeN/+CwneANLaOLpG53v72dcJwtKqMHyu3BVENwxIWztQyjc0R5toH529HSEsqw7f6799wCm/AuXsVKujJP49/NG+zXZ4/rs1dwXxfPIcZUdpKwBxR9sotLNGTVhUDeq1z/Gw5n76JPhZpchnO/PaUf2aMfELK5GQjtwRxDAMiDt7QFhNqbytLdEmBDGr3UlizC0P9frXeFTmevwIhFmlrWuTj6iI6xLge/lc7gjiT78Mfk6FTOdbiK0mrX9sRbPdTiO4tBb8Hz2BR23yyekQF1YlH+2zfGYjGA8NlLw+BdC12Aviev4cxFllIJtibG4dmY2pUE5OQCxM8/vAzakFeZ09un+KTZxfBeqNr2MriK5p4Dd0hLiiEaQNrSKzqQ2ldSVo4i3Eypyv/gXC1NLU+TYRYmhpteLaRLifPBBbQQIiA35mNQjrm0NY1yIya5KgnJiEWJrq94NbYoewKiF6HOtbwHFoeGwF8V36BPyUshDWNo9AC6vl5lSF75NnEEszCPk3KyHMqBA1DrMVlzeFkeGLnSDuj54GN6kUZQE5XN0MPBFsg8vNwU4sCZW/gVib+70nwE8oBX5Nlu9wmlM2V4UmM7ETxPnS78BOLQNuVTNwq7NIvdMS/KLG1qjE2ryXvwQ7uRL5TDb9R4ShDNK467ETRHnqBAlSjgRJjczKJIjr2ltT81ibn7kBblpN8pkYNR5mWnmo6RdjKMiTx8FPLgd+JWXCiuykZLbLswRRkVPTiYDbef+CsDfBTq1JPu2RYyHYqeURSPsqhiXz7C/BTSgNblky+BBSgiSBn98I+n08wZJe+Qe4YVXu+1mGJ+08mIlVyKedSI4IO6kcZcil2AnievNfYMf9AsLS5BB4q02y4Eb9HKqQszmIVxbAjCoJaUZjGOr9lZnrk1fAjSlp+eRD4shaJqZUgSalx04Q75dvgh31U3BLqOOLg4Qts2N+Ad8Xr+NephoGuPX9wJHA0qZu91VmBiH+fT/YkT8L+o8MP7chDL8ndoJkpF8FO7okuEV2IjEyM2rAcXYx7mXyU78F08dG5ZcIaU2n+xIkYADshn5gp1SKHsfiRBK6R2wnZprfC3ZqbXIYTw5DnN9ZX5IIdvjPoDklRDM3z+D2WOrMnLp0nv2+BVG++5RKrTSd2zToP5Iodrj+tDH2H+6kc8vATawAbmFiZBZR2UyoAMeZJVFKBWCWdgZL9c8tSaFzmkK8D0ECBLO6D7ixpiDJUeNgp9ZA4Nt3Yi+I96u3wQy2gTWdLrBHxhwhOsZ34bPw2ofw37NgBtisGmfn28HMj4e4umOOBDEI6aV/gxtE5y+kc7P8zQ/zT7HxMxvAUDNiL4ie4Qc3oTq4eY3BUSARWUCCzIqjwH+KgCwgy1xpF8EM/Bntq2cdYx07Lx7SqpwJolz+HuzQMuCn16LzSdDI/ml7U7j/vCX3HiEqf9sLfvjPIVBQ/Dw7+PlBaFkgeJOFyeAnVabyqmPde1QA7JKO4EaVgLAwhY7JOj4B0sq7C2IQzqsk5mgaiPHlwS9K+dGnkN0/YcbEjSljTtlzTxDV5QAz9GeZWUId4uZHgWqcHV8O3JL24I4uADuhCnXGHnrMvCYkSIeoghiE8u3HYIbQdaz7TnJ0fyYL4qEcnZ77X0Mo/zkGhmqZNVN3bkIm84LMzQZlCju1FtjRpcxUpv32kP3M3CYQV0QXRNMNpE9PBWv6WpRM54T6CPE9PxHMqFLQJSb3BdFVFey4GuCm1qaAqJNzEh4IZnYTCMvv/vlH/Ou+TPHnJYKdHX6+BS1TDNPi4HnseN59c5dx6wqYHjYKMp6g0Z+VQC1BbdTl8G0zG99TkIDPC2Z0FbBT69J54deMJ0xBmkLaMDTvv+x2v/I3MP1JlLmJFFjTsA5HIUQQypBl7e75X0Z+7LQ1s2XnJZnnhkLb+GkNzGl6/ngdwvmPg2D72qwaZufEmx0NtlnL2QUJbs88jmgMMQeCqH4/zW6rm/ej4PXiM9v5SeAmx0Hjf8hfL8y4/ncCXG8bmLnxYOYkEE0yoXsEa7V3YIkf981uRCXTLmfzkFf/DaYn+Zhvz/Rh/oeb0hi6mJ4/X6nymOVDorBT48yaDtY3MdNsw5iZ1VKGLM2ZIFogQFlSmzKiJtjpDei8ztAVIX+/dJdx/TzEGSnghpUAT6LwVOMcddxiZpBZ2ZjRGFIOBTHN+enrYFNKwP3LtQCMgvFapqHrcD/9S3CDK4IbUwHc7AQiKEw4M0mQZff32FGT2IL54q7mkuH+7zGIUxuBHfoLcFPrkTDZxcgURJxtv/8PYgVJkAyfF3r2jFED8H/9NpznlkGcmwJ+WGlwQ0uAG18N3JSakGZRyehazq8f/Fq14AgiceCOrYSbvR2xyjWZQ8b5D+F9/Z/w0H8njb2eYyHEWzehPPUHU+SCVTJe+kCW3t4G/tgCKN9+Ap/bjfsdUyP4uNAtyxA+fRPpR+ZBWj7QFKNg3kMC7A2wCTZw5txhcjzYXZMgvPh3OM5/DiebDo/XB59mwK9q8Psz4KV1t0OGkv4DpG8+Bvf8X3F76zgwU+xgaZbq3LaoEPwawiFAGFsHwogS4EaWBdfPBnZoWTAT4sDObgZmcWcwK/uANVnSFczsFmAmNQAzrLw1++WGlwI7siQ8v9lUeH4vo/k8cGwdDn7YL8CZD3RmNQY3tS74idXBjasEbkx5C95cnlAd/NQ64Gc2Aj8vERw9jPa/+IfC+Ysq13+OgutlAz8tDtwce+R5iclsO9gZDSHOaw017dvC/ROzjFuXoWweDI4+IXOTa5kTthDYyZQdk+rC+6+DgK4Xjd/cWcJc+wauP22BNC8VwuiKEKc1gGPbMPhe+gN0l1xoJmb3b7oOzcFD97nz4Uy12LRiQUKSVX/bRn8+QbFZ5nQ6J9ocDscwAP4iXyua9vj58+fjbeYfr9e7ytxWhEvls7S0tOakRWOb+YeId7vdcw3DEItgZjxx7dq1ZqRBE6KRKUiD4Er89evXWwUCgTMkDFvYdTBvoHTPmEz9TsgSg6j///oXgzKZqkEyAAAAAElFTkSuQmCC);            background-position: 0 0;            background-repeat: no-repeat;            background-size: contain;            border-radius: 7px        }        .mobile-tips .mobile-tips-info h2 {            font-size: 15px;            color: #fff;            font-weight: 400;            margin-left: 6px        }        .mobile-tips .mobile-tips-info h2 span {            font-size: 11px        }        .mobile-tips a {            width: 72px;            height: 31px;            text-align: center;            border: 1px solid #ff5a05;            border-radius: 3px;            font-size: 13px;            color: #ff5a05;            line-height: 31px        }</style><style type="text/css">        .comment-item {            list-style-position: inside;            width: 100%;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            margin-bottom: 1rem        }        .comment-item a {            border-bottom: none        }        .comment-item .avatar {            width: 2.625rem;            height: 2.625rem;            -ms-flex-negative: 0;            flex-shrink: 0;            border-radius: 50%        }        .comment-item .info {            margin-left: .5rem;            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1        }        .comment-item .info .hd {            width: 100%;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center        }        .comment-item .info .hd .username {            color: #888;            font-size: 15.25px;            font-weight: 400;            line-height: 1.2        }        .comment-item .info .hd .control {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center        }        .comment-item .info .hd .control .btn-share {            color: #888;            font-size: .75rem;            margin-right: 1rem        }        .comment-item .info .hd .control .btn-praise {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            font-size: 15.25px;            text-decoration: none        }        .comment-item .info .hd .control .btn-praise i {            color: #888;            display: inline-block;            font-size: .75rem;            margin-right: .3rem;            margin-top: -.01rem        }        .comment-item .info .hd .control .btn-praise i.on,        .comment-item .info .hd .control .btn-praise span {            color: #ff5a05        }        .comment-item .info .bd {            color: #353535;            font-size: 15.25px;            font-weight: 400;            white-space: normal;            word-break: break-all;            line-height: 1.6        }        .comment-item .info .time {            color: #888;            font-size: 9px;            line-height: 1        }        .comment-item .info .reply .reply-hd {            font-size: 15.25px        }        .comment-item .info .reply .reply-hd span {            margin-left: -12px;            color: #888;            font-weight: 400        }        .comment-item .info .reply .reply-hd i {            color: #ff5a05;            font-size: 15.25px        }        .comment-item .info .reply .reply-content {            color: #353535;            font-size: 15.25px;            font-weight: 400;            white-space: normal;            word-break: break-all        }        .comment-item .info .reply .reply-time {            color: #888;            font-size: 9px        }</style></head><body style=""><div id="app"><div data-v-4e11b9bf="" class="course-detail"><div class="breadcrumb breadcrumb"><span><a href="#" class="title router-link-active">讲堂</a><span class="split iconfont"></span></span><span><span class="title">07 | 	在Docker容器中运行Elasticsearch Kibana和Cerebro</span></span></div><div data-v-4e11b9bf="" class="course-main main" style="position: relative;"><div data-v-4e11b9bf="" class="vplayer" id ="DplayerCont" style="height: 416.25px;"><h2 class="title">                        07 | 	在Docker容器中运行Elasticsearch Kibana和Cerebro</h2></div></div><div data-v-4e11b9bf="" class="course-info" style="margin-top: 0px;"><div data-v-4e11b9bf="" class="course-info-top"><h1 data-v-4e11b9bf="" class="course-title"></h1><i data-v-4e11b9bf="" class="iconfont"></i></div></div><div data-v-4e11b9bf=""><div data-v-4e11b9bf="" class="content-box"><div data-v-4e11b9bf="" id="article-content" class="typo common-content"><div class="text">                            <p><a href="https://github.com/geektime-geekbang/geektime-ELK/tree/master/part-1/2.3-%E5%9C%A8Docker%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%BF%90%E8%A1%8CElasticsearch%2CKibana%E5%92%8CCerebro">课程Demo</a></p><h1>相关阅读</h1><ul>
<li>安装Docker <a href="https://www.docker.com/products/docker-desktop">https://www.docker.com/products/docker-desktop</a></li>
<li>安装 docker-compose <a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></li>
<li>如何创建自己的Docker Image - <a href="https://www.elastic.co/cn/blog/how-to-make-a-dockerfile-for-elasticsearch">https://www.elastic.co/cn/blog/how-to-make-a-dockerfile-for-elasticsearch</a></li>
<li>如何在为Docker Image安装 Elasticsearch 插件 - <a href="https://www.elastic.co/cn/blog/elasticsearch-docker-plugin-management">https://www.elastic.co/cn/blog/elasticsearch-docker-plugin-management</a></li>
<li>如何设置 Docker 网络 - <a href="https://www.elastic.co/cn/blog/docker-networking">https://www.elastic.co/cn/blog/docker-networking</a></li>
<li>Cerebro 源码 <a href="https://github.com/lmenezes/cerebro">https://github.com/lmenezes/cerebro</a></li>
</ul><h1>课件地址</h1><p><a href="https://github.com/geektime-geekbang/geektime-ELK/blob/master/part-1/%E5%88%9D%E8%AF%86Elasticsearch.pdf">初识Elasticsearch</a></p><!-- [[[read_end]]] --></div></div></div></div><div data-v-4e11b9bf="" class="extra" style="margin-bottom: 1rem;"><div data-v-4e11b9bf="" class="comments"><h2 data-v-4e11b9bf=""><span data-v-4e11b9bf="">精选留言</span></h2><ul>                        <li data-v-87ffcada="" class="comment-item"><img src="https://wx.qlogo.cn/mmopen/vi_32/l56HXkqMD4hqDg82yiaTr28GSwB1rCasj7n8M65VbibsJwmDibJnrWpw8o0mYGewH6NeD1wGvU6OGdhDG4nzIa9mA/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">LY</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>10</span></a></div>
	</div>
	<div class="bd">老师您好，我没有修改docker-compose.yaml文件，直接启动的，es启动9200端口正常，但是kibana启动失败，cerebro无法链接 http://elasticsearch:9200。<br>一、kibana启动失败。<br>kibana7           | {"type":"log","@timestamp":"2019-06-25T10:18:08Z","tags":["fatal","root"],"pid":1,"message":"{ Error: Request Timeout after 30000ms\n    at /usr/share/kibana/node_modules/elasticsearch/src/lib/transport.js:355:15\n    at Timeout.<anonymous> (/usr/share/kibana/node_modules/elasticsearch/src/lib/transport.js:384:7)\n    at ontimeout (timers.js:436:11)\n    at tryOnTimeout (timers.js:300:5)\n    at listOnTimeout (timers.js:263:5)\n    at Timer.processTimers (timers.js:223:10)\n  status: undefined,\n  displayName: 'RequestTimeout',\n  message: 'Request Timeout after 30000ms',\n  body: undefined,\n  isBoom: true,\n  isServer: true,\n  data: null,\n  output:\n   { statusCode: 503,\n     payload:\n      { statusCode: 503,\n        error: 'Service Unavailable',\n        message: 'Request Timeout after 30000ms' },\n     headers: {} },\n  reformat: [Function],\n  [Symbol(SavedObjectsClientErrorCode)]: 'SavedObjectsClient/esUnavailable' }"}<br>kibana7           |<br>kibana7           |  FATAL  Error: Request Timeout after 30000ms<br>kibana7           |<br>kibana7 exited with code 1<br><br>二、cerebro 链接 http://elasticsearch:9200 报错<br>Unexpected response status: [503]</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你的ES在我看来，并没有正常启动。或者是 Docker 网络有问题。你可以访问<br><br> http://localhost:9200/_cat/health?v<br>查看集群的正常状态，是否为 Green？</p> <p class="reply-time">2019-06-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/30/8a/b5ca7286.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">业余草</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">为这一小结，写了三篇帮助教程！<br><br>https://www.xttblog.com/?p=4402<br>https://www.xttblog.com/?p=4404<br>https://www.xttblog.com/?p=4408<br><br>辅助大家学习！</div> <span class="time">2019-07-11</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-07-11</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c9/20/523828a2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">zj</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">es集群起不来。报错如下：<br>es7_01            | "stacktrace": ["org.elasticsearch.discovery.MasterNotDiscoveredException: null",<br>es7_01            | "at org.elasticsearch.action.support.master.TransportMasterNodeAction$AsyncSingleAction$4.onTimeout(TransportMasterNodeAction.java:259) [elasticsearch-7.1.0.jar:7.1.0]",<br>es7_01            | "at org.elasticsearch.cluster.ClusterStateObserver$ContextPreservingListener.onTimeout(ClusterStateObserver.java:322) [elasticsearch-7.1.0.jar:7.1.0]",<br>es7_01            | "at org.elasticsearch.cluster.ClusterStateObserver$ObserverClusterStateListener.onTimeout(ClusterStateObserver.java:249) [elasticsearch-7.1.0.jar:7.1.0]",<br>es7_01            | "at org.elasticsearch.cluster.service.ClusterApplierService$NotifyTimeout.run(ClusterApplierService.java:555) [elasticsearch-7.1.0.jar:7.1.0]",<br>es7_01            | "at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:681) [elasticsearch-7.1.0.jar:7.1.0]",<br>es7_01            | "at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]",<br>es7_01            | "at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]",<br>es7_01            | "at java.lang.Thread.run(Thread.java:835) [?:?]"] }<br>es7_01            | {"type": "server", "timestamp": "2019-07-03T08:44:36,151+0000", "level": "WARN", "component": "o.e.c.c.ClusterFormationFailureHelper", "cluster.name": "geektime", "node.name": "es7_01",  "message": "master not discovered or elected yet, an election requires a node with id [-NtPuq1vRzGRi8CKL1st-A], have discovered [] which is not a quorum; discovery will continue using [] from hosts providers and [{es7_01}{Rl60TSJ3SUqhrb8hl0B0-Q}{8iiqMNQMSreXXgbyzWylfg}{172.19.0.3}{172.19.0.3:9300}{ml.machine_memory=2096164864, xpack.installed=true, ml.max_open_jobs=20}] from last-known cluster state; node term 2, last-accepted version 75 in term 2"  }</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker-compose down -v<br>再重新docker-compose up<br>同时记得把docker的memory调大</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">李</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">解决了碰到的几个坑，我是用vagrant启动的虚拟机，然后装的docker<br>1.内存要设置大点，默认内存不够<br>2.max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]编辑 /etc/sysctl.conf，追加以下内容：vm.max_map_count=262144保存后，执行：sysctl -p重新启动，成功。<br><br>现在还有一个问题没有解决，打开kibana,是空白界面<br></div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">感谢分享。动手实践是最好的学习方式，为你👍</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/9a/68/c5c89897.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">renguzi</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">阮老师，您好！谢谢您的辛苦付出。请问两个问题：1 对于ELK新手，请帮忙给出自学ELK，阅读官方文档的路径，比如先看什么，再看什么等。2 对于MySQL、PostgreSQL数据库的日志，是否可以用ELK来分析，并获取其慢SQL的报告。第一个问题，对于我来说，我可以课下自己阅读相关官方文档来打基础，巩固知识，第二问题，我希望学完本系列课程之后，可以自己搭建一套ELK来分析我手上的数据库的慢SQL，给优化带来帮助。再次感谢。</div> <span class="time">2019-07-10</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">有一篇学习路径➕书籍推荐。<br><br>权威指南很不错的，唯一不足就是版本比较老</p> <p class="reply-time">2019-07-10</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c9/20/523828a2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">zj</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">各位同学们，我第一次启动起来了，再启动就失败了。我发现跟中文目录有关！大家把github下载下来的docker-compose.yaml放在其他非中文目录吧！不谢，😄</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">🐂，大家可以试试。我自己是没有在中文目录下使用</p> <p class="reply-time">2019-07-03</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">节示</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">老师用docker-compose.yaml有问题，发现启动完，一会就退出。71和7.2版本都是这个问题，目前没有头绪，请老师给予指导，多谢。<br>启动：<br> Name                Command               State                Ports<br>---------------------------------------------------------------------------<br>cerebro   /opt/cerebro/bin/cerebro - ...   Up      0.0.0.0:9000->9000/tcp<br>es7_01    /usr/local/bin/docker-entr ...   Up      0.0.0.0:9200->9200/tcp, 9300/tcp<br>es7_02    /usr/local/bin/docker-entr ...   Up      9200/tcp, 9300/tcp<br>kibana7   /usr/local/bin/kibana-docker     Up      0.0.0.0:5601->5601/tcp<br>过几十秒后：<br>cerebro   /opt/cerebro/bin/cerebro - ...   Up       javascript:;  0.0.0.0:9000->9000/tcp<br>es7_01    /usr/local/bin/docker-entr ...   Up         0.0.0.0:9200->9200/tcp, 9300/tcp<br>es7_02    /usr/local/bin/docker-entr ...   Exit 137<br>kibana7   /usr/local/bin/kibana-docker     Up         0.0.0.0:5601->5601/tcp<br>错误日志：<br>{"type": "server", "timestamp": "2019-06-27T09:56:02,465+0000", "level": "WARN", "component": "o.e.d.SeedHostsResolver", "cluster.name": "geektime", "node.name": "es7_02",  "message": "failed to resolve host [es7_01]" ,<br><br>.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]",<br>es7_02            | "at java.lang.Thread.run(Thread.java:835) [?:?]"] }<br>es7_02            | {"type": "server", "timestamp": "2019-06-27T09:56:03,496+0000", "level": "WARN", "component": "o.e.d.SeedHostsResolver", "cluster.name": "geektime", "node.name": "es7_02",  "message": "failed to resolve host [es7_01]" ,<br>es7_02            | "stacktrace": ["java.net.UnknownHostException: es7_01: Name or service not known",<br>es7_02            | "at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) ~[?:?]",<br><br></div> <span class="time">2019-06-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/f6/2d/5949c425.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">大匡</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">kibana的监控不能满足课程需求吗？为何还特意选择cerebro? </div> <span class="time">2019-06-26</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">CEREBRO的有些界面比较方便用户从集群的角度理解一些内部的分布式工作机制。并不是用来做单纯的监控。</p> <p class="reply-time">2019-06-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/45/f0/342750e5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">老苏gogogo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">老师您好，根据您的docker-compose.yml文件可以启动双节点的es和kibana/cerebro。但是es中没有数据。您的示例数据从哪里导入进去？</div> <span class="time">2019-06-26</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">在Kibana安装和界面概览这一节，有介绍。你可以通过点kiban的首页，看到有一个导入数据的功能。kibana提供了：电子商务，飞机航班和日志信息三个数据集。点击页面就可以导入数据了。<br><br>或者在logatash 导入数据那一节，通过运行logstash -f yourconfig.cofig，导入电影数据</p> <p class="reply-time">2019-06-26</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/9a/68/c5c89897.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">renguzi</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">看到有同学说，卡在用docker环境启停ELK。我把在CentOS上的操作流程记录一下：<br>1 docker安装忽略；<br><br>2 安装docker-compose<br>a 参考链接：https://docs.docker.com/compose/install/#install-using-pip<br>b 切到Linux标签页，其实就是根据文档执行这2个命令：sudo curl -L "https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose<br>以及：sudo chmod +x /usr/local/bin/docker-compose<br><br>3 配置OS的/etc/sysct.conf文件；通过命令：grep vm.max_map_count /etc/sysctl.conf检查vm.max_map_count=262144是否设置。如果返回为空，或者该参数值小于最低要求的262144值。则直接在/etc/sysctl.conf加入或者修改vm.max_map_count=262144。然后，记得执行sysctl -p使其生效。为什么要设置这个参数，因为，你可能会遭遇到docker-compose up 报错，导致另外一个es的instance启动不了，我在实验过程中，从docker-compose up命令窗口上看到es7_02启动不了，提示要修改该内核参数。参考链接：https://www.elastic.co/guide/en/elasticsearch/reference/7.2/docker.html#docker-cli-run-prod-mode<br><br>4 mkdir 7.x-docker-2-es-instances<br><br>5 cd 7.x-docker-2-es-instances<br><br>6 vi docker-compose.yaml 把老师的https://github.com/geektime-geekbang/geektime-ELK/tree/master/part-1/2.3-%E5%9C%A8Docker%E5%AE%B9%E5%99%A8%E4%B8%AD%E8%BF%90%E8%A1%8CElasticsearch%2CKibana%E5%92%8CCerebro/7.x-docker-2-es-instances 文件内容，一字不差的填进去<br><br>7 在当前路径下，执行 docker-compose up 第一次执行，会根据配置文件下载images，比较慢，等着就好了<br>8 另外一个命令行窗口，可以执行docker images 或者docker ps 来查看镜像，以及运行的进程。<br>[root@centos-master 7.x-docker-2-es-instances]# docker images<br>docker.elastic.co/kibana/kibana                 7.1.0               714b175e84e8        7 weeks ago         745 MB<br>...内容超长..省略...<br>[root@centos-master 7.x-docker-2-es-instances]# docker ps<br>CONTAINER ID        IMAGE                                                 COMMAND                  CREATED            <br>...内容超长..省略...<br>9 命令行查看elasticsearch集群健康信息：<br>[root@centos-master 7.x-docker-2-es-instances]# curl http://127.0.0.1:9200/_cat/health<br>1562729637 03:33:57 geektime green 2 2 4 2 0 0 0 0 - 100.0%<br>[root@centos-master 7.x-docker-2-es-instances]#  <br>10 上面是我的操作步骤和遇到问题的情况，供参考。</div> <span class="time">2019-07-10</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-07-10</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">绅士</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">看到这里已经卡了两天了，这两天一直在看docker的东西，docker-compose，Docker Image，这些目前为止还是不太清楚是什么，我用的mac ,感觉跟老师的不一样啊</div> <span class="time">2019-07-04</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你可以把碰到的具体问题列出来。看看大家能否帮助你。<br><br>另外，不是必需使用docker-compose 运行。使用docker的好处是当年在开发机器上管理多套环境。<br><br>这个问题如果你一下解决不了，完全可以用命令行启动es实例</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/f0/73/27885580.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Sunshine.</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">当我下载Kibana镜像时候每次都超时，国内访问有限制？</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">应该只是速度慢，可以尝试找一下国内的镜像</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/e8/dc/32e78f02.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">乐凡</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，试了好多次一直处于这种状态啊！不知道怎么解决。。。。<br>kibana7           | {"type":"log","@timestamp":"2019-07-01T13:30:20Z","tags":["license","warning","xpack"],"pid":1,"message":"License information from the X-Pack plugin could not be obtained from Elasticsearch for the [data] cluster. Error: Request Timeout after 30000ms"}<br></div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">请确保为docker分配了足够的内存，cpu和磁盘空间，然后docker-compose down -v 后 再测试一下</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/6f/0d/968bf8d4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">严小白</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，您好，能否给出一个关于不同物理机器之间集群的 dock-compose.yml 的配置文件。而不是在一个物理机器上，跑了两个 es 的实例，谢谢！</div> <span class="time">2019-06-28</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker compose主要就是用在单台机器上的。多机器的，因该需要docker swam或者是kubernetes。k8s在第三部分会有讲解</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">节示</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">es7_02            | {"type": "server", "timestamp": "2019-06-27T09:40:35,984+0000", "level": "WARN", "component": "o.e.d.SeedHostsResolver", "cluster.name": "geektime", "node.name": "es7_02",  "message": "failed to resolve host [es7_01]" ,<br>es7_02            | "stacktrace": ["java.net.UnknownHostException: es7_01",<br>es7_02            | "at java.net.InetAddress$CachedAddresses.get(InetAddress.java:797) ~[?:?]",<br>es7_02            | "at java.net.InetAddress.getAllByName0(InetAddress.java:1505) ~[?:?]",<br>es7_02            | "at java.net.InetAddress.getAllByName(InetAddress.java:1364) ~[?:?]",<br>es7_02            | "at java.net.InetAddress.getAllByName(InetAddress.java:1298) ~[?:?]",<br>es7_02            | "at org.elasticsearch.transport.TcpTransport.parse(TcpTransport.java:528) ~[elasticsearch-7.2.0.jar:7.2.0]",<br>es7_02            | "at org.elasticsearch.transport.TcpTransport.addressesFromString(TcpTransport.java:470) ~[elasticsearch-7.2.0.jar:7.2.0]",<br>es7_02            | "at org.elasticsearch.transport.TransportService.addressesFromString(TransportService.java:754) ~[elasticsearch-7.2.0.jar:7.2.0]",<br>es7_02            | "at org.elasticsearch.discovery.SeedHostsResolver.lambda$resolveHostsLists$0(SeedHostsResolver.java:141) ~[elasticsearch-7.2.0.jar:7.2.0]",<br>es7_02            | "at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]",<br>es7_02            | "at org.elasticsearch.common.util.concurrent.ThreadContext$ContextPreservingRunnable.run(ThreadContext.java:688) ~[elasticsearch-7.2.0.jar:7.2.0]",<br>es7_02            | "at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]",<br>es7_02            | "at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]",<br>es7_02            | "at java.lang.Thread.ru</div> <span class="time">2019-06-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/76/c4/a377fbdd.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">芬达</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师的docker-compose.yml文件在哪里可以下载？</div> <span class="time">2019-06-27</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">https://github.com/onebirdrocks/geektime-ELK<br><br>进入 Part-1 目录，找到相应的章节</p> <p class="reply-time">2019-06-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/b7/ae/a25fcb73.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">colin</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，课程的实验，是用docker还是本地好一点</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">都可以，你如果只用一个版本的，用本机版也可以。就是要分别启动es和kiban而已。</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/15/63/85/9ccf1b19.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">草帽路飞</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师您好。有两个问题：1)请问现在生产中对ELK这类工具有没有容器化使用？或者容器化的趋势？<br>2)celebro 应该是替代了head这个插件吧？</div> <span class="time">2019-06-24</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">关于容器化，目前，ebay正把ES集群从openstack迁往k8s。从上游看，Elastic公司除了开源了helm，还在上个月开源了eladticsearch的k8s operator，方便用户在k8s上部署和管理es的集群。关于插件，很难说谁取代谁，更新的频率，用户的使用习惯，都是挺重要的考量因素。从趋势上看，越来越多的功能都会整合进kibana的界面。</p> <p class="reply-time">2019-06-24</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/ac/62/37912d51.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">东方奇骥</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我系统是Ubuntu， 安装时遇到了如下两个问题，希望能帮到大家：<br>1.Docker权限问题，ERROR: Couldn't connect to Docker daemon at http+docker://localunixsocket - is it running<br>1、如果还没有 docker group (cat /etc/group | grep docker)就添加一个<br>sudo groupadd docker<br>2、将用户加入该 group 内。然后退出并重新登录就生效啦。<br>sudo gpasswd -a ${USER} docker<br>3、重启 docker 服务<br>sudo service docker restart<br>4、切换当前会话到新 group 或者重启 X 会话<br>newgrp - docker<br>注意:最后一步是必须的，否则因为 groups 命令获取到的是缓存的组信息，刚添加的组信息未能生效，所以 docker images 执行时同样有错。`<br>然后退出当前用户比如切换为root，再次切换为luoji。然后执行docker-compose up -d就ok了。<br>su root<br>su luoji<br><br>2.Docker下载速度太慢<br>修改 /etc/docker/daemon.json 文件并添加上 registry-mirrors 键值。<br>{<br>  "registry-mirrors": ["https://docker.mirrors.ustc.edu.cn"]<br>}<br>然后再重启Docker服务：sudo service docker restart<br>镜像也可以找别的更快的，但实测这个中科院的比阿里云的快。</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/ed/ae/199c3425.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">aQ.</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我的服务内存比较小只有2g，单启动es，在单节点的情况下是可以启动的。但是docker-compose启动的时候，总是提示"es72_01 exited with code 137"，down/up了好多次也没用</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLHZRjM2icgjbQ0ULXVKIcHibwFs79PlCFQvicgEoicDF3I5RQzCCLu0KmbUHPfzvhRHgJzGt6s9cr6nQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_83247e</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师能把每个单独启动容器的命令发出来吗?docker compose 根本安装不了</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTLBMCkrUrutlWAOOUS9LVNsAmgWP3O45ndjVl8lWtnQMMHc8R5gpV2DBauFdjB5faeS0O2v2lXHEg/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">郦凯颖</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">Cerebro /səˈriːbroʊ/;  求改发音，听着别扭，谢谢！</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/7c/b5/4a7a2bd4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Sunqc</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">问题是学这门课程环境和你的不一致，感觉后续学习挺难的，windows docker环境都搭建不起来</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/48/24/abb7bfe3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Kyne(黄凯)</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">关于错误：<br>master not discovered yet, this node has not previously joined a bootstrapped (v7+) cluster, and this node must discover master-eligible nodes [es72_01, es72_02] to bootstrap a cluster: have discovered []; discovery will continue using [] from hosts providers<br>通过查看文档与测试后发现：docker-compose.yaml文件中es部分的参数影响es集群找不到相关的node<br>- network.publish_host=elasticsearch<br>注释掉后即可启动成功，且cerebro也能连接</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/22/8a/93ee037f.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Oren</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker-compose.yaml下载很慢。不知道是不是没有翻墙的原因</div> <span class="time">2019-07-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/e6/ac/e14bde09.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">xsg</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师你好，es集群启动不起来，日志信息如下，可以帮我看一下是什么原因吗？<br>es72_01           | {"type": "server", "timestamp": "2019-07-13T08:08:06,396+0000", "level": "WARN", "component": "o.e.c.c.ClusterFormationFailureHelper", "cluster.name": "geektime", "node.name": "es72_01",  "message": "master not discovered yet, this node has not previously joined a bootstrapped (v7+) cluster, and this node must discover master-eligible nodes [es72_01, es72_02] to bootstrap a cluster: have discovered []; discovery will continue using [] from hosts providers and [{es72_01}{V7nJJP8zRqCD1yTxHgnsLg}{3tJOM7jVQAmjTfFajh8gSg}{elasticsearch}{172.21.0.3:9300}{ml.machine_memory=3973754880, xpack.installed=true, ml.max_open_jobs=20}] from last-known cluster state; node term 0, last-accepted version 0 in term 0"  }<br>es72_02           | {"type": "server", "timestamp": "2019-07-13T08:08:16,201+0000", "level": "WARN", "component": "o.e.c.c.ClusterFormationFailureHelper", "cluster.name": "geektime", "node.name": "es72_02",  "message": "master not discovered yet, this node has not previously joined a bootstrapped (v7+) cluster, and this node must discover master-eligible nodes [es72_01, es72_02] to bootstrap a cluster: have discovered []; discovery will continue using [] from hosts providers and [{es72_02}{ZBIfN6PBRSCXnGe1NIkWzw}{iEFtMA8NRdq8Arl2ODAuig}{elasticsearch}{172.21.0.3:9300}{ml.machine_memory=3973754880, xpack.installed=true, ml.max_open_jobs=20}] from last-known cluster state; node term 0, last-accepted version 0 in term 0"  }</div> <span class="time">2019-07-13</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">尝试调大docker资源。docker-compose down -v 后再启动试试？</p> <p class="reply-time">2019-07-13</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/ae/31/2c8a3a66.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">待时而发</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，decker必须在linux或者mac环境安装吗？我看官网有window安装包，下载完之后，无法打开</div> <span class="time">2019-07-12</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">windows是应该可以安装的。相对来说可能问题比linux上多一些</p> <p class="reply-time">2019-07-12</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4f/26/f21afb83.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖色浮余生</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">问题解决😅😅，运行了一下docker－compose down －v，然后重新up，就可以了，不懂为什么报错es选主不成功。搞了俩小时。老师这个－v的作用是什么呢</div> <span class="time">2019-07-12</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">down -v 是删除卷的意思</p> <p class="reply-time">2019-07-12</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4f/26/f21afb83.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖色浮余生</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我这边之前运行时没有问题的，今天突然运行不起来了，kibana运行不起来，es可以运行，但是健康状态报错是master_not_discovered_exception。status状态为503。我感觉应该是docker的网络问题，但是不知道怎么解决。</div> <span class="time">2019-07-12</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker-compose down -v 然后再运行。尝试着把docker的内存和磁盘都加大。资源不够时会导致一些奇怪的现象</p> <p class="reply-time">2019-07-12</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/3e/2f/5a9f3680.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Gedeon</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师 请问 docker-compose  restart重启后 kibana 和cerebro就连接不上elaeticsearch了 必须得dockr-compose down -v 吗 然后 up吗 这样数据还得重新导入吧？</div> <span class="time">2019-07-11</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">对 删除卷以后，会导致数据丢失。你尝试多分配一些资源给docker，或者将es的jvm调低，看看是否能解决这个问题<br></p> <p class="reply-time">2019-07-12</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4a/df/a3ee01da.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">sailor</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">报错：{"error":{"root_cause":[{"type":"master_not_discovered_exception","reason":null}],"type":"master_not_discovered_exception","reason":null},"status":503}<br>System:<br>Kernel Version: 4.15.0-54-generic<br>Operating System: Ubuntu 18.04.2 LTS<br>OSType: linux<br>Architecture: x86_64<br>解决办法：<br>参考 https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html<br>```<br>elasticsearch:<br>    image: docker.elastic.co/elasticsearch/elasticsearch:7.2.0<br>    container_name: es_01<br>    environment:<br>      - cluster.name=escluster<br>      - node.name=es_01<br>      - bootstrap.memory_lock=true<br>      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"<br>      - discovery.seed_hosts=es_02<br>        #- network.publish_host=elasticsearch             # 注释掉改行，elasticsearch2中同样注释掉改行<br>      - cluster.initial_master_nodes=es_01,es_02<br>```<br>具体原因未知，修改后 ES Cluster 启动正常<br>$ curl http://127.0.0.1:9200/_cat/health<br>1562849872 12:57:52 escluster green 2 2 8 4 0 0 0 0 - 100.0%<br></div> <span class="time">2019-07-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/ec/3d/df27ce11.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">小不六</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd"># docker-compose up<br>Starting cerebro ... done<br>Starting es7_01  ... done<br>Starting es7_02  ... done<br>Starting kibana7 ... done<br>Attaching to es7_02, es7_01, cerebro, kibana7<br>es7_02            | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.<br>es7_01            | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.<br>Exception in thread Thread-13:<br>Traceback (most recent call last):<br>  File "site-packages/urllib3/connectionpool.py", line 384, in _make_request<br>  File "<string>", line 2, in raise_from<br>  File "site-packages/urllib3/connectionpool.py", line 380, in _make_request<br>  File "http/client.py", line 1331, in getresponse<br>  File "http/client.py", line 297, in begin<br>  File "http/client.py", line 258, in _read_status<br>  File "socket.py", line 586, in readinto<br>socket.timeout: timed out<br> 不知道问题出在哪里？</div> <span class="time">2019-07-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/4d/54/9c214885.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">kylexy_0817</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">ubuntu18.04上报的错，还没头绪如何解决。<br>ERROR: for es7_01  Cannot start service elasticsearch: ttrpc: client shutting down: read unix @->@/containerd-shim/moby/5f91762c93d95cec33fd734204a640e3b90db2bab2cc27200494d91c6ed977b0/shim.sock: read: connection reset by peer: unknown<br><br>ERROR: for elasticsearch  Cannot start service elasticsearch: ttrpc: client shutting down: read unix @->@/containerd-shim/moby/5f91762c93d95cec33fd734204a640e3b90db2bab2cc27200494d91c6ed977b0/shim.sock: read: connection reset by peer: unknown<br><br>ERROR: for elasticsearch2  Cannot start service elasticsearch2: ttrpc: client shutting down: read unix @->@/containerd-shim/moby/41fe695ab1131670fbb17d133b5b37f4400288d9e1fba95826f70a1a0c2626d3/shim.sock: read: connection reset by peer: unknown</div> <span class="time">2019-07-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/76/9a/5b80c066.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">onebird</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">https://time.geekbang.org/column/article/104136?from=timeline&isappinstalled=0</div> <span class="time">2019-07-10</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/44/97/d32cdd42.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">樱桃老丸子</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">sudo sysctl -w vm.max_map_count=262144</div> <span class="time">2019-07-10</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-07-10</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/62/1f/89137ea1.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Zero</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">es 怎么同步 数据库的数据呢</div> <span class="time">2019-07-10</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以用logstash的jdbc connector</p> <p class="reply-time">2019-07-11</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">追梦少年</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问老师 我用docker-compose up执行，Elasticsearch启动不了，要怎么办呢？<br>es7_01            | {"type": "server", "timestamp": "2019-07-09T16:21:39,780+0000", "level": "WARN", "component": "o.e.c.c.ClusterFormationFailureHelper", "cluster.name": "elk", "node.name": "es7_01",  "message": "master not discovered yet, this node has not previously joined a bootstrapped (v7+) cluster, and this node must discover master-eligible nodes [es7_01, es7_02] to bootstrap a cluster: have discovered []; discovery will continue using [172.18.0.5:9300] from hosts providers and [{es7_01}{BxudLAcZTMufrCeGu1BTtg}{zLXsHEOZRXSCyAJO2MD5Ag}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=3973750784, xpack.installed=true, ml.max_open_jobs=20}] from last-known cluster state; node term 0, last-accepted version 0 in term 0"  }<br></div> <span class="time">2019-07-10</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">为docker多分配一些内存？</p> <p class="reply-time">2019-07-11</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/6d/cf/ab9fc5d4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">jason</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我用的是windows系统，docker内存设置了9G，通过更改docker-compose.yaml文件中kibana容器的参数，把超时时间从30000改成了90000（- ELASTICSEARCH_REQUESTTIMEOUT=90000），运行之后报如下错误<br>FATAL  [master_not_discovered_exception] null :: {"path":"/.kibana","query":{},"statusCode":503,"response":"{\"error\":{\"root_cause\":[{\"type\":\"master_not_discovered_exception\",\"reason\":null}],\"type\":\"master_not_discovered_exception\",\"reason\":null},\"status\":503}"}<br></div> <span class="time">2019-07-09</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/d7/98/630fa899.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">抢地瓜的阿姨</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">这一章节卡住了，希望老师能具体演示一遍！！！！</div> <span class="time">2019-07-09</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/d7/98/630fa899.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">抢地瓜的阿姨</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">进入 7.x-docker-2-es-instance目录<br><br>这里怎么进入啊，老师</div> <span class="time">2019-07-09</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">https://github.com/onebirdrocks/geektime-ELK<br><br>请下载github中的代码</p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/03/01/62b32acf.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">王飞洋</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，您好，我这边也是第一次通过docker-compose up可以起来，然后关闭后，下一次就不能正常启动，能帮忙看下嘛</div> <span class="time">2019-07-09</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">很多同学碰到问题貌似都和机器资源的分配有关，尝试增加内存和存储，然后 docker-compose down -v后再次启动<br></p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/58/fc/062ec8a1.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">追马</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">加大内存到4G就可以了,谢谢解答</div> <span class="time">2019-07-09</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/91/8a/e7d6c8c3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">SirNicholas</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">你这是运行在mac上还是linux上面的呢？给这些链接有意思？学习es不就是环境搭建最费时间，你一两分钟就结束了。碰到的坑谁来解决？至少你也的自己操作一遍的吧</div> <span class="time">2019-07-09</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">一节视频课程的时间是10分钟。每个同学的基础不一样。所以在讲课中内容肯定会有取舍。我把一些命令在每个平台上都做操作一遍，我相信，也会有很多同学会不满意。至少目前还有很多人觉得第一部分的内容讲的过于简单了。关于在生产环境中配置，后续会有所介绍。本机搭建es，其实基本就是开箱即用的，不需要太多配置。<br><br>你具体碰到了问题可以在这里问，我会尝试解答，我也看到了一些同学在这里相互交流分享一些解决问题的心得，</p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">19801254603</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker-compose up启动报错：<br>ssl error:tlsv1_alert_protocol_uersion  t1sv1 alert protocol version(ssl_c:661)，能帮忙看下吗<br><br></div> <span class="time">2019-07-08</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/58/fc/062ec8a1.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">追马</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">mac 下第一次可以正常启动,使用down 命令停止后,第二次 启动旧报错 kibana <br>es 节点正常</div> <span class="time">2019-07-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">增加docker资源，例如4g内存</p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/17/e8/f74f4a59.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">patience</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">如果有人下载镜像慢，可以试试，目前只弄了这几个<br>docker pull registry.cn-beijing.aliyuncs.com/liyongjian5179/kibana:7.1.0<br>docker pull registry.cn-beijing.aliyuncs.com/liyongjian5179/kibana:7.2.0<br>docker pull registry.cn-beijing.aliyuncs.com/liyongjian5179/elasticsearch:7.1.0<br>docker pull registry.cn-beijing.aliyuncs.com/liyongjian5179/elasticsearch:7.2.0</div> <span class="time">2019-07-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-07-08</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/b2/34/3af7f59c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">一叶知秋</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，您好！<br>参考您的docker-compose.yml文件，在本地搭建了elasticsearch的环境。只把elasticsearch、kibana的版本改成了7.1.1，把elasticsearch的两个节点挂载的目录映射到了指定的文件夹。<br>首次使用docker-compose up启动后，elasticsearch几点、集群以及kibana服务都能够正常启动。但是当服务停止后，再次使用start启动 或者先down卸载再使用up启动服务，都无法正常使用。kibana会在运行一会儿后自动退出。elasticsearch只有第一个节点能启动，第二个节点可以启动但是集群无法正常加载。日志中会有："stacktrace": ["org.elasticsearch.discovery.MasterNotDiscoveredException: null" 错误信息。<br>请教下老师，问题可能出在哪里？</div> <span class="time">2019-07-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">尝试调大docker 内存磁盘等资源。down -v后重新运行</p> <p class="reply-time">2019-07-08</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">asdf100</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">使用docker如何实现es集群的高可用，现在只有一个ed的master实例暴露了9200端口，如果这个实例挂掉的话整个服务就挂了，另一个master无法接管服务，没有9200端口，这时如何解决？</div> <span class="time">2019-07-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">后续课程有讲。docker只是方便大家本机学习。<br><br>真的生产环境，一个机器一个es，都用9200端口，前端配置LB，实现高可用</p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">honnkyou</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">--------------------<br>{"error":{"root_cause":[{"type":"master_not_discovered_exception","reason":null}],"type":"master_not_discovered_exception","reason":null},"status":503}<br>--------------------<br>http://localhost:9200/_cat/health?v 检查的结果如上，<br>设置memer 为4G，Swap 也设置了2G后还是没能解决。</div> <span class="time">2019-07-07</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">downlod -v也不行？真一下解决不了。不使用docker也完全不影响后续的学习。后续我改命令行演示一些分布式特性了<br></p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">honnkyou</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">------------------------------<br>es72_02           | {"type": "server", "timestamp": "2019-07-07T11:23:42,670+0000", "level": "WARN", "component": "o.e.c.c.ClusterFormationFailureHelper", "cluster.name": "geektime", "node.name": "es72_02",  "message": "master not discovered yet, this node has not previously joined a bootstrapped (v7+) cluster, and this node must discover master-eligible nodes [es72_01, es72_02] to bootstrap a cluster: have discovered []; discovery will continue using [] from hosts providers and [{es72_02}{MF38uz9OTUulZooQCWYApg}{S6h3uXSLRVCtvbNuyHnpZw}{elasticsearch}{172.18.0.5:9300}{ml.machine_memory=4139413504, xpack.installed=true, ml.max_open_jobs=20}] from last-known cluster state; node term 0, last-accepted version 0 in term 0"  }<br>------------------------------<br>老师，链接时也报503错误。<br>docker后一直报这个错，把memer 调到4G，Swap 2G还是没能解决。</div> <span class="time">2019-07-07</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/8b/4b/503eaecc.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">skybird</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker-compose up 报错:<br>ERROR: error pulling image configuration: Get https://d2iks1dkcwqcbx.cloudfront.net/docker/registry/v2/blobs/sha256/12/12ad640a1ec0484ee7eac455e6b924fb01a1fc88ca01d5a6d90cfa7554ab4568/data?Expires=1562485673&Signature=XBhx2h8gv7RSO4TSR6NlviG8PdlkXJc00-arKuii3N0b2~ffTkCwIaabMfR78lrsQqeApxMGBUu2Qchn~mJdmI-D8~YU4apreUCRfVCOpawTs4wuvKPN68WuSWTXWL4BJ4eKS4p976YpYS5JxWXZl1tj9r9DykcagGobeWeDqSbjvI~MDa-TFvki-ONJoKf15wkn9pE8f1QPR6LOsnzoDFGL7qApeYFFsqsKhjfJxb4FnpZGJ8oMw8GfpQeuBRw~mR1oqTa6G9xyB1KL0XmVpUGgLYvqA-GyRU7nBDxpUbXLLpBxRLjs-yV6tXs5N3jDdhM3AOIGFEP6KwPu2dhRBw__&Key-Pair-Id=APKAIVAVKHB6SNHJAJQQ: read tcp 10.0.173.35:39830->99.86.183.60:443: read: connection reset by peer<br></div> <span class="time">2019-07-07</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/67/64/99bd16c8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Evildoer</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">呼呼 跟大家分享一下我的经验，我是在Centos7的一台小服务器上部署的docker，然后直接猴急的执行了docker-compose up。<br>然后就跟大家一样了，访问Kibana提示没准备好，然后用docker ps -a发现挂了两个ES容器，用docker logs 容器名查看ES日志发现打印内存不足<br>> max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]<br>百度后看到有两种方式解决：<br>1. `sysctl -w vm.max_map_count=262144` # 一次性生效 重启将失效<br>2. 另一种就是 `echo 'vm.max_map_count=262144'>/etc/sysctl.conf  & sysctl -p`<br>Tips: 两种方式都需要使用root执行<br>处理完以后使用 `docker-compose down -v & docker-compose up` 重新启动docker，可能是机器性能问题，我启动后等了差不多一分钟才能成功登陆Kibana，好了，祝大家好运。<br><br><br><br><br></div> <span class="time">2019-07-07</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-07-08</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/49/71/aa15a4fc.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">null</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我在docker官网上看到<br>There is no docker0 bridge on Windows<br>Because of the way networking is implemented in Docker Desktop for Windows, you cannot see a docker0 interface on the host. This interface is actually within the virtual machine.<br><br>官方说windows没有这个 bridge   那应该怎么解决这个</div> <span class="time">2019-07-07</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以考虑装虚拟机安装linux。这个问题不是blocking issue，介绍docker只是方便大家本机安装多个es版本。如果卡壳太久，就暂时跳过吧。如果愿意继续钻研，也没问题，毕竟介绍一些工具的初衷也是为了拓宽大家的知识储备</p> <p class="reply-time">2019-07-11</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/49/71/aa15a4fc.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">null</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师你好，我是使用的windows 10 系统  docker 版本是18.09.2  我拿到你的docker-compose.yaml文件执行的 docker-compose up 命令的时候   提示<br><br>Creating network "elasticsearch-720_es7net" with driver "bridge"<br>ERROR: could not find plugin bridge in v1 plugin registry: plugin not found<br><br><br>请问一下是因为什么呢</div> <span class="time">2019-07-07</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">有人说是windows不支持bridge模式，我具体没用在windows下测试过，不知道是不是这个原因引起的</p> <p class="reply-time">2019-07-11</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://thirdwx.qlogo.cn/mmopen/vi_32/IZd3jUCN7twoXUE89syewHM8MvWJVDQdoSSlIs07R8bXxX6CWcAvaTodcjU1c3no4o3hAeibg5aUn59YvhdWEQQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">HotSpotVM</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师请问下在启动单节点的时候bin/elasticsearch -E node.name=node0 -E cluster.name=geektime -E path.data=node0_data  出现了如下错误请问是怎么回事？<br>“org.elasticsearch.tools.java_version_checker.JavaVersionChecker<br>ԭ▒▒: java.lang.ClassNotFoundException: org.elasticsearch.tools.java_version_checker.JavaVersionChecker”<br>ES版本：7.1.0<br>系统版本：win10<br>本机jdk版本：openjdk11<br></div> <span class="time">2019-07-06</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/0f/80/293def91.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">yoyo</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">文件不能放在中文目录 否则第二次kibana启动不了</div> <span class="time">2019-07-06</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">谢谢你的发现</p> <p class="reply-time">2019-07-07</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_3b2370</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">通过老师提供的docker-compose.yaml  提示错误：unauthorized: authentication required，请问怎么解决？</div> <span class="time">2019-07-06</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">image都下载了嘛？docker-compose很多同学碰到的问题，都和docker分配资源不足引起的，你尝试着加大一些cpu和磁盘空间。将内存设置成4G，docker-compose down -v后再试试？</p> <p class="reply-time">2019-07-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_3b2370</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，拉去docker镜像极其困难，是否可以提供相关镜像共下载？</div> <span class="time">2019-07-06</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">已经有同学提供了镜像。你查看一下留言</p> <p class="reply-time">2019-07-08</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4f/26/f21afb83.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖色浮余生</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">为什么我的启动成功没有数据啊</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">启动后是没数据的。有两个方式加入数据<br>1. 在kiban首页，选择导入sample数据<br>2. 通过logstash导入相关数据<br><br>细节可以看一下课程中的视频</p> <p class="reply-time">2019-07-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/53/13/8de56677.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">你们最爱的小杰</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，为什么每次只有执行docker-compose down -v才能启动成功</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你尝试着增加一下docker的资源？再试一下？</p> <p class="reply-time">2019-07-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c7/47/30d4b61e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">不是云不飘</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">启动成功，之间碰到个问题，docker分配的内存需要配置大点，原先2G不够用，后面配置到4G就很顺利的起来了。docker的相关知识还需要进一步了解。</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/c3/8f/1c63c1bb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">kmzcm</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">运行命令报错：ERROR: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)    我的网络是正常的，请问是什么问题？</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你可以查一下 registry-1.docker.io 是否可以连通？</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4f/26/f21afb83.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖色浮余生</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">使用Docker-compose up 启动后报错 <br>ERROR: Couldn't connect to Docker daemon at http+docker://localhost - is it running?<br><br>If it's at a non-standard location, specify the URL with the DOCKER_HOST environment variable<br>我得问题是，Centos 7 版本下在 /etc/default/docker 找不到这个文件。<br>解决方式：<br>打开 docker.service <br>sudo vim /lib/systemd/system/docker.service<br>在[Service] 栏中 <br>将<br>ExecStart=/usr/bin/dockerd -H fd://    or   ExecStart=/usr/bin/docker -H fd://<br>修改为<br>ExecStart=/usr/bin/dockerd  -H fd:// $DOCKER_OPTS<br>将这一行添加到上面提到的上面<br>EnvironmentFile=-/etc/default/docker   <br>重启服务 就OK了<br>sudo systemctl daemon-reload<br>sudo service docker restart<br></div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍！</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/a9/b8/abe2c084.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">不让天使落泪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，有个疑问：在cerebro中直接配置的是 - -Dhosts.0.host=http://elasticsearch:9200。是配置在docker中配置了host的吗？</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">嗯，这个是docker中配置的网络。docker-compose内部需要通过这个网络进行访问</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/e9/91/b2a811f3.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">资宏</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，你好，cerebro 在docker中如设置访问Cerebro的用户名及密码<br>-Dhosts.0.host=http://elasticsearch:9200 是对应的Cerebro 配置文件中的吗<br>hosts=[<br>  {<br>    host="http://192.168.1.141:9200"<br>    name="es_log"<br>  }<br><br>老师本机是不是配置了hosts elasticsearch指向了本地</div> <span class="time">2019-07-05</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/d9/77/b92a74d6.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">彪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我在docker中启动es之后，每次 ctrl + c 之后，在重新 docker-compose up 之后，kibana就无法连接到 es 服务了，Unable to revive connection ...，有什么解决方案么？</div> <span class="time">2019-07-04</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">每次都需要 docker-compse down -v?<br><br>请记得确保你的docker配置了足够多的内存和磁盘空间，避免出现因为资源不够所导致的问题</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/9c/b0/08d7700d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">start</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请问下kibana 7.x的汉化是怎么实现的？</div> <span class="time">2019-07-04</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你是说如何配置吗？<br><br>修改kibana.yml中i18n.locale: “zh-CN”</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/44/1d/d5a03004.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">刘鹏</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">开始失败了<br>后来<br>先docker-compose down -v && docker-compose up<br>又把es内存从512m改成256m<br>现在好了，原因不明</div> <span class="time">2019-07-04</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker demon可以配置总的内存的。我本机设置了4g</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/55/fe/ab541300.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">小猪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，docker方式启动es可以用在生产中吗？在一台服务器通过docker方式部署！</div> <span class="time">2019-07-04</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">生产环境如果使用容器技术，需要考虑使用kubernetes，docker-compose主要是用在开发环境</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">话课</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师您好，docker安装的es怎么给他安装插件，后面分析需要安装插件</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker安装插件，需要你写Dockerfile，在build image的时候安装。从学习角度，我觉得碰到学习安装插件测试分词，你完全可以不用docker的方式运行，单节点运行即可</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">话课</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">系统是centos7 版本，执行docker-compose up发现kibana启动不起啦，报错信息如下：<br>{"type":"log","@timestamp":"2019-07-03T10:57:26Z","tags":["warning","elasticsearch","admin"],"pid":1,"message":"No living connections"}<br>{"type":"log","@timestamp":"2019-07-03T10:57:29Z","tags":["warning","elasticsearch","admin"],"pid":1,"message":"Unable to revive connection: http://elasticsearch:9200/"}<br>我目前elasticsearch监听0.0.0.0 </div> <span class="time">2019-07-03</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">续某某</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师, 我再官网没找到.tar的压缩呢. 汗. <br>我是mac本, 下载的就是.dmg安装包, 直接就安装了.<br>下载的是  docker desktop,  里边已经继承了compose等. <br>但是配置文件也找不到啊. </div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker-compose.yml需要从github下载</p> <p class="reply-time">2019-07-03</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/15/5d/a3/245b74d9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">打听幸福的下落</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kibana启动时全是下面的这种信息：<br>kibana7           | {"type":"log","@timestamp":"2019-07-02T15:55:17Z","tags":["status","plugin:kibana@undefined","info"],"pid":1,"state":"green","message":"Status changed from uninitialized to green - Ready","prevState":"uninitialized","prevMsg":"uninitialized"}<br>kibana7           | {"type":"log","@timestamp":"2019-07-02T15:55:20Z","tags":["status","plugin:elasticsearch@undefined","info"],"pid":1,"state":"yellow","message":"Status changed from uninitialized to yellow - Waiting for Elasticsearch","prevState":"uninitialized","prevMsg":"uninitialized"}<br>kibana7           | {"type":"log","@timestamp":"2019-07-02T15:55:20Z","tags":["status","plugin:xpack_main@7.1.0","info"],"pid":1,"state":"yellow","message":"Status changed from uninitialized to yellow - Waiting for Elasticsearch","prevState":"uninitialized","prevMsg":"uninitialized"}<br></div> <span class="time">2019-07-03</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/15/5d/a3/245b74d9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">打听幸福的下落</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">cerebro启动报错：<br>cerebro           | Oops, cannot start the server.<br>cerebro           | java.util.concurrent.TimeoutException: Futures timed out after [5 seconds]<br>cerebro           |     at scala.concurrent.impl.Promise$DefaultPromise.ready(Promise.scala:259)<br>cerebro           |     at scala.concurrent.impl.Promise$DefaultPromise.result(Promise.scala:263)<br>cerebro           |     at scala.concurrent.Await$.$anonfun$result$1(package.scala:219)<br>cerebro           |     at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:57)<br>cerebro           |     at scala.concurrent.Await$.result(package.scala:146)<br>cerebro           |     at play.core.server.AkkaHttpServer.createServerBinding(AkkaHttpServer.scala:162)<br>cerebro           |     at play.core.server.AkkaHttpServer.$anonfun$httpServerBinding$1(AkkaHttpServer.scala:165)<br>cerebro           |     at play.core.server.AkkaHttpServer.$anonfun$httpServerBinding$1$adapted(AkkaHttpServer.scala:165)<br>cerebro           |     at scala.Option.map(Option.scala:163)<br>cerebro           |     at play.core.server.AkkaHttpServer.<init>(AkkaHttpServer.scala:165)<br>cerebro           |     at play.core.server.AkkaHttpServerProvider.createServer(AkkaHttpServer.scala:578)<br>cerebro           |     at play.core.server.AkkaHttpServerProvider.createServer(AkkaHttpServer.scala:576)<br>cerebro           |     at play.core.server.ServerProvider.createServer(ServerProvider.scala:26)<br>cerebro           |     at play.core.server.ServerProvider.createServer$(ServerProvider.scala:25)<br>cerebro           |     at play.core.server.AkkaHttpServerProvider.createServer(AkkaHttpServer.scala:576)<br>cerebro           |     at play.core.server.ProdServerStart$.start(ProdServerStart.scala:63)<br>cerebro           |     at play.core.server.ProdServerStart$.main(ProdServerStart.scala:29)<br>cerebro           |     at play.core.server.ProdServerStart.main(ProdServerStart.scala)<br>cerebro exited with code 255</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">试着把docker的内存调大？设置成4g看看？</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/76/9a/5b80c066.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">onebird</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">大家可以尝试加入这项选项？<br><br>https://github.com/geektime-geekbang/geektime-ELK/pull/3#pullrequestreview-256845149<br><br>谢谢 SimpleChenyh</div> <span class="time">2019-07-02</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/fc/fe/2594a83e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Melodykke</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kibana和cerebro似乎是不能同时使用啊<br>这个dock-compse.yaml已经搞了两天了，怎么试都不行。<br>我是mac os10.14.5 Darwin melodykkedeMacBook-Pro.local 18.6.0 Darwin Kernel Version 18.6.0: Thu Apr 25 23:16:27 PDT 2019; root:xnu-4903.261.4~2/RELEASE_X86_64 x86_64<br>Docker Engine: 18.09.2 Compose: 1.23.2<br>当我原模原样按照老师给的yaml compse up的时候，es都是没问题的。但如果这个时候浏览器访问了Kibana，Kibana是可以连到es的，界面一切正常。接着访问cerebro，登陆的时候就会报错了，后台也是跟着一堆错，紧接着包括es的所有服务全部挂掉。 比如："stacktrace": ["org.elasticsearch.transport.ConnectTransportException: [es7_01][192.168.112.3:9300] connect_exception",<br>es7_02            | "at org.elasticsearch.transport.TcpTransport$ChannelsConnectedListener.onFailure(TcpTransport.java:1299) ~[elasticsearch-7.1.0.jar:7.1.0]",<br>…………<br>…………<br>"Caused by: io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: elasticsearch/192.168.112.3:9300",<br>es7_02            | "at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method) ~[?:?]",<br>es7_02            | "at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:779) ~[?:?]",<br>es7_02            | "at io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:327) ~[?:?]",<br>es7_02            | "at io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:340) ~[?:?]",<br>es7_02            | "at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:644) ~[?:?]",<br>es7_02            | "at io.netty.channel.nio.NioEventLoop.processSelectedKeysPlain(NioEventLoop.java:556) ~[?:?]",<br>es7_02            | "at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:510) ~[?:?]",<br>es7_02            | "at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:470) ~[?:?]",<br>es7_02            | "... 1 more",<br>es7_02            | "Caused by: java.net.ConnectException: Connection refused"<br>然后，重来一遍，这次先连接cerebro，登陆ok没有问题，一切正常，es集群状况监控一切都好。这时候连接Kibana，同样报差不多的错，然后同样所有服务垮掉。<br>实在脑壳痛啊，能有老师或者大🐂帮下忙吗？ 谢谢了！<br></div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你尝试着吧docker的内存cpu和磁盘空间适当调大。例如内存设置成4g</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/15/5d/a3/245b74d9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">打听幸福的下落</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">Windows下Kibana无法启动是什么情况啊</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以把出错信息提供出来，大家一起看看是什么原因</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/b7/d6/ccbb1f68.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">20ID</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">容器在关机后,第二次重启报错<br>```<br>master not discovered or elected yet, an election requires a node with id [VnC897LTTKea2mrQRTiDNw], have discovered [] which is not a quorum; discovery will continue using [] from hosts providers and [{es7_01}{aGA2DJxhRDqc416EDe40uQ}{7Kj3MAo_SiSuDRgPTaQbGQ}{172.19.0.2}{172.19.0.2:9300}{ml.machine_memory=3954163712, xpack.installed=true, ml.max_open_jobs=20}] from last-known cluster state; node term 1, last-accepted version 39 in term 1<br>```</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker-compose down -v<br>然后docker-compose up</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/ec/08/2919958c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Alex</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">踩了一个坑<br>ERROR: [1] bootstrap checks failed<br>es7_0             | [1]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]<br><br>vm大小设置问题</div> <span class="time">2019-07-01</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/ec/08/2919958c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Alex</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师您好，我这边遇到这么一个问题，好像是Es起不起来<br>{"type":"log","@timestamp":"2019-07-01T11:34:20Z","tags":["warning","elasticsearch","admin"],"pid":1,"message":"Unable to revive connection: http://elasticsearch:9200/"}<br>kibana7           | {"type":"log","@timestamp":"2019-07-01T11:34:20Z","tags":["warning","elasticsearch","admin"],"pid":1,"message":"No living connections"}<br></div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你尝试 docker-compose down -v<br>然后docker-compose up？<br><br>如果还有问题，请告知你的OS，docker-compose版本等信息？</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/b7/d6/ccbb1f68.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">20ID</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">在docker环境中通过 logstash 给 ES 注入数据<br>https://honghuhu.github.io/2019/6/29/</div> <span class="time">2019-06-30</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/db/7d/1fbad49b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">John</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">发现用 docker-compose down 关闭集群后，下次再 up，就不正常了，kibana 启动不了，cebero<br> 也连不上 9200。需要用 docker-compose down -v 清理后，再启动就可以了，然而数据需要重新导入。不知道有更好的方法吗？谢谢</div> <span class="time">2019-06-30</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">我的机器上不存在这个问题。按理，docker-compose也不应该是这样的行为。<br><br>建议到社区提问。另外，最好提供所用的OS。docker-compose 版本等信息</p> <p class="reply-time">2019-07-01</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/6f/cc/8dd73087.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">纛</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker-compose up命令启动：如启动时提示cerebro：timeout   not get heard 则需将docker destop => settings=>daemon=> based变成advanced,同时将“registry-mirrors":镜像设置成https://docker.mirrors.ustc.edu.cn，亲测可流畅下载</div> <span class="time">2019-06-30</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">感谢你分享的镜像</p> <p class="reply-time">2019-07-01</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/99/87/98ebb20e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">dao</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">踩坑啦！<br>如果ES启动失败，出现这样的错误<br><br>```text<br>max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]<br>```<br><br>是因为NMAP 设置过小，请尝试<br><br>```bash<br>sudo -i<br>sysctl -w vm.max_map_count=262144<br># 持久化，以便电脑重启也可以使用<br>echo "vm.max_map_count=262144" >> /etc/sysctl.conf <br>exit<br>```<br></div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">恭喜出坑，谢谢分享踩过的坑</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/fe/c3/1d0b571e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">忧伤的键盘</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">分享一个我本地可用的yml,希望帮到同样迷路的<br><br><br>version: '3.1'<br>services:<br>  cerebro:<br>    image: lmenezes/cerebro:0.8.3<br>    container_name: 'cerebro'<br>    ports:<br>      - 9000:9000<br>    command:<br>      - -Dhosts.0.host=http://elasticsearch:9200<br>    networks:<br>      - es7net<br>  kibana:<br>    image: docker.elastic.co/kibana/kibana:7.2.0<br>    container_name: 'kibana7'<br>    environment:<br>      - I18N_LOCALE=zh-CN<br>      - XPACK_GRAPH_ENABLED=true<br>      - TIMELION_ENABLED=true<br>      - XPACK_MONITORING_COLLECTION_ENABLED="true"<br>    ports:<br>      - 5601:5601<br>    networks:<br>      - es7net<br>  elasticsearch:<br>    image: docker.elastic.co/elasticsearch/elasticsearch:7.2.0<br>    container_name: 'es7_01'<br>    environment:<br>      - cluster.name=geektime<br>      - node.name=es7_01<br>      - bootstrap.memory_lock=true<br>      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"<br>      - discovery.seed_hosts=es7_01<br>      - cluster.initial_master_nodes=es7_01,es7_02<br>    ulimits:<br>      memlock:<br>        soft: -1<br>        hard: -1<br>    volumes:<br>      - es7data1:/usr/share/elasticsearch/data<br>    ports:<br>      - 9200:9200<br>    networks:<br>      - es7net<br>  elasticsearch2:<br>    image: docker.elastic.co/elasticsearch/elasticsearch:7.2.0<br>    container_name: 'es7_0'<br>    environment:<br>      - cluster.name=geektime<br>      - node.name=es7_02<br>      - bootstrap.memory_lock=true<br>      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"<br>      - discovery.seed_hosts=es7_01<br>      - cluster.initial_master_nodes=es7_01,es7_02<br>    ulimits:<br>      memlock:<br>        soft: -1<br>        hard: -1<br>    volumes:<br>      - es7data2:/usr/share/elasticsearch/data<br>    ports:<br>      - 9300:9200<br>    networks:<br>      - es7net<br><br><br>volumes:<br>  es7data1:<br>    driver: local<br>  es7data2:<br>    driver: local<br><br>networks:<br>  es7net:<br>    driver: bridge<br></div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Felix</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我发现了老师的一个特点:对称</div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">没看明白，什么对称？</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c5/51/958e5300.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">┍ 赱私貨灬</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我进入7.x-docker-2-es-instances文件夹，然后运行docker-compose up命令，报错：<br>ERROR: The Compose file '.\docker-compose.yaml' is invalid because:<br>Invalid top-level property "driver". Valid top-level sections for this Compose ile are:version,services,networks,volumes,and extensions starting with "x-".<br>我的本机的elasticsearch和kibana都是7.2.0版本，我把docker-compose.yaml里的版本号都改成7.2.0了，还是不行~<br></div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你的docker-compose是什么版本的呢？</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/b7/d6/ccbb1f68.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">20ID</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师:<br>   我用docker-compose 安装, <br>   一只报超时,<br>   我搜了几个,国内的镜像源修改上去,也还是不行,怎么办?</div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你下载这个源里其他的image可以吗？<br><br>dock pull your-img-url</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">senekis</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，启动后Kiban无法访问elasticsearch，错误信息如下：<br>kibana7           | {"type":"log","@timestamp":"2019-06-28T23:52:23Z","tags":["warning","elasticsearch","admin"],"pid":1,"message":"Unable to revive connection: http://elasticsearch:9200/"}<br><br>尝试通过curl访问elasticsearch:<br>[root@aliyun-centos7-domain-node1 ~]# curl http://elasticsearch:9200<br>{<br>  "name" : "es7_01",<br>  "cluster_name" : "geektime",<br>  "cluster_uuid" : "fZFL9-AgQPC09Pv5JgcYBw",<br>  "version" : {<br>    "number" : "7.1.0",<br>    "build_flavor" : "default",<br>    "build_type" : "docker",<br>    "build_hash" : "606a173",<br>    "build_date" : "2019-05-16T00:43:15.323135Z",<br>    "build_snapshot" : false,<br>    "lucene_version" : "8.0.0",<br>    "minimum_wire_compatibility_version" : "6.8.0",<br>    "minimum_index_compatibility_version" : "6.0.0-beta1"<br>  },<br>  "tagline" : "You Know, for Search"<br>}<br>可以正常返回结果<br><br>这是什么原因导致的呢？尝试了同学们留言里面提到的所有方法，kibana依然无法成功访问elasticsearch<br><br></div> <span class="time">2019-06-29</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/46/48/1707fbe9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">刘超</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">vi /etc/sysctl.conf<br>添加vm.max_map_count=655360<br>down的时候要-v，否则下次启动会出错。踩了一中午的坑。<br></div> <span class="time">2019-06-28</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">down -v 是把volumn的数据清空。否则会保留</p> <p class="reply-time">2019-06-28</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/65/f0/1fdcbece.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">奔跑的小栋栋</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师您好，docker中启动yaml后显示如下报错，辛苦指导下<br>es7_01            | {"type": "server", "timestamp": "2019-06-27T16:41:53,612+0000", "level": "INFO", "component": "o.e.c.c.JoinHelper", "cluster.name": "geektime", "node.name": "es7_01",  "message": "failed to join {es7_02}{w0KM5PaeSsCNZkj5pQnZVw}{3TRSiHmTRhiiI0KyAbmpJg}{172.19.0.3}{172.19.0.3:9300}{ml.machine_memory=2095869952, ml.max_open_jobs=20, xpack.installed=true} with JoinRequest{sourceNode={es7_01}{6ZiKBasBTgqHl-bar1utgA}{o3ELHUzfSuq8RB1fYD8LJw}{172.19.0.5}{172.19.0.5:9300}{ml.machine_memory=2095869952, xpack.installed=true, ml.max_open_jobs=20}, optionalJoin=Optional[Join{term=1, lastAcceptedTerm=0, lastAcceptedVersion=0, sourceNode={es7_01}{6ZiKBasBTgqHl-bar1utgA}{o3ELHUzfSuq8RB1fYD8LJw}{172.19.0.5}{172.19.0.5:9300}{ml.machine_memory=2095869952, xpack.installed=true, ml.max_open_jobs=20}, targetNode={es7_02}{w0KM5PaeSsCNZkj5pQnZVw}{3TRSiHmTRhiiI0KyAbmpJg}{172.19.0.3}{172.19.0.3:9300}{ml.machine_memory=2095869952, ml.max_open_jobs=20, xpack.installed=true}}]}" ,<br>es7_01            | "stacktrace": ["org.elasticsearch.transport.NodeNotConnectedException: [es7_02][172.19.0.3:9300] Node not connected",</div> <span class="time">2019-06-28</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你尝试 docker-compose down -v 把挂载盘删除后 在docker-compose up 。看看是否可以解决。我看有几位同学分享了这个方法，解决了相关的问题</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/ed/1a/ce7f7d54.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">asdf100</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">    command:<br>      - -Dhosts.0.host=http://elasticsearch:9200<br><br>这个指令什么意思？我看网上是分开写ip 和 port了</div> <span class="time">2019-06-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/1b/a2/d0a6775d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">💐 Darling-小鄧总🎊</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师要是有个windows的教学会更加好。跟mac差距好大。弄的头都大了，还要各种在网上搜</div> <span class="time">2019-06-27</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你现在碰到的问题是 Docker还是 ES 安装？ 具体的问题你可以提。因为安装的问题，不会在课程中，做过于详细的讲解。</p> <p class="reply-time">2019-06-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/DYAIOgq83eoRyUPicEMqGsbsMicHPuvwM8nibfgK8Yt0AibAGUmnic7rLF4zUZ4dBj4ialYz54fOD6sURKwuJIWBNjhg/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">咸鱼与果汁</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，可以把@LY的问题回答下吗</div> <span class="time">2019-06-27</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">德斯儿</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，Kibana7.1是自带的中文汉化吗？我现在用的6.5.4是没有汉化的，还有docker启动kibana，如果装了插件，启动很会慢，这个有解决方案吗？</div> <span class="time">2019-06-26</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">6.8和7.0开始，支持中文。需要在kibana.yml中进行设定。<br><br>2. Kibana你安装了什么插件？一般不需要安装插件把？Kibana使用node开发，个人觉得整体速度还可以，就是对CPU有一定的开销</p> <p class="reply-time">2019-06-27</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/ce/60/7d17522d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">君莫惜</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">没有修改docker-compose.yml文件，全部启动成功之后，localhost:5601一直进不去，localhost:9200直接显示：<br>该网页无法正常运作<br>localhost 未发送任何数据。<br>ERR_EMPTY_RESPONSE</div> <span class="time">2019-06-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/f7/7a/fc236813.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">shanwu1992</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker-compose.xml中的kibana有指定连接elasticsearch配置吗</div> <span class="time">2019-06-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpD6dfddmEC4fiaRudUwgoXQRjI8HqcZDYEAzfQQaYTEywhH3ibibEZ4t7t1SrnQM3ykmQRNM8wmIWQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_385321</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">es7_01            | {"type": "server", "timestamp": "2019-06-26T01:32:57,633+0000", "level": "INFO", "component": "o.e.n.Node", "cluster.name": "geektime", "node.name": "es7_01",  "message": "closed"  }<br>es7_01            | {"type": "server", "timestamp": "2019-06-26T01:32:57,639+0000", "level": "INFO", "component": "o.e.x.m.p.NativeController", "cluster.name": "geektime", "node.name": "es7_01",  "message": "Native controller process has stopped - no new native processes can be started"  }<br>es7_02 exited with code 78<br>es7_01 exited with code 78<br></div> <span class="time">2019-06-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTJpD6dfddmEC4fiaRudUwgoXQRjI8HqcZDYEAzfQQaYTEywhH3ibibEZ4t7t1SrnQM3ykmQRNM8wmIWQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_385321</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">???? <br>$ sudo docker-compose up<br>Pulling kibana (docker.elastic.co/kibana/kibana:7.1.0)...<br>7.1.0: Pulling from kibana/kibana<br>8ba884070f61: Already exists<br>1d1fa0015513: Pulling fs layer<br>89eb31e0c2f5: Pulling fs layer<br>06e418438b84: Pulling fs layer<br>402cffb373dc: Waiting<br>04a881828200: Waiting<br>301a4cfc4f4f: Waiting<br>f9ded62578b8: Waiting<br>ERROR: error pulling image configuration: Get https://d2iks1dkcwqcbx.cloudfront.net/docker/registry/v2/blobs/sha256/71/714b175e84e8fa91ceed8b802980efb4017fa75359599cd2b63c87bbc26efe77/data?Expires=1561451920&Signature=bU1q3TdUTu0gS1ddHQzGdDhfg9a0zYa2wRWTAkIFIXLTfPYrJ1rUHNwYJk04VLWhDm09tkktiJk5p3T8dtMu1mIeZol9WDuoRGywaeoi7XXkDs77Dzk2zyxiVvWaKSLhoCDZj3KYqD0u2~u1PK8BFtP32IXNKB4C3oJxAGTR-nPMTI3aoXBSN7l4vwNOqlytdCwTjBlMKmddRFbYGRosplzldHiua2l-z~5~lGclmYLbW~f9egYvTBptnjfxOuNpenC3yN5yZvD~~0TXiCvOD7LrznqC5W8Fs~vJQOPaw5FbcRpxaiBoNEpLI60dSxeo6eW4FzeCsjXaqlXGCUAw8w__&Key-Pair-Id=APKAIVAVKHB6SNHJAJQQ: net/http: TLS handshake timeout<br></div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">应该是网络问题导致的超时</p> <p class="reply-time">2019-07-10</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/9d/84/171b2221.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">jeffery</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师有推荐的书籍吗……打算学完考Elastic 同事考试费400$ 以及不懂java怎么学 能贴下考试报名链接吗 谢谢老师</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">最近运营的同学会给出相应的学习路径，包括一些推荐的书籍。你不需要会java。但是掌握任何一门语言，都能帮助你理解。但这也不是必需的。<br><br>认证地址<br>https://www.elastic.co/cn/training/certification</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">李</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">已解决，空白页面问题是浏览器不兼容，换了谷歌即可</div> <span class="time">2019-06-25</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">李</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">Starting cerebro ... done<br>Starting es7_02  ... done<br>Starting es7_01  ... done<br>Starting kibana7 ... done<br>Attaching to es7_02, kibana7, es7_01, cerebro<br>es7_02            | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.<br>es7_01            | OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release.<br><br>cerebro           | WARNING: An illegal reflective access operation has occurred<br>cerebro           | WARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/opt/cerebro/lib/com.google.inject.guice-4.2.2.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)<br>cerebro           | WARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1<br>cerebro           | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br>cerebro           | WARNING: All illegal access operations will be denied in a future release<br>cerebro           | WARNING: An illegal reflective access operation has occurred<br>cerebro           | WARNING: Illegal reflective access by com.google.inject.internal.cglib.core.$ReflectUtils$1 (file:/opt/cerebro/lib/com.google.inject.guice-4.2.2.jar) to method java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain)<br>cerebro           | WARNING: Please consider reporting this to the maintainers of com.google.inject.internal.cglib.core.$ReflectUtils$1<br>cerebro           | WARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations<br>cerebro           | WARNING: All illegal access operations will be denied in a future release<br>es7_01 exited with code 137<br>es7_02 exited with code 137</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">是否可以贴出你的配置？</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">李</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">本地还要安装es 和kibana吗？</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">如果在容器中运行，本地可以不用下载安装。在容器中运行只是提供了更多的一种选择，方便你对数据进行和环境进行高效的恢复。也很容易在本地管理多个版本的es和kibana。</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/14/50/c23cf47d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">李</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kibana7           | {"type":"log","@timestamp":"2019-06-25T02:20:46Z","tags":["warning","elasticsearch","admin"],"pid":1,"message":"Unable to revive connection: http://elasticsearch:9200/"}<br><br><br>前面课程案例没有执行，直接基于docker容器来执行的，但是访问5601打不开页面？ 上面有日志提示</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">从出错信息看，是es没有启动。你可以运行<br>docker ps -a 查看运行的 containers<br><br>docker logs -t containerId 查看某个容器中的出错信息</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/48/ff/1967cdbb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">卖轮子</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请教:我yaml文件中增加一个es节点为啥就启动不起来了？</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你的配置怎么写的？</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/3b/65/3a4fc8cf.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">prepared</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">正式课程前，需要我们自己在docker中安装es环境嘛？</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker环境中运行只是提供了你一个选择，你也可以选择在本机用命令行启动一个或者多个节点</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/48/ff/1967cdbb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">卖轮子</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">集群的话最少不应该是3个节点么？</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">一个节点也可以运行一个集群。具体的回答回在你的另外一条留言中了。</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/21/2f/85a3c897.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">孙有能希</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker的启动都是成功的，但是只能访问到locahost:9200，访问指定网址就是不行，不知道是哪里出了问题？</div> <span class="time">2019-06-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">elasticsearch.yml中有一个network.host的配置项，不做设置，默认只能通过127.0.0.1访问。你可以简单粗暴的设置成0.0.0.0，应该可以解决你的问题。当然生产环境中不建议这样的设置，会引入一定的安全隐患</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKrKqWxLNy9Vm5kcrTIybH7RLbKAIuLZQ1tw5yjmhsQKh2akQd9CjQgUqAZx6TztXc1JTBCx4M8vQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">踏雪无痕</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">您好：<br> docker-compose安装失败，您看下是什么原因？<br>/usr/bin/python3.6: symbol lookup error: /usr/bin/python3.6: undefined symbol: _Py_LegacyLocaleDetected</div> <span class="time">2019-06-24</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">这个错误我没遇到过，明天查一下看，不知道是不是和你的pyton版本有关。你有考虑安装个pyenv，在本机管理个版本的python么</p> <p class="reply-time">2019-06-25</p>
	</div>
</div>
</li></ul></div></div><div data-v-4e11b9bf=""></div></div></div><link href="https://cdn.bootcss.com/dplayer/1.25.0/DPlayer.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/hls.js/0.10.1/hls.min.js"></script><script src="https://cdn.bootcss.com/dplayer/1.25.0/DPlayer.min.js"></script><script>            const dp = new DPlayer({                container: document.getElementById('DplayerCont'),                video: {                    url: 'https://media001.geekbang.org/ccca31a772644e3980b92d2aa9d31f65/2ecc6a8eb86d4c12a6dd1eee73cdd286-416937c074be5e6c22cf81478d8773c6-hd.m3u8',                    type: 'hls'                }            });</script></body></html>