<html class="cye-disabled cye-lm"><head><meta charset="utf-8"><meta name="referrer" content="no-referrer"><meta name="Keywords" content="极客时间,极客邦,极客邦科技,极客邦控股,极客时间App,专栏订阅,极客新闻,二叉树,极客Live,QCon,左耳听风,AI技术内参,大航海时代,陈皓,徐飞,洪亮劼,霍泰稳,池建强,Selina,Gary,InfoQ,极客搜索"><meta name="description" content="极客时间是极客邦科技出品的一款 IT 内容知识服务 App，内容包含专栏订阅、极客新闻、热点专题、直播、视频和音频等多形式的知识内容，并设有陈皓专栏、徐飞专栏、洪亮劼专栏等专栏供订阅。"><link rel="apple-touch-icon" sizes="180x180" href="http://static001.geekbang.org/static/icon/time/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="http://static001.geekbang.org/static/icon/time/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="http://static001.geekbang.org/static/icon/time/favicon-16x16.png"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="format-detection" content="telephone=no"><title>13 | 通过Analyzer进行分词</title><link href="https://static001.geekbang.org/static/time/css/app.b230db929e53af87acd535637f5011b8.css" rel="stylesheet"><style type="text/css">        @font-face {            font-family: player-font;            src: url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.eot");            src: url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.eot?#iefix") format("embedded-opentype"), url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.woff") format("woff"), url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.ttf") format("truetype"), url("//at.alicdn.com/t/font_509397_9fpjwjp73uqsemi.svg#player-font") format("svg")        }        .player-font {            font-family: player-font !important;            font-size: 16px;            font-style: normal;            -webkit-font-smoothing: antialiased;            -webkit-text-stroke-width: .2px;            -moz-osx-font-smoothing: grayscale        }        .vplayer {            position: relative;            overflow: hidden        }        .vplayer,        .vplayer video {            width: 100%        }        .vplayer .title {            position: absolute;            top: 1rem;            left: 1rem;            right: 1rem;            color: #fff;            font-weight: 400;            font-size: .875rem;            word-break: break-all;            display: -webkit-box;            overflow: hidden;            text-overflow: ellipsis;            -webkit-box-orient: vertical;            -webkit-line-clamp: 1        }        .vplayer .finish-control,        .vplayer .loading {            position: absolute;            top: 0;            left: 0;            background: rgba(0, 0, 0, .5);            color: #fff;            width: 100%;            height: 100%;            z-index: 2;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center        }        .vplayer .finish-control h3,        .vplayer .loading h3 {            position: absolute;            color: #fff;            top: 1rem;            left: 50%;            font-size: 1rem;            font-weight: 400;            -webkit-transform: translate(-50%);            transform: translate(-50%)        }        .vplayer .finish-control p,        .vplayer .loading p {            cursor: pointer;            max-height: 6rem;            text-align: center        }        .vplayer .finish-control .cancel-next,        .vplayer .loading .cancel-next {            margin-left: 4rem        }        .vplayer .finish-control .cancel-next .icon-cancel-next,        .vplayer .loading .cancel-next .icon-cancel-next {            height: 4rem;            line-height: 4rem;            cursor: pointer;            font-size: 3.5rem        }        .vplayer .finish-control .cancel-next .icon-cancel-next i,        .vplayer .loading .cancel-next .icon-cancel-next i {            position: absolute;            top: 0;            left: 0;            margin-left: 8px        }        .vplayer .finish-control .icon-replay,        .vplayer .loading .icon-replay {            height: 4rem;            cursor: pointer;            line-height: 4rem;            font-size: 3rem        }        .vplayer .finish-control {            background: #000        }        .vplayer .no-wifi {            width: 70%;            position: absolute;            left: 50%;            top: 50%;            padding: 1rem;            background: rgba(0, 0, 0, .8);            -webkit-transform: translate(-50%, -50%);            transform: translate(-50%, -50%);            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: vertical;            -webkit-box-direction: normal;            -ms-flex-direction: column;            flex-direction: column;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            z-index: 3        }        .vplayer .no-wifi p {            line-height: 1.5rem;            margin: 0 auto;            width: 60%;            color: #fff;            font-size: 1rem;            text-align: center        }        .vplayer .no-wifi p span {            font-size: .875rem        }        .vplayer .no-wifi div {            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1;            margin-top: 1rem        }        .vplayer .no-wifi div a {            color: #fff;            background: #ff5a05;            padding: .3rem .5rem        }        .vplayer .no-wifi div a:last-child {            margin-left: 1rem        }        .vplayer .buy {            position: absolute;            z-index: 4;            top: 0;            left: 0;            width: 100%;            height: 100%;            color: #fff;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: vertical;            -webkit-box-direction: normal;            -ms-flex-direction: column;            flex-direction: column;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            background: #000        }        .vplayer .buy p {            text-align: center        }        .vplayer .buy p span {            color: #ff5a05        }        .vplayer .buy .btn {            margin-top: 1rem;            color: #fff;            background: #ff5a05;            padding: .3rem 1.5rem        }        .android .dplayer .dplayer-controller .dplayer-icons .dplayer-full,        .dplayer-setting-item.dplayer-setting-loop {            display: none        }</style><style type="text/css">        .MathJax_Display {            overflow: auto        }        .poster {            position: fixed;            left: -10000px;            top: -10000px;            overflow: hidden;            padding: 1rem;            background: #ececec        }        .richcontent-pre-copy {            font-size: 13px;            color: #888;            position: absolute;            right: 1em;            top: .2em;            cursor: pointer;            -webkit-user-select: none;            -moz-user-select: none;            -ms-user-select: none;            user-select: none        }        .richcontent-pre-copy .iconfont {            font-size: 12px;            margin-right: .2em        }</style><style type="text/css">        .bottom {            width: 100%;            background-color: #f5f5f5;            position: fixed;            bottom: 0;            left: 0;            z-index: 10        }        .bottom,        .bottom .bottom-wrapper {            height: 67px;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row        }        .bottom .bottom-wrapper {            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1;            padding-left: 20px;            padding-right: 20px;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between        }        .bottom .bottom-wrapper a {            height: 48px;            line-height: 51px;            -webkit-box-sizing: border-box;            box-sizing: border-box        }</style><style type="text/css">        .breadcrumb {            padding: 30px 0;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -ms-flex-wrap: wrap;            flex-wrap: wrap;            background: #fff        }        .breadcrumb a.title {            color: #e57c39;            font-size: 15px;            font-weight: 400        }        .breadcrumb span.title {            color: #888;            font-size: 15px;            font-weight: 400        }        .breadcrumb .split {            color: #ccc;            font-size: 10px;            margin-right: 5px        }</style><style type="text/css">        .course-detail[data-v-4e11b9bf] {            max-width: 46.25rem;            margin: 0 auto;            background: #f5f5f5        }        .course-detail .course-main[data-v-4e11b9bf] {            background-color: #fff;            width: 100%;            z-index: 10;            top: 0;            left: 0        }        .course-detail .course-info[data-v-4e11b9bf] {            background: #fff;            cursor: pointer        }        .course-detail .course-info .course-info-top[data-v-4e11b9bf] {            padding: 1rem 0 .4rem .78125rem;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center        }        .course-detail .course-info .course-info-top h1[data-v-4e11b9bf] {            font-size: 1.03125rem;            font-weight: 400;            text-align: justify-content        }        .course-detail .course-info .course-info-top i[data-v-4e11b9bf] {            font-weight: 400;            width: 40px;            padding-right: .78125rem;            -ms-flex-negative: 0;            flex-shrink: 0;            text-align: right;            color: #dadada        }        .course-detail .course-info .course-info-bottom[data-v-4e11b9bf] {            padding: 0 54px .5rem .78125rem;            border-bottom: 1px solid #e8e8e8;            color: #888;            font-size: .78125rem        }        .course-detail .course-info .course-info-bottom .icon-course-play[data-v-4e11b9bf] {            color: #d9d9d9;            font-size: .75rem        }        .course-detail .video-list[data-v-4e11b9bf] {            background: #fff;            width: 100%;            overflow: hidden;            overflow: auto;            -webkit-overflow-scrolling: touch        }        .course-detail .video-list ul[data-v-4e11b9bf] {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            padding: .875rem 0        }        .course-detail .video-list ul li[data-v-4e11b9bf] {            margin-left: .71875rem;            position: relative;            border: 1px solid #e8e8e8;            border-radius: 3px;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            height: 4.0625rem;            overflow: hidden;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            font-size: .78125rem;            -ms-flex-negative: 0;            flex-shrink: 0;            line-height: 1rem;            -webkit-transition: border .5s ease;            transition: border .5s ease        }        .course-detail .video-list ul li img[data-v-4e11b9bf] {            width: 1.78125rem;            height: .84375rem;            position: absolute;            top: 0;            left: 0        }        .course-detail .video-list ul li a[data-v-4e11b9bf] {            -webkit-transition: color .5s ease;            transition: color .5s ease;            padding: 0 .5rem        }        .course-detail .video-list ul li a[data-v-4e11b9bf]:link,        .course-detail .video-list ul li a[data-v-4e11b9bf]:visited {            color: #353535        }        .course-detail .video-list ul li.on[data-v-4e11b9bf] {            border-color: #ff5a05        }        .course-detail .video-list ul li.on a[data-v-4e11b9bf]:link,        .course-detail .video-list ul li.on a[data-v-4e11b9bf]:visited {            color: #ff5a05        }        .article-title[data-v-4e11b9bf] {            color: #353535;            font-weight: 400;            line-height: 1.65rem;            font-size: 1.34375rem        }        .article-info[data-v-4e11b9bf] {            color: #888;            font-size: .9375rem;            margin-top: 1.0625rem        }        .article-content[data-v-4e11b9bf] {            margin-top: 1.0625rem        }        .audio-player[data-v-4e11b9bf] {            width: 100%;            margin: 20px 0        }        .content-box[data-v-4e11b9bf] {            padding: 1px 1.3125rem;            background-color: #fff;            margin-top: .46875rem        }        .to-comment[data-v-4e11b9bf] {            overflow: hidden;            padding-top: 20px;            margin: 0 1.3125rem -10px        }        .to-comment a.button-primary[data-v-4e11b9bf] {            float: right;            height: 20px;            font-size: 12px;            line-height: 20px;            padding: 4px 8px;            cursor: pointer        }        .extra[data-v-4e11b9bf] {            margin-top: .46875rem;            margin-bottom: 67px;            background: #fff;            position: relative        }        .extra .video-comment-box[data-v-4e11b9bf] {            position: absolute;            width: 100%;            top: 0;            left: 0;            z-index: 3;            -webkit-box-sizing: border-box;            box-sizing: border-box;            background: #fff;            padding-left: 1rem;            padding-right: 1rem;            padding-top: .5rem        }        .extra .video-comment-box h3[data-v-4e11b9bf] {            color: #353535;            font-size: .875rem;            line-height: 2rem;            font-weight: 400        }        .extra .comments[data-v-4e11b9bf] {            margin: 0 1.3125rem;            padding-bottom: 50px        }        .extra .comments h2[data-v-4e11b9bf] {            text-align: center;            color: #888;            position: relative;            z-index: 1;            margin-bottom: 14px        }        .extra .comments h2[data-v-4e11b9bf]:before {            border-top: 1px dotted #e8e8e8;            content: "";            position: absolute;            top: 50%;            left: 0;            width: 100%;            z-index: -1        }        .extra .comments h2 span[data-v-4e11b9bf] {            font-size: 15.25px;            font-weight: 400;            padding: 16px 1rem;            background: #fff;            display: inline-block        }        .extra .comments .no-comment[data-v-4e11b9bf] {            text-align: center        }        .extra .comments .no-comment i.icon-cat[data-v-4e11b9bf] {            color: #f5f5f5;            font-size: 100px;            line-height: 1.2;            margin-right: 12px        }        .extra .comments .no-comment .no-comment-text[data-v-4e11b9bf] {            color: #e8e8e8;            font-size: 12.5px;            line-height: 1.6        }        .bottom[data-v-4e11b9bf] {            position: fixed;            bottom: 0;            left: 0;            width: 100%;            height: 67px;            background: #fff;            background-color: #f5f5f5;            z-index: 10        }        .bottom .buy-join[data-v-4e11b9bf],        .bottom[data-v-4e11b9bf] {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center        }        .bottom .buy-join[data-v-4e11b9bf] {            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            height: 48px;            line-height: 48px        }        .bottom .buy-join span[data-v-4e11b9bf] {            line-height: 48px;            margin-left: 5px;            color: hsla(0, 0%, 100%, .5);            font-size: 11px;            text-decoration: line-through        }        .bottom .button-cancel[data-v-4e11b9bf] {            height: 51px;            line-height: 51px        }        .bottom-control[data-v-4e11b9bf],        .bottom-sub[data-v-4e11b9bf] {            width: 100%;            -webkit-box-orient: horizontal;            -ms-flex-direction: row;            flex-direction: row;            -ms-flex-pack: distribute;            justify-content: space-around;            -webkit-box-sizing: border-box;            box-sizing: border-box;            padding: 0 1.3125rem        }        .bottom-control .item[data-v-4e11b9bf],        .bottom-control[data-v-4e11b9bf],        .bottom-sub .item[data-v-4e11b9bf],        .bottom-sub[data-v-4e11b9bf] {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-direction: normal        }        .bottom-control .item[data-v-4e11b9bf],        .bottom-sub .item[data-v-4e11b9bf] {            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1;            -webkit-box-orient: vertical;            -ms-flex-direction: column;            flex-direction: column;            -webkit-box-pack: center;            -ms-flex-pack: center;            justify-content: center;            cursor: pointer        }        .bottom-control .item i[data-v-4e11b9bf],        .bottom-sub .item i[data-v-4e11b9bf] {            color: #353535;            font-size: 1.125rem;            line-height: 1.5rem        }        .bottom-control .item span[data-v-4e11b9bf],        .bottom-sub .item span[data-v-4e11b9bf] {            color: #888;            font-size: 11px        }        .button-subscribe[data-v-4e11b9bf] {            -webkit-box-flex: 1;            -ms-flex: 1;            flex: 1;            height: 69px;            color: #fff;            font-size: 15.25px;            text-align: center;            background-color: #ff5a05;            line-height: 69px;            border-radius: 5px        }        .article-sub-bottom[data-v-4e11b9bf] {            z-index: 2        }        @media only screen and (device-width:375px) and (device-height:812px) and (-webkit-device-pixel-ratio:3) {            .bottom[data-v-4e11b9bf],            .comments[data-v-4e11b9bf] {                padding-bottom: 34px            }        }        @media (max-width:769px) {            .course-detail .breadcrumb[data-v-4e11b9bf] {                padding: 10px            }        }        @media screen and (min-width:768px) {            .extra .comments[data-v-4e11b9bf],            .to-comment[data-v-4e11b9bf] {                margin: 0 0 -10px            }        }</style><style type="text/css">        .mobile-tips {            width: 100%;            height: 51px;            background: rgba(0, 0, 0, .8);            position: fixed;            top: 0;            left: 0;            z-index: 20;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between;            -webkit-box-sizing: border-box;            box-sizing: border-box;            padding: 0 12px;            -webkit-transition: opacity .35s;            transition: opacity .35s;            opacity: 0;            pointer-events: none        }        .mobile-tips.istop {            opacity: 1;            pointer-events: auto        }        .mobile-tips .mobile-tips-info {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            -webkit-box-pack: start;            -ms-flex-pack: start;            justify-content: flex-start        }        .mobile-tips .mobile-tips-info i {            width: 36px;            height: 36px;            background-image: url(data:image/png;base64,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);            background-position: 0 0;            background-repeat: no-repeat;            background-size: contain;            border-radius: 7px        }        .mobile-tips .mobile-tips-info h2 {            font-size: 15px;            color: #fff;            font-weight: 400;            margin-left: 6px        }        .mobile-tips .mobile-tips-info h2 span {            font-size: 11px        }        .mobile-tips a {            width: 72px;            height: 31px;            text-align: center;            border: 1px solid #ff5a05;            border-radius: 3px;            font-size: 13px;            color: #ff5a05;            line-height: 31px        }</style><style type="text/css">        .comment-item {            list-style-position: inside;            width: 100%;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            margin-bottom: 1rem        }        .comment-item a {            border-bottom: none        }        .comment-item .avatar {            width: 2.625rem;            height: 2.625rem;            -ms-flex-negative: 0;            flex-shrink: 0;            border-radius: 50%        }        .comment-item .info {            margin-left: .5rem;            -webkit-box-flex: 1;            -ms-flex-positive: 1;            flex-grow: 1        }        .comment-item .info .hd {            width: 100%;            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-pack: justify;            -ms-flex-pack: justify;            justify-content: space-between;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center        }        .comment-item .info .hd .username {            color: #888;            font-size: 15.25px;            font-weight: 400;            line-height: 1.2        }        .comment-item .info .hd .control {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center        }        .comment-item .info .hd .control .btn-share {            color: #888;            font-size: .75rem;            margin-right: 1rem        }        .comment-item .info .hd .control .btn-praise {            display: -webkit-box;            display: -ms-flexbox;            display: flex;            -webkit-box-orient: horizontal;            -webkit-box-direction: normal;            -ms-flex-direction: row;            flex-direction: row;            -webkit-box-align: center;            -ms-flex-align: center;            align-items: center;            font-size: 15.25px;            text-decoration: none        }        .comment-item .info .hd .control .btn-praise i {            color: #888;            display: inline-block;            font-size: .75rem;            margin-right: .3rem;            margin-top: -.01rem        }        .comment-item .info .hd .control .btn-praise i.on,        .comment-item .info .hd .control .btn-praise span {            color: #ff5a05        }        .comment-item .info .bd {            color: #353535;            font-size: 15.25px;            font-weight: 400;            white-space: normal;            word-break: break-all;            line-height: 1.6        }        .comment-item .info .time {            color: #888;            font-size: 9px;            line-height: 1        }        .comment-item .info .reply .reply-hd {            font-size: 15.25px        }        .comment-item .info .reply .reply-hd span {            margin-left: -12px;            color: #888;            font-weight: 400        }        .comment-item .info .reply .reply-hd i {            color: #ff5a05;            font-size: 15.25px        }        .comment-item .info .reply .reply-content {            color: #353535;            font-size: 15.25px;            font-weight: 400;            white-space: normal;            word-break: break-all        }        .comment-item .info .reply .reply-time {            color: #888;            font-size: 9px        }</style></head><body style=""><div id="app"><div data-v-4e11b9bf="" class="course-detail"><div class="breadcrumb breadcrumb"><span><a href="#" class="title router-link-active">讲堂</a><span class="split iconfont"></span></span><span><span class="title">13 | 通过Analyzer进行分词</span></span></div><div data-v-4e11b9bf="" class="course-main main" style="position: relative;"><div data-v-4e11b9bf="" class="vplayer" id ="DplayerCont" style="height: 416.25px;"><h2 class="title">                        13 | 通过Analyzer进行分词</h2></div></div><div data-v-4e11b9bf="" class="course-info" style="margin-top: 0px;"><div data-v-4e11b9bf="" class="course-info-top"><h1 data-v-4e11b9bf="" class="course-title"></h1><i data-v-4e11b9bf="" class="iconfont"></i></div></div><div data-v-4e11b9bf=""><div data-v-4e11b9bf="" class="content-box"><div data-v-4e11b9bf="" id="article-content" class="typo common-content"><div class="text">                            <p><a href="https://github.com/geektime-geekbang/geektime-ELK/tree/master/part-1/3.5-%E9%80%9A%E8%BF%87%E5%88%86%E6%9E%90%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%88%86%E8%AF%8D">课程Demo</a></p><h1>相关阅读</h1><ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.1/indices-analyze.html">https://www.elastic.co/guide/en/elasticsearch/reference/7.1/indices-analyze.html</a></li>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analyzer-anatomy.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/analyzer-anatomy.html</a></li>
</ul><h1>课件地址</h1><p><a href="https://github.com/geektime-geekbang/geektime-ELK/blob/master/part-1/%E5%88%9D%E8%AF%86Elasticsearch.pdf">初识Elasticsearch</a></p><!-- [[[read_end]]] --></div></div></div></div><div data-v-4e11b9bf="" class="extra" style="margin-bottom: 1rem;"><div data-v-4e11b9bf="" class="comments"><h2 data-v-4e11b9bf=""><span data-v-4e11b9bf="">精选留言</span></h2><ul>                        <li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/44/b1/fffb8157.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">老男孩</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>58</span></a></div>
	</div>
	<div class="bd">老师，建议以后加一节java整合es的课</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">好的，记下这个需求了。之前没有这方面的计划。目前有收到2位同学提出这方面的需要了。</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/3c/8f/fcbbb667.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">.两个调味罐</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>35</span></a></div>
	</div>
	<div class="bd">老师，课后面会教怎么和java或者springboot整合吗？</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">暂时没有这个计划。如果有很多同学有这个需求，我可以➕一节</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/91/76/8621c52a.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">天琪</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>16</span></a></div>
	</div>
	<div class="bd">ik分析器安装：<br>bin/elasticsearch-plugin  install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.1.0/elasticsearch-analysis-ik-7.1.0.zip<br><br>kibana 演示：<br><br>POST _analyze<br>{<br>  "analyzer": "ik_smart",<br>  "text":     "中华人民共和国国歌"<br>}<br><br>POST _analyze<br>{<br>  "analyzer": "ik_max_word",<br>  "text":     "中华人民共和国国歌"<br>}<br><br>ik_max_word: 会将文本做最细粒度的拆分，比如会将“中华人民共和国国歌”拆分为“中华人民共和国,中华人民,中华,华人,人民共和国,人民,人,民,共和国,共和,和,国国,国歌”，会穷尽各种可能的组合，适合 Term Query；<br><br>ik_smart: 会做最粗粒度的拆分，比如会将“中华人民共和国国歌”拆分为“中华人民共和国,国歌”，适合 Phrase 查询</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">谢谢分享！</p> <p class="reply-time">2019-07-01</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/59/a9/59cb980b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">王俊杰</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>15</span></a></div>
	</div>
	<div class="bd">老师，建议以后加一节java整合es的课</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👌</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/3XbCueYYVWTiclv8T5tFpwiblOxLphvSZxL4ujMdqVMibZnOiaFK2C5nKRGv407iaAsrI0CDICYVQJtiaITzkjfjbvrQ/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">有铭</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>13</span></a></div>
	</div>
	<div class="bd">给各位使用docker跑Elasticsearch安装插件的简单办法，无需dockerFile自制镜像。以本帖的双es启动为例：<br>1.进入es的容器并启动bash。 命令   docker exec -it es7_01 bash<br>注：es7_01 即容器名称<br>2..第一步成功你会发现你已经在容器内部，此时输入 pwd 命令会发现自己处于/usr/share/elasticsearch 路径。此时即可输入插件安装命令 bin/elasticsearch-plugin install analysis-icu  <br>等待插件下载并安装完毕<br>3.输入exit退出容器bash。<br>4.如法炮制es7_02并安装插件。<br>5.docker-compose restart 重启容器<br>6.重启后，检查安装是否成功，输入 curl 127.0.0.1:9200/_cat/plugins，输出：<br>es7_01 analysis-icu 7.2.0<br>es7_02 analysis-icu 7.2.0<br>代表成功</div> <span class="time">2019-07-06</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">非常棒的分享。这样操作更为方便。</p> <p class="reply-time">2019-07-07</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/7e/57/a7e7a65c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">施小江</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>7</span></a></div>
	</div>
	<div class="bd">老师，你好，能不能保持每天或者隔天更新一到两集，这样可以保持一个学习的习惯。</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">具体的更新节奏，编辑同学会有所控制，已经录制了一部分课程</p> <p class="reply-time">2019-07-01</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/5b/03/0a37f4fa.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Dev.M</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>5</span></a></div>
	</div>
	<div class="bd">老师讲得很好，不过更新速度有些慢呀</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以多看一些相关文档，自己多做一些练习。争取夯基础，一下看很多的内容也未必一下记得住，细水长流，贵在坚持。</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/23/50/1f5154fe.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">无笔秀才</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>4</span></a></div>
	</div>
	<div class="bd">其实个人项目中已经在重度使用es,也遇到了一些问题，购买课程主要是想向老师学习，并请教一些问题的解决方案。<br>1. 自动创建的mapping   如text.keyword     后面如果想修改怎么办，比如按月分 index_201901/ index_201902<br>,那么新旧不一致，导致查询语句 也不一致。<br>如:<br>"title": {<br>  "type": "text",<br>  "fields": {<br>    "keyword": {<br>      "type": "keyword",<br>      "ignore_above": 256<br>    }<br>  }<br>}<br>现在想改成<br>"title": {<br>  "type": "keyword"<br>}<br>由于之前的查询语句都已经写成title.keyword了。  如果修改了之后就会导致index_201901 - index_201906都是带keyword的。但是index_201907及以后的都都是不带keyword的。这种情况是需要将前面的index数据先备份，再删除重新建立mapping 再导入原来的数据吗？<br><br>2. 由于需求要对某些字段（如title）进行复杂条件查询，and / or ,我就想到了query_string，  查找性能较慢。有时候甚至会超时。<br><br>3. 副本数设置的多，那么稳定性就会增强，那么势必会造成同步的成本，这里想跟老师确认一下副本同步过程是强一致性，还是最终一致性？一个写请求过来，是等所有副本都同步完了 才返回给客户端，还是先把主节点操作完成就返回主节点呢？我个人感觉应该是强一致性。不然副本同步失败 也无法通知客户端了。<br><br>4.  我们现在想存文章正文但是不想分词，于是我就设置成了如下格式。但是遇到了一些变态文章很长，超长了。就会写入失败，而不是被截断。再确认一点我看文档说 ignore_above 设置的是字节数，而不是字数。<br>"content": {<br>      "type": "keyword",<br>      "ignore_above": 20000<br>    }<br><br>5. 在课程中也发现ik分词可以自定义词库等，这里有一个疑惑就算是用自己的词库，那么加入当发现一个新词的时候，我需要热更新自定义词库，这时候文章已经写入es了，但还是按照旧的词库去分词的。 还有热更新词库会不会较慢影响读写性能。以至于要停机更新？<br><br>多谢老师指教</div> <span class="time">2019-06-30</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">1. mapping修改，需要做reindex。基于时间序列的index可以结合index template来创建。可以配置index alias来解决index改名产生的问题<br>。<br><br>2查询的性能问题，你能给出具体的例子吗？否则我不知道如何回答<br><br>3. 分片数的设定 ，读写文件的流程。在后续会做讲解。简单来说，如果写入频率不高，设置多个副本会提升读取性能<br><br>4. 我觉得你不应该设置keyword，而是应该在mapoing中将那个字段设置成ignore。<br><br>5.ik和hanlp等分析器 支持词库的动态更新的。后续课程会讲。<br><br><br>希望这些简单的回答对你有用。</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/16/32/036db333.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">soul</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>3</span></a></div>
	</div>
	<div class="bd">老师你好，我现在的项目也用到了es，但是不怎么深入，以后会有es结合springboot系列吗，还有就是es怎么保证和MySQL的数据增删改差同步</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">数据库可以通过external version控制。springbot我原本没有计划，现在会考虑增加一节讲解<br></p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/4a/89/698b6737.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">种菜大哥</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">Python和es的整合，也加一点吧</div> <span class="time">2019-07-09</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">有部分例子有用到python</p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/fd/81/1864f266.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">石将从</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>2</span></a></div>
	</div>
	<div class="bd">使用中文分词时报错，<br>POST /_analyze<br>{<br>  "analyzer": "icu_analyzer",<br>  "text": "北京大学"<br>}<br><br>{<br>  "error": {<br>    "root_cause": [<br>      {<br>        "type": "remote_transport_exception",<br>        "reason": "[F2nqCBO][127.0.0.1:9300][indices:admin/analyze[s]]"<br>      }<br>    ],<br>    "type": "illegal_argument_exception",<br>    "reason": "failed to find global analyzer [icu_analyzer]"<br>  },<br>  "status": 400<br>}</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不知道你是否已经安装了icu-analyzer？<br><br>http://localhost:9200/_cat/plugins <br>查看插件。否则使用elasticsearch-plugin install analysis-icu<br></p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/09/42/b7a406c9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Hurt</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">建议 来个python整合和分词的处理 😁</div> <span class="time">2019-08-15</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">分词不需要python。使用python写入其实是用rest api。课程space jam 一节，有提供相关的代码。并不难的</p> <p class="reply-time">2019-08-16</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/09/42/b7a406c9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Hurt</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">es 是不是中文分词不是很友好吧 推荐是用jieba在处理 是吧</div> <span class="time">2019-08-15</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">中文分词可以选择几个相关插件，后面有一节介绍。然后不断完善符合自己需求的词库。</p> <p class="reply-time">2019-08-16</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/c6/94/7a8da3e4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">PLADahuzi</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师，请问你在中文分词时使用的是post方法 ，而之前你用的是get方法，有什么区别吗？  我用get进行分词也好像是没有什么问题，解答一下吗？</div> <span class="time">2019-08-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">查询时get和post可以混着用，一般用post更加好，因为不会有uri 参数过长的问题。_analyze api也一样</p> <p class="reply-time">2019-08-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/7e/00/c00ddb9d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">DreamDeparture</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师怎么在ES集群中安装中文分词器插件，我是在docker中运javascript:;行的，多谢指导。</div> <span class="time">2019-07-25</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker需要写Dockerfile，然后在dockerfile中加上install plugin的命令。然后执行 docker build . 即可以编译出带插件的image</p> <p class="reply-time">2019-07-26</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4f/26/f21afb83.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖色浮余生</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">我也提一下spring boot整个es😬</div> <span class="time">2019-07-08</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">➕1</p> <p class="reply-time">2019-07-08</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/37/1d/b8014237.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">醉美柳舞之众星捧月</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">我也需要Java整合ES的，我是用的springCloud,谢谢老师</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">好！</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/42/75/b847acfa.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">塘渡</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">课程更新频率是怎么安排的？</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">应该会在2个月内更新完毕</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/23/50/1f5154fe.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">无笔秀才</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师你好，在进行区间聚合的时候，如根据age 年龄段进行聚合，0-18 ， 18-* 分为未成年人和成年人。<br>聚合如下:<br>{<br>    "aggs" : {<br>        "age_ranges" : {<br>            "range" : {<br>                "field" : "age",<br>                "keyed" : true,<br>                "ranges" : [<br>                    { "key" : "未成年", "to" : 18 },<br>                    { "key" : "成年人", "from" : 18 }<br>                ]<br>            }<br>        }<br>    }<br>}<br>现在有10条记录  ，结果是未成年3条， 成年的4条。 发现有3条记录 根本就没有age字段，现在产品想把剩下的3条放到"其他"项里。 这里我想到的办法是先count 一下，再减去aggs 里每一项的值。 就是其他的数量。请老师赐教。</div> <span class="time">2019-06-30</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你需要为空值设置默认值，在你的例子里设置成“其他”的keyword即可<br><br>文档<br><br>https://www.elastic.co/guide/en/elasticsearch/reference/5.2/null-value.html</p> <p class="reply-time">2019-07-10</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/75/fc/2e4eff0c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">oldriver</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师， docker环境怎么安装cu analyzer</div> <span class="time">2019-06-30</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker如何需要安装 需要自己写 Dockerfile。把es的image作为base image。然后执行install icu，然后打成新的image。在compose中使用你自己生成的新的image</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/4e/1b/f4b786b9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">飞翔</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">在elasticsearch 中，怎么配置使用什么analizer呀？</div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">在后续的maaping中会讲解。默认采用standard analyzer</p> <p class="reply-time">2019-06-29</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/e4/49/a7f75e0c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">孙建中</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>1</span></a></div>
	</div>
	<div class="bd">老师 ，您好！请教下，比如我安装了icu插件，我在分词是怎么知道填写的是icu_analyzer呢，而不是icu呢？因为之前在kibana中调试出错，是因为我一直填写的是icu。谢谢老师</div> <span class="time">2019-06-28</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">这个anakyzer的名字应该通过帮助文档查看后填写</p> <p class="reply-time">2019-06-28</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/19/93/e1/4c1f8e8b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">为光</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我在想，能不能有一节python整合es的课.........</div> <span class="time">2019-09-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">第四章，深入搜索中的视频 31. space jam 一次全文搜索的实例，里面就是用python通过调用rest API 实现的，可以参考一下</p> <p class="reply-time">2019-09-29</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/5e/9d/f7fd4b13.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">wj🐾</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，请问有命令可以查询目前我的es安装了哪些分词器么</div> <span class="time">2019-09-23</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以尝试查看 _cat/plugins 看插件名字。至于customer analyzer 需要到template或者index上看</p> <p class="reply-time">2019-09-25</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/66/92/f1f83d8b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Siri</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师 讲下PHP+ES呀 PHP！！！</div> <span class="time">2019-09-19</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/67/f4/9a1feb59.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">godtrue</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">Analysis——文本分析，将全文本转化为一个个分词的一个具体过程，这个过程需要使用具体的分词器来完成，ES内置的有各种分词器<br>Analyzer——分词器，具体完成文本分析的组件，她包括三部分，Chatacter Filters ——处理原始文本，例如去标签，只获取文本信息；Tokenizer——按照一定的规则切分单词，比如按空格切分；Token Filters ——对切分的单词进行加工，比如转换大小写，增加同义词等。ES提供了许多分词器，也提供了自定义分词器的接口。<br>请问老师，中文分词的原理是什么，特别是那些优秀的中文分词的插件的实现原理是啥?</div> <span class="time">2019-09-19</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4f/26/f21afb83.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖色浮余生</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师 标准分词器可以添加字典吗？若可以，如何添加？</div> <span class="time">2019-09-14</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/f6/8c/c4c17bbe.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">恒初</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">没有场景，很难记忆这些内容</div> <span class="time">2019-09-14</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">按照每节课的demo去做一下，后面有一些例子都能帮助你强化记忆的。不用怕，一开始概念多，确实记不住，多用用就能熟能生巧</p> <p class="reply-time">2019-09-14</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/31/05/8fda52c7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">6481</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，看了你的课程很有收获，最近项目再用ES，一直对es的理解停留在主要解决查询的问题上，看了以后更坚定了我坚持学完的信念。另外，能不能开一节Java整合的课程 ，期待</div> <span class="time">2019-09-04</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">按照大家的要求，我会在最后部分放一个springboot相关的一节课</p> <p class="reply-time">2019-09-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/cb/a2/e21abfee.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Marco</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师,我使用中文分词,例如刚说的苹果手机,我不想搜索结果出现苹果这些商品,要如何处理呢?</div> <span class="time">2019-08-26</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/47/b0/99ca6ce9.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">东郭</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">pattern analyzer怎么定义正则表达式呢</div> <span class="time">2019-08-20</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/c5/d1/cbc57e2d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">root</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问一下  后面的视频什么时候更新呢</div> <span class="time">2019-08-19</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">每周陆续都有更新的</p> <p class="reply-time">2019-08-20</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="http://thirdwx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKDB2QDznn2l92CPC9EibgsQsLyvD5E5Zcwy4vhLhqK7DyhKA9bJgg3eRPGz1FZtTDiaDnvMP2pSQaA/132" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_2e09f0</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，elasticsearch-thulac-plugin分词器怎么安装使用，能说明一下吗，ik分词器github上就有如何使用</div> <span class="time">2019-08-12</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">安装插件 <br><br>可以用elasticsearch-plugin install<br> 下载后用file:// 或者直接指定http网上的zio路径<br><br><br>安装包地址去github每个项目的release，找到符合自己版本的，查找到zip的地址即可<br></p> <p class="reply-time">2019-08-15</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/6d/ab/4b1dc7cb.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">能量熊</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">分享一下docker容器中安装ik分词器的方法，使得所有节点共享ik分词器，不需要每个节点都去配置一遍<br>elasticsearch:<br>    volumes:<br>      - es73data02:/usr/share/elasticsearch/data<br>      - pulgins:/usr/share/elasticsearch/plugins<br>elasticsearch2:<br>    volumes:<br>      - es73data02:/usr/share/elasticsearch/data<br>      - pulgins:/usr/share/elasticsearch/plugins<br><br>volumes:<br>  es73data01:<br>    driver: local<br>  es73data02:<br>    driver: local<br>  plugins:<br>    driver: local<br><br>这两个容器(节点)实例共享了pulgins的资源，命名为pulgins的主机目录在哪里？通过以下命令可以找到<br>docker inspect 容器名 <br>可以看到es容器的plugins目录映射到centos主机的实际路径是<br>/var/lib/docker/volumes/docker-compose-yml_plugins/_data<br>两个节点共享的都是一个centos主机实际路径<br>只需要把ik分词器放到/var/lib/docker/volumes/docker-compose-yml_plugins/_data目录下，重启es即可生效<br>以后装插件，直接朝这个目录丢，容器删掉也不会丢失</div> <span class="time">2019-08-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👍，你也可以写都ckefile 自己打一个docker image</p> <p class="reply-time">2019-08-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/52/02/b8e07243.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">May</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我在用python的elasticsearch包，看到说6之后的版本是需要明确写Content Type,不知道加在哪里。试了很多依然报需要Content Type的错误。如果您用过的话能否指点下？谢谢。</div> <span class="time">2019-08-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">我没有使用过python的包，你说的是es里的type还是rest api中的content type？<br><br>能否提供一下出错信息？<br><br><br>建议使用最新的版本，因为7.x有部分api发生了改变。</p> <p class="reply-time">2019-08-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/46/e7/e20279ea.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">氧气🌙 🐟 🌺</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">没有对应ES 7.1.0 的THULAC版本吗？<br>Plugin 版本	ES 版本	THULAC 版本	Link<br>master	6.x -> master	lite	<br>6.4.1-181027	6.4.1	lite	下载<br>6.4.0-181027	6.4.0	lite	下载<br>6.3.0-181027	6.3.0	lite	下载<br>6.2.0-181027	6.2.0	lite	下载<br>6.1.0-181027	6.1.0	lite	下载</div> <span class="time">2019-07-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你到github的release下找一下，如果没有，只能说暂时还没有发布</p> <p class="reply-time">2019-07-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/99/fd/db057542.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">fhero</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">建议后面有一些结合springboot+es实战的例子,不然这些概念看过后就忘了</div> <span class="time">2019-07-27</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">再讲完最后预计的课程，会考虑➕一个springboot➕es的例子。本来也有设计其他的实战，你也可以自己想一些自己的需求，结合学到的知识，看看是否可以灵活运用，加深印象</p> <p class="reply-time">2019-07-29</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/e5/17/c21d7ad8.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">friend</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问老师，whitespace analyser 为什么把2作为word而不是number呢？</div> <span class="time">2019-07-27</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不是很懂你的问题，用空格分词而已，token都按文本处理的</p> <p class="reply-time">2019-08-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/e0/1f/d622b314.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">有理想的人妖</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">执行: GET _cat/plugins<br>结果:<br>skywalking2 analysis-icu 6.5.4<br>skywalking1 analysis-icu 6.5.4<br><br>执行:GET /_analyze<br>{<br>  "analyzer": "icu_analyzer"<br>  , "text": "他说的确实在理"<br>}<br><br>结果:<br>{<br>  "error": {<br>    "root_cause": [<br>      {<br>        "type": "remote_transport_exception",<br>        "reason": "[skywalking1][10.10.129.240:9300][indices:admin/analyze[s]]"<br>      }<br>    ],<br>    "type": "illegal_argument_exception",<br>    "reason": "failed to find global analyzer [icu_analyzer]"<br>  },<br>  "status": 400<br>}<br><br>这是为什么,我安装的是6.5.4版本,es,kibana都是...<br></div> <span class="time">2019-07-23</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/7a/08/4d3e47dd.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Aaron Cheung</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师 python 整合 es的例子 支持一下 自顶</div> <span class="time">2019-07-22</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">后面有用python调用es的代码，其实都是rest call，每个语言都大同小异f的</p> <p class="reply-time">2019-07-22</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/01/83/842a10f5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">方光明</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，你好，我使用同样的ocker-compose.yaml配置文件，只是elasticsearch 升级到7.2.0版本。<br>每次停掉集群服务，再重启的时候，就会报错。<br>看到日志是这样的：<br> {"type": "server", "timestamp": "2019-07-21T09:47:49,670+0000", "level": "WARN", "component": "o.e.c.c.ClusterFormationFailureHelper", "cluster.name": "es_cluster", "node.name": "es7_01",  "message": "master not discovered or elected yet, an election requires a node with id [g0E2eYppRVuYzeWf_7yl7Q], have discovered [] which is not a quorum; discovery will continue using [] from hosts providers and [{es7_01}{wMGyHJFETVqKFpm6FMJMng}{fwtZRbgMQi-0gl7N4qPBuw}{172.24.0.4}{172.24.0.4:9300}<br>访问集群状态接口：http://localhost:9200/_cluster/state<br>返回是这样的：<br>"type": "master_not_discovered_exception",<br>"status": 503<br><br>这个是es的bug吗，还是什么缺少什么配置呢。</div> <span class="time">2019-07-21</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你去看一下那节课讨论区，其他同学的一些分享</p> <p class="reply-time">2019-07-22</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/9c/53/ade0afb0.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">ub8</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师 springboot整合es的麻烦讲一下。</div> <span class="time">2019-07-21</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/7c/b5/4a7a2bd4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Sunqc</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd"><br>GET /_cat/plugins<br><br>analysis-icu 7.0.0<br>================使用安装的插件分词器确实报错呢=======================<br>POST /_analyze<br>{<br>  "analyzer":"icu_analyzer"<br>  "text":"为什么"  <br>}<br>=========================================<br>{<br>  "error": {<br>    "root_cause": [<br>      {<br>        "type": "illegal_argument_exception",<br>        "reason": "Failed to parse request body"<br>      }<br>    ],<br>    "type": "illegal_argument_exception",<br>    "reason": "Failed to parse request body",<br>    "caused_by": {<br>      "type": "json_parse_exception",<br>      "reason": "Unexpected character ('\"' (code 34)): was expecting comma to separate Object entries\n at [Source: org.elasticsearch.transport.netty4.ByteBufStreamInput@1579ee58; line: 3, column: 4]"<br>    }<br>  },<br>  "status": 400<br>}<br><br>=====================================================</div> <span class="time">2019-07-20</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">400错误代表着json payload格式有错。<br><br>仔细看一下，你的第一行“icu_analyzer后面，少了个逗号。<br></p> <p class="reply-time">2019-07-22</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/62/14/9712dd98.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">wangdexing</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">分词器 包含 Character Filters、Tokenizer、Token Filter这3部分。比如 Tokenizer有Whitespace,Keyword,Pattern等很多种。Token Filter也一样存在Standard,Lower Case,Stop等好多种. 生产中感觉分词不会直接用Simple Analyzer 这种分词器吧，应该都是自己去从Tokenizer集合中选择一种或多种 再从Token Filter中选择一种或多种 自定义搭配使用吧。</div> <span class="time">2019-07-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">这个还是要看场景的。而且很多时候，甚至会创建多个子字段，使用不同的分词器。例如使用English分词器，然后创建一个子field，使用standard分词器。然后使用most_fileds的方式对不同字段的算分进行相加返回。</p> <p class="reply-time">2019-07-18</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/98/ec/d9427611.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Bob</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，什么时候分享一下es7.2.0 整合springboot ，项目中正准备用es , 在实验过程中发现最新的ES7.2.0 整合springboot 2.1.6 链接不上集群 报错NoNodeAvailableException[None of the configured nodes are available  配置都正确 把es版本降低到6.x就没有问题</div> <span class="time">2019-07-17</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">如果使用spring data的部分，估计还不支持新版本。如果是用java rest call，版本就不会是什么大的问题</p> <p class="reply-time">2019-07-17</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/2a/f3/b47ac3f7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">绅士</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师学这个主要想：es+mysql+springBoot+java,后期课程有综合讲一下的吗，不然对我们经常接触mysql和java的人来说，并没有实际操作的经验呀</div> <span class="time">2019-07-16</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">先把相关知识都学完，后续在时间允许的情况下可以增加一些内容</p> <p class="reply-time">2019-07-16</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/f0/8f/ca9fded0.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">~尘曦~</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师问一下es 数据一多的话。在kibana搜索老超时报错；有什么好的办法吗</div> <span class="time">2019-07-16</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不知道多少算多？笔记本上本来就是学习为主。如果硬件资源匮乏，数据量又大，系统肯定不堪重负。</p> <p class="reply-time">2019-07-16</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/d8/97/f5308793.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">super man</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师能否给个spring boot结合es的实例</div> <span class="time">2019-07-15</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/f0/f4/69182b25.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Th.黒</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师  java需求应该很大  嘿嘿 </div> <span class="time">2019-07-15</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">SuperSnow</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，想问一下，如果我想对一个索引查询一个词，这个词存在于多个文档中，有可能一些文档中对这个词也是多次出现，用API的哪个命令可以看到查询返回结果的结构呢？一个文档下面的查询词的位置和偏移量是个数组，这个我已经验证并看到了。那是不是对应的存在于多个文档中也是个数组呢？</div> <span class="time">2019-07-12</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">参数中添加“profile”:true<br>可以查看具体的算分和查询过程</p> <p class="reply-time">2019-07-12</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">SuperSnow</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，还是加一节.net core整合ES的比较好，.net core是趋势啊。</div> <span class="time">2019-07-12</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/41/87/d26efb2e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">SuperSnow</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，还是加一节.net core整合ES的比较好，.net core是趋势啊。</div> <span class="time">2019-07-12</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="" class="avatar">
<div class="info">
	<div class="hd"><span class="username">续某某</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">java.net.ConnectException: Connection refused: elasticsearch/172.19.0.4:9200<br><br>Caused by: play.shaded.ahc.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: elasticsearch/172.19.0.4:9200<br><br>Caused by: java.net.ConnectException: Connection refused<br><br>老师: docker-compose up  启动老报这个是怎么回事啊?</div> <span class="time">2019-07-11</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/15/65/c0/7727b3e7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">马小文</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师,建议添加spark整合es的课程吧。毕竟es也算是大数据生态圈的东西</div> <span class="time">2019-07-10</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/3d/8a/aa4a82c4.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">金刚不换</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">能不能讲一下关于sql语句的分词？</div> <span class="time">2019-07-09</span>
	<div class="reply">
	
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/4b/b3/51bb33f2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">北冥有鱼</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师好，因为分词实在重要，所以想问问，分词器在实际中是如何运用的？<br>我想到的方案是:先拿到实际的一部分数据，然后用各种分期词试一遍，看实际的分词效果，找到满意的分词器后，在创建index的时候用mapping指定？<br>请老师指教。</div> <span class="time">2019-07-07</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">可以看第二部分，有讲的。很多时候要创建多字段，采用不同的分词器，然后使用multi-match</p> <p class="reply-time">2019-07-09</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c9/20/523828a2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">zj</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我觉得用es，最重要的就是分词了，分词如何分的准确，一般是通过什么方式呢，词典吗，还是有相关的模型训练。希望老师能分享一下分词的经验。</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">后续的课程会有所介绍</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/c9/20/523828a2.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">zj</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">docker compose如何安装icu-analyzer</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">docker中如果需要安装插件。需要写Dockerfile，通过docker build 构建出一个新的image</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/54/a9/c4eeee9b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">limu</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师请教一下，在dockerfile里面写了RUN elasticsearch-plugin install analysis-icu，然后访问http://127.0.0.1:9200/_cat/plugins看到有icu插件，但是在调用的时候仍然提示failed to global analyzer [icu_analyzer]是怎么会事呢？</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">那个需要你自己去build成自己的image，然后更新docker-compose中的image为本地新build出来的image</p> <p class="reply-time">2019-07-06</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/13/62/8f/c0f40d98.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">danvid</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">希望老师后面多讲点聚合相关的东西～和一些性能优化的问题～还希望讲一下二次开发之类的～评分模型最好能做一下推导～感觉网上说太乱了～谢谢老师～有机会讲一下lucene底层就最好了～谢谢</div> <span class="time">2019-07-05</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">你说的，在后续课程都有涵盖。评分模型我争取讲的简单。如果看了以后还有问题，我们可以一起探讨。</p> <p class="reply-time">2019-07-05</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/14/fd/81/1864f266.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">石将从</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">强烈建议老师新增java和springboot整合es章节</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">嗯 我会考虑的</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/54/a9/c4eeee9b.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">limu</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">赶紧更新吧，遇到了动态模版的问题等你讲解呢。</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👌</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/47/cf/6f72ed87.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">🐀🦄 🐕</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">看到很多评论说用java整合es, 老师能不能再整合的过程加一些curd的demo, 再加一些比较复杂的 agg查询. 现在用spring data的api做这些复杂的es聚合查询. 写起来不好写,维护起来也不好维护. 现在都是代码里面写好query语句的. 老师对于这些复杂查询讲一下怎么实现的思路?</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">代码里可以用querytemplate 实现逻辑分离</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/15/f8/4a/0563b66d.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">John</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，我也需要Java整合</div> <span class="time">2019-07-03</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">👌</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/10/4c/8e/6a7b660e.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">洛洛米</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">我们也需要springboot和es结合的常用示例。。。不过最新版本的springboot支持的es版本好像是6.6.2，用老师您7.1.0的版本链接不上。。。</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">我可以抽空整一下，看看能否给大家弄个例子</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/53/ee/4c2b7079.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_901193</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">希望老师讲一下springboot结合es，以及一些常见接口调用，多谢！并且课程间隔短一些。</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">嗯，好的👌</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/17/92/16/558ff49c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">ctf小白</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师想请教下，使用的默认的analyzer进行应用日志处理时, 当遇到“c.h.a.f.c.grpc.service.test”这样的词时，没有按点"."进行分词处理，导致搜索service或者test找不到“c.h.a.f.c.grpc.service.test”，这个可以怎样进行处理？ 还想请教下针对应用日志的处理这样的应用场景有哪个analyzer推荐吗？</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">不好意思，回答晚了。你可以使用simple，可以按照.分词</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/fd/c3/bcefcdf5.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">暖暖日光</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，能否加个与hive结合课程</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">嗯，这个需要看大家的反馈，如果很多同学有这方面的需求，可以➕！</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/0f/4a/6f/1cd4aa1a.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">路阳</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">公司打算用es的 搜索功能，来实现客服机器人的功能，老是觉得可行吗？</div> <span class="time">2019-07-02</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">技术上可行的。就是对内容的相关性需要做大量的调优工作</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/23/50/1f5154fe.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">无笔秀才</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师您说，首字母开始的通配查询需要避免。<br>可是如何满足 在标题里 含有 (刘强东 且 章泽天）或者含有 马云的记录呢？</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">普通match查询就可以了啊。中文分词可以把马云刘强东章泽天加入你的分词插件的字典里 确保不会分成 马/云 刘/强/东</p> <p class="reply-time">2019-07-02</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/12/c1/1a/3d5f4da7.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">康</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">请问一下，在插入es数据的时候，如果字符串后面带有多个空格，当你插入es的时候会发现es把多个空格转成一个空格，如何禁止es做这种转换呢</div> <span class="time">2019-07-01</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">字段设置成keyword，或者用keyword analyzer也不会trim</p> <p class="reply-time">2019-07-04</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/11/23/50/1f5154fe.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">无笔秀才</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">感谢老师回复，这种query string查询性能低下。<br>{<br>    "query":{<br>        "bool":{<br>            "filter":[<br>                {<br>                    "query_string":{<br>                        "default_field":"NEWS.jsonTitle.sTitle.keyword",<br>                        "query":"(*刘强东* AND *章泽天*) OR *马云*"<br>                    }<br>                },<br>                {<br>                    "range":{<br>                        "NEWS.publishAt":{<br>                            "gt":"2019-06-30T00:00:00+08:00",<br>                            "lt":"2019-06-30T22:40:29+08:00"<br>                        }<br>                    }<br>                },<br>                {<br>                    "range":{<br>                        "NEWS.circularStates.iRCount":{<br>                            "gt":0<br>                        }<br>                    }<br>                }<br>            ]<br>        }<br>    }<br>}</div> <span class="time">2019-06-30</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">如果我没理解错，<br><br>你尝试使用wildcard查询。wildcard查询本身性能就不够好。如果你尝试从首字母通配，那就会雪上加霜。<br>首字母开始的通配查询需要避免。<br><br></p> <p class="reply-time">2019-07-01</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/18/18/3a/b407889c.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Geek_817ea4</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">kibana怎么测试ik分词器，我测试的时候会报：failed to find global analyzer [ik_max_word]错误，同样的命令head插件却可以！</div> <span class="time">2019-06-29</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">ik分析器需要安装 在第二部分中文分词有详细讲解</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li><li data-v-87ffcada="" class="comment-item"><img src="https://static001.geekbang.org/account/avatar/00/16/51/33/f43fa487.jpg" class="avatar">
<div class="info">
	<div class="hd"><span class="username">Mr.Liu</span>
	<div class="control">
		 <a href="javascript:;" class="btn-praise"><i class="iconfont"></i> <span>0</span></a></div>
	</div>
	<div class="bd">老师，对于车牌号怎么分词比较好？</div> <span class="time">2019-06-28</span>
	<div class="reply">
	<div class="reply-hd"><i class="iconfont"></i> <span>作者回复</span></div> 
	<p class="reply-content">车牌号，我觉得应该不需要分词，而是应该当作一个整体精确匹配。mapping中采用keyword的类型。第二部分的最开始几节课应该可以解决你的疑惑。</p> <p class="reply-time">2019-06-30</p>
	</div>
</div>
</li></ul></div></div><div data-v-4e11b9bf=""></div></div></div><link href="https://cdn.bootcss.com/dplayer/1.25.0/DPlayer.min.css" rel="stylesheet"><script src="https://cdn.bootcss.com/hls.js/0.10.1/hls.min.js"></script><script src="https://cdn.bootcss.com/dplayer/1.25.0/DPlayer.min.js"></script><script>            const dp = new DPlayer({                container: document.getElementById('DplayerCont'),                video: {                    url: 'https://media001.geekbang.org/d5ee1f0e687b465fb69432149298e3b7/d385e4ad90ba4286844f1487954b628f-f35131dbade36acbfad19ad447c077e9-hd.m3u8',                    type: 'hls'                }            });</script></body></html>